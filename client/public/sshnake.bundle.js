(()=>{var u={227:(u,f,d)=>{f.formatArgs=function formatArgs(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+u.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;f.splice(1,0,d,"color: inherit");let _=0,v=0;f[0].replace(/%[a-zA-Z%]/g,(u=>{"%%"!==u&&(_++,"%c"===u&&(v=_))})),f.splice(v,0,d)},f.save=function save(u){try{u?f.storage.setItem("debug",u):f.storage.removeItem("debug")}catch(u){}},f.load=function load(){let u;try{u=f.storage.getItem("debug")}catch(u){}!u&&"undefined"!=typeof process&&"env"in process&&(u=process.env.DEBUG);return u},f.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},f.storage=function localstorage(){try{return localStorage}catch(u){}}(),f.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],f.log=console.debug||console.log||(()=>{}),u.exports=d(447)(f);const{formatters:_}=u.exports;_.j=function(u){try{return JSON.stringify(u)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}},447:(u,f,d)=>{u.exports=function setup(u){function createDebug(u){let f,d,_,v=null;function debug(...u){if(!debug.enabled)return;const d=debug,_=Number(new Date),v=_-(f||_);d.diff=v,d.prev=f,d.curr=_,f=_,u[0]=createDebug.coerce(u[0]),"string"!=typeof u[0]&&u.unshift("%O");let y=0;u[0]=u[0].replace(/%([a-zA-Z%])/g,((f,_)=>{if("%%"===f)return"%";y++;const v=createDebug.formatters[_];if("function"==typeof v){const _=u[y];f=v.call(d,_),u.splice(y,1),y--}return f})),createDebug.formatArgs.call(d,u);(d.log||createDebug.log).apply(d,u)}return debug.namespace=u,debug.useColors=createDebug.useColors(),debug.color=createDebug.selectColor(u),debug.extend=extend,debug.destroy=createDebug.destroy,Object.defineProperty(debug,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==v?v:(d!==createDebug.namespaces&&(d=createDebug.namespaces,_=createDebug.enabled(u)),_),set:u=>{v=u}}),"function"==typeof createDebug.init&&createDebug.init(debug),debug}function extend(u,f){const d=createDebug(this.namespace+(void 0===f?":":f)+u);return d.log=this.log,d}function toNamespace(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(u){if(u instanceof Error)return u.stack||u.message;return u},createDebug.disable=function disable(){const u=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((u=>"-"+u))].join(",");return createDebug.enable(""),u},createDebug.enable=function enable(u){let f;createDebug.save(u),createDebug.namespaces=u,createDebug.names=[],createDebug.skips=[];const d=("string"==typeof u?u:"").split(/[\s,]+/),_=d.length;for(f=0;f<_;f++)d[f]&&("-"===(u=d[f].replace(/\*/g,".*?"))[0]?createDebug.skips.push(RegExp("^"+u.slice(1)+"$")):createDebug.names.push(RegExp("^"+u+"$")))},createDebug.enabled=function enabled(u){if("*"===u[u.length-1])return!0;let f,d;for(f=0,d=createDebug.skips.length;f<d;f++)if(createDebug.skips[f].test(u))return!1;for(f=0,d=createDebug.names.length;f<d;f++)if(createDebug.names[f].test(u))return!0;return!1},createDebug.humanize=d(824),createDebug.destroy=function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(u).forEach((f=>{createDebug[f]=u[f]})),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=function selectColor(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return createDebug.colors[Math.abs(f)%createDebug.colors.length]},createDebug.enable(createDebug.load()),createDebug}},725:(u,f,d)=>{"use strict";d.r(f)},712:(u,f,d)=>{"use strict";d.r(f)},824:u=>{var f=1e3,d=60*f,_=60*d,v=24*_,y=7*v,b=365.25*v;function plural(u,f,d,_){var v=f>=1.5*d;return Math.round(u/d)+" "+_+(v?"s":"")}u.exports=function(u,C){C=C||{};var S=typeof u;if("string"===S&&u.length>0)return function parse(u){if((u+="").length>100)return;var C=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(!C)return;var S=parseFloat(C[1]);switch((C[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return S*b;case"weeks":case"week":case"w":return S*y;case"days":case"day":case"d":return S*v;case"hours":case"hour":case"hrs":case"hr":case"h":return S*_;case"minutes":case"minute":case"mins":case"min":case"m":return S*d;case"seconds":case"second":case"secs":case"sec":case"s":return S*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}(u);if("number"===S&&isFinite(u))return C.long?function fmtLong(u){var y=Math.abs(u);if(y>=v)return plural(u,y,v,"day");if(y>=_)return plural(u,y,_,"hour");if(y>=d)return plural(u,y,d,"minute");if(y>=f)return plural(u,y,f,"second");return u+" ms"}(u):function fmtShort(u){var y=Math.abs(u);if(y>=v)return Math.round(u/v)+"d";if(y>=_)return Math.round(u/_)+"h";if(y>=d)return Math.round(u/d)+"m";if(y>=f)return Math.round(u/f)+"s";return u+"ms"}(u);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}},617:u=>{self,u.exports=(()=>{"use strict";var u={775:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.FitAddon=void 0;var d=function(){function e(){}return e.prototype.activate=function(u){this._terminal=u},e.prototype.dispose=function(){},e.prototype.fit=function(){var u=this.proposeDimensions();if(u&&this._terminal){var f=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(f._renderService.clear(),this._terminal.resize(u.cols,u.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var u=this._terminal._core;if(0!==u._renderService.dimensions.actualCellWidth&&0!==u._renderService.dimensions.actualCellHeight){var f=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(f.getPropertyValue("height")),_=Math.max(0,parseInt(f.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),y=d-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),b=_-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-u.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(b/u._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(y/u._renderService.dimensions.actualCellHeight))}}}},e}();f.FitAddon=d}},f={};return function r(d){if(f[d])return f[d].exports;var _=f[d]={exports:{}};return u[d](_,_.exports,r),_.exports}(775)})()},320:u=>{self,u.exports=(()=>{"use strict";var u={4567:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.AccessibilityManager=void 0;var y=d(9042),b=d(6114),C=d(9924),S=d(3656),L=d(844),E=d(5596),k=d(9631),x=function(u){function t(f,d){var _=u.call(this)||this;_._terminal=f,_._renderService=d,_._liveRegionLineCount=0,_._charsToConsume=[],_._charsToAnnounce="",_._accessibilityTreeRoot=document.createElement("div"),_._accessibilityTreeRoot.classList.add("xterm-accessibility"),_._accessibilityTreeRoot.tabIndex=0,_._rowContainer=document.createElement("div"),_._rowContainer.setAttribute("role","list"),_._rowContainer.classList.add("xterm-accessibility-tree"),_._rowElements=[];for(var v=0;v<_._terminal.rows;v++)_._rowElements[v]=_._createAccessibilityTreeNode(),_._rowContainer.appendChild(_._rowElements[v]);if(_._topBoundaryFocusListener=function(u){return _._onBoundaryFocus(u,0)},_._bottomBoundaryFocusListener=function(u){return _._onBoundaryFocus(u,1)},_._rowElements[0].addEventListener("focus",_._topBoundaryFocusListener),_._rowElements[_._rowElements.length-1].addEventListener("focus",_._bottomBoundaryFocusListener),_._refreshRowsDimensions(),_._accessibilityTreeRoot.appendChild(_._rowContainer),_._renderRowsDebouncer=new C.TimeBasedDebouncer(_._renderRows.bind(_)),_._refreshRows(),_._liveRegion=document.createElement("div"),_._liveRegion.classList.add("live-region"),_._liveRegion.setAttribute("aria-live","assertive"),_._accessibilityTreeRoot.appendChild(_._liveRegion),!_._terminal.element)throw Error("Cannot enable accessibility before Terminal.open");return _._terminal.element.insertAdjacentElement("afterbegin",_._accessibilityTreeRoot),_.register(_._renderRowsDebouncer),_.register(_._terminal.onResize((function(u){return _._onResize(u.rows)}))),_.register(_._terminal.onRender((function(u){return _._refreshRows(u.start,u.end)}))),_.register(_._terminal.onScroll((function(){return _._refreshRows()}))),_.register(_._terminal.onA11yChar((function(u){return _._onChar(u)}))),_.register(_._terminal.onLineFeed((function(){return _._onChar("\n")}))),_.register(_._terminal.onA11yTab((function(u){return _._onTab(u)}))),_.register(_._terminal.onKey((function(u){return _._onKey(u.key)}))),_.register(_._terminal.onBlur((function(){return _._clearLiveRegion()}))),_.register(_._renderService.onDimensionsChange((function(){return _._refreshRowsDimensions()}))),_._screenDprMonitor=new E.ScreenDprMonitor,_.register(_._screenDprMonitor),_._screenDprMonitor.setListener((function(){return _._refreshRowsDimensions()})),_.register((0,S.addDisposableDomListener)(window,"resize",(function(){return _._refreshRowsDimensions()}))),_}return v(t,u),t.prototype.dispose=function(){u.prototype.dispose.call(this),(0,k.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(u,f){var d=u.target,_=this._rowElements[0===f?1:this._rowElements.length-2];if(d.getAttribute("aria-posinset")!==(0===f?"1":""+this._terminal.buffer.lines.length)&&u.relatedTarget===_){var v,y;if(0===f?(v=d,y=this._rowElements.pop(),this._rowContainer.removeChild(y)):(v=this._rowElements.shift(),y=d,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),y.removeEventListener("focus",this._bottomBoundaryFocusListener),0===f){var b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else b=this._createAccessibilityTreeNode(),this._rowElements.push(b),this._rowContainer.appendChild(b);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===f?-1:1),this._rowElements[0===f?1:this._rowElements.length-2].focus(),u.preventDefault(),u.stopImmediatePropagation()}},t.prototype._onResize=function(u){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var u=document.createElement("div");return u.setAttribute("role","listitem"),u.tabIndex=-1,this._refreshRowDimensions(u),u},t.prototype._onTab=function(u){for(var f=0;f<u;f++)this._onChar(" ")},t.prototype._onChar=function(u){var f=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==u&&(this._charsToAnnounce+=u):this._charsToAnnounce+=u,"\n"===u&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=y.tooMuchOutput)),b.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((function(){f._accessibilityTreeRoot.appendChild(f._liveRegion)}),0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,b.isMac&&(0,k.removeElementFromParent)(this._liveRegion)},t.prototype._onKey=function(u){this._clearLiveRegion(),this._charsToConsume.push(u)},t.prototype._refreshRows=function(u,f){this._renderRowsDebouncer.refresh(u,f,this._terminal.rows)},t.prototype._renderRows=function(u,f){for(var d=this._terminal.buffer,_=d.lines.length.toString(),v=u;v<=f;v++){var y=d.translateBufferLineToString(d.ydisp+v,!0),b=""+(d.ydisp+v+1),C=this._rowElements[v];C&&(0===y.length?C.innerText=" ":C.textContent=y,C.setAttribute("aria-posinset",b),C.setAttribute("aria-setsize",_))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var u=0;u<this._terminal.rows;u++)this._refreshRowDimensions(this._rowElements[u])}},t.prototype._refreshRowDimensions=function(u){u.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(L.Disposable);f.AccessibilityManager=x},3614:(u,f)=>{function r(u){return u.replace(/\r?\n/g,"\r")}function i(u,f){return f?"[200~"+u+"[201~":u}function n(u,f,d){u=i(u=r(u),d.decPrivateModes.bracketedPasteMode),d.triggerDataEvent(u,!0),f.value=""}function o(u,f,d){var _=d.getBoundingClientRect(),v=u.clientX-_.left-10,y=u.clientY-_.top-10;f.style.width="20px",f.style.height="20px",f.style.left=v+"px",f.style.top=y+"px",f.style.zIndex="1000",f.focus()}Object.defineProperty(f,"__esModule",{value:!0}),f.rightClickHandler=f.moveTextAreaUnderMouseCursor=f.paste=f.handlePasteEvent=f.copyHandler=f.bracketTextForPaste=f.prepareTextForTerminal=void 0,f.prepareTextForTerminal=r,f.bracketTextForPaste=i,f.copyHandler=function(u,f){u.clipboardData&&u.clipboardData.setData("text/plain",f.selectionText),u.preventDefault()},f.handlePasteEvent=function(u,f,d){u.stopPropagation(),u.clipboardData&&n(u.clipboardData.getData("text/plain"),f,d)},f.paste=n,f.moveTextAreaUnderMouseCursor=o,f.rightClickHandler=function(u,f,d,_,v){o(u,f,d),v&&_.rightClickSelect(u),f.value=_.selectionText,f.select()}},7239:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ColorContrastCache=void 0;var d=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(u,f,d){this._rgba[u]||(this._rgba[u]={}),this._rgba[u][f]=d},e.prototype.getCss=function(u,f){return this._rgba[u]?this._rgba[u][f]:void 0},e.prototype.setColor=function(u,f,d){this._color[u]||(this._color[u]={}),this._color[u][f]=d},e.prototype.getColor=function(u,f){return this._color[u]?this._color[u][f]:void 0},e}();f.ColorContrastCache=d},5680:function(u,f,d){var _=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b};Object.defineProperty(f,"__esModule",{value:!0}),f.ColorManager=f.DEFAULT_ANSI_COLORS=void 0;var v=d(8055),y=d(7239),b=v.css.toColor("#ffffff"),C=v.css.toColor("#000000"),S=v.css.toColor("#ffffff"),L=v.css.toColor("#000000"),E={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};f.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var u=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],f=[0,95,135,175,215,255],d=0;d<216;d++){var _=f[d/36%6|0],y=f[d/6%6|0],b=f[d%6];u.push({css:v.channels.toCss(_,y,b),rgba:v.channels.toRgba(_,y,b)})}for(d=0;d<24;d++){var C=8+10*d;u.push({css:v.channels.toCss(C,C,C),rgba:v.channels.toRgba(C,C,C)})}return u}());var k=function(){function e(u,d){this.allowTransparency=d;var _=u.createElement("canvas");_.width=1,_.height=1;var k=_.getContext("2d");if(!k)throw Error("Could not get rendering context");this._ctx=k,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new y.ColorContrastCache,this.colors={foreground:b,background:C,cursor:S,cursorAccent:L,selectionTransparent:E,selectionOpaque:v.color.blend(C,E),selectionForeground:void 0,ansi:f.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return e.prototype.onOptionsChange=function(u){"minimumContrastRatio"===u&&this._contrastCache.clear()},e.prototype.setTheme=function(u){void 0===u&&(u={}),this.colors.foreground=this._parseColor(u.foreground,b),this.colors.background=this._parseColor(u.background,C),this.colors.cursor=this._parseColor(u.cursor,S,!0),this.colors.cursorAccent=this._parseColor(u.cursorAccent,L,!0),this.colors.selectionTransparent=this._parseColor(u.selection,E,!0),this.colors.selectionOpaque=v.color.blend(this.colors.background,this.colors.selectionTransparent);var d={css:"",rgba:0};this.colors.selectionForeground=u.selectionForeground?this._parseColor(u.selectionForeground,d):void 0,this.colors.selectionForeground===d&&(this.colors.selectionForeground=void 0),v.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=v.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(u.black,f.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(u.red,f.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(u.green,f.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(u.yellow,f.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(u.blue,f.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(u.magenta,f.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(u.cyan,f.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(u.white,f.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(u.brightBlack,f.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(u.brightRed,f.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(u.brightGreen,f.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(u.brightYellow,f.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(u.brightBlue,f.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(u.brightMagenta,f.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(u.brightCyan,f.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(u.brightWhite,f.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},e.prototype.restoreColor=function(u){if(void 0!==u)switch(u){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[u]=this._restoreColors.ansi[u]}else for(var f=0;f<this._restoreColors.ansi.length;++f)this.colors.ansi[f]=this._restoreColors.ansi[f]},e.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},e.prototype._parseColor=function(u,f,d){if(void 0===d&&(d=this.allowTransparency),void 0===u)return f;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=u,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+u+" is invalid using fallback "+f.css),f;this._ctx.fillRect(0,0,1,1);var y=this._ctx.getImageData(0,0,1,1).data;if(255!==y[3]){if(!d)return console.warn("Color: "+u+" is using transparency, but allowTransparency is false. Using fallback "+f.css+"."),f;var b=_(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(u){return Number(u)})),4),C=b[0],S=b[1],L=b[2],E=b[3],k=Math.round(255*E);return{rgba:v.channels.toRgba(C,S,L,k),css:u}}return{css:this._ctx.fillStyle,rgba:v.channels.toRgba(y[0],y[1],y[2],y[3])}},e}();f.ColorManager=k},9631:function(u,f){var d=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.removeElementFromParent=void 0,f.removeElementFromParent=function(){for(var u,f,_,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];try{for(var b=d(v),C=b.next();!C.done;C=b.next()){var S=C.value;null===(_=null==S?void 0:S.parentElement)||void 0===_||_.removeChild(S)}}catch(f){u={error:f}}finally{try{C&&!C.done&&(f=b.return)&&f.call(b)}finally{if(u)throw u.error}}}},3656:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.addDisposableDomListener=void 0,f.addDisposableDomListener=function(u,f,d,_){u.addEventListener(f,d,_);var v=!1;return{dispose:function(){v||(v=!0,u.removeEventListener(f,d,_))}}}},3551:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.MouseZone=f.Linkifier=void 0;var y=d(8460),b=d(2585),C=function(){function e(u,f,d){this._bufferService=u,this._logService=f,this._unicodeService=d,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new y.EventEmitter,this._onHideLinkUnderline=new y.EventEmitter,this._onLinkTooltip=new y.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(u,f){this._element=u,this._mouseZoneManager=f},e.prototype.linkifyRows=function(u,f){var d=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=u,this._rowsToLinkify.end=f):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,u),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,f)),this._mouseZoneManager.clearAll(u,f),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return d._linkifyRows()}),e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var u=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var f=u.ydisp+this._rowsToLinkify.start;if(!(f>=u.lines.length)){for(var d=u.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,_=Math.ceil(2e3/this._bufferService.cols),v=this._bufferService.buffer.iterator(!1,f,d,_,_);v.hasNext();)for(var y=v.next(),b=0;b<this._linkMatchers.length;b++)this._doLinkifyRow(y.range.first,y.content,this._linkMatchers[b]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(u,f,d){if(void 0===d&&(d={}),!f)throw Error("handler must be defined");var _={id:this._nextLinkMatcherId++,regex:u,handler:f,matchIndex:d.matchIndex,validationCallback:d.validationCallback,hoverTooltipCallback:d.tooltipCallback,hoverLeaveCallback:d.leaveCallback,willLinkActivate:d.willLinkActivate,priority:d.priority||0};return this._addLinkMatcherToList(_),_.id},e.prototype._addLinkMatcherToList=function(u){if(0!==this._linkMatchers.length){for(var f=this._linkMatchers.length-1;f>=0;f--)if(u.priority<=this._linkMatchers[f].priority)return void this._linkMatchers.splice(f+1,0,u);this._linkMatchers.splice(0,0,u)}else this._linkMatchers.push(u)},e.prototype.deregisterLinkMatcher=function(u){for(var f=0;f<this._linkMatchers.length;f++)if(this._linkMatchers[f].id===u)return this._linkMatchers.splice(f,1),!0;return!1},e.prototype._doLinkifyRow=function(u,f,d){for(var _,v=this,y=RegExp(d.regex.source,(d.regex.flags||"")+"g"),b=-1,a=function(){var S=_["number"!=typeof d.matchIndex?0:d.matchIndex];if(!S)return C._logService.debug("match found without corresponding matchIndex",_,d),"break";if(b=f.indexOf(S,b+1),y.lastIndex=b+S.length,b<0)return"break";var L=C._bufferService.buffer.stringIndexToBufferIndex(u,b);if(L[0]<0)return"break";var E=C._bufferService.buffer.lines.get(L[0]);if(!E)return"break";var k=E.getFg(L[1]),x=k?k>>9&511:void 0;d.validationCallback?d.validationCallback(S,(function(u){v._rowsTimeoutId||u&&v._addLink(L[1],L[0]-v._bufferService.buffer.ydisp,S,d,x)})):C._addLink(L[1],L[0]-C._bufferService.buffer.ydisp,S,d,x)},C=this;null!==(_=y.exec(f))&&"break"!==a(););},e.prototype._addLink=function(u,f,d,_,v){var y=this;if(this._mouseZoneManager&&this._element){var b=this._unicodeService.getStringCellWidth(d),C=u%this._bufferService.cols,S=f+Math.floor(u/this._bufferService.cols),L=(C+b)%this._bufferService.cols,E=S+Math.floor((C+b)/this._bufferService.cols);0===L&&(L=this._bufferService.cols,E--),this._mouseZoneManager.add(new c(C+1,S+1,L+1,E+1,(function(u){if(_.handler)return _.handler(u,d);var f=window.open();f?(f.opener=null,f.location.href=d):console.warn("Opening link blocked as opener could not be cleared")}),(function(){y._onShowLinkUnderline.fire(y._createLinkHoverEvent(C,S,L,E,v)),y._element.classList.add("xterm-cursor-pointer")}),(function(u){y._onLinkTooltip.fire(y._createLinkHoverEvent(C,S,L,E,v)),_.hoverTooltipCallback&&_.hoverTooltipCallback(u,d,{start:{x:C,y:S},end:{x:L,y:E}})}),(function(){y._onHideLinkUnderline.fire(y._createLinkHoverEvent(C,S,L,E,v)),y._element.classList.remove("xterm-cursor-pointer"),_.hoverLeaveCallback&&_.hoverLeaveCallback()}),(function(u){return!_.willLinkActivate||_.willLinkActivate(u,d)})))}},e.prototype._createLinkHoverEvent=function(u,f,d,_,v){return{x1:u,y1:f,x2:d,y2:_,cols:this._bufferService.cols,fg:v}},e._timeBeforeLatency=200,e=_([v(0,b.IBufferService),v(1,b.ILogService),v(2,b.IUnicodeService)],e)}();f.Linkifier=C;var c=function(u,f,d,_,v,y,b,C,S){this.x1=u,this.y1=f,this.x2=d,this.y2=_,this.clickCallback=v,this.hoverCallback=y,this.tooltipCallback=b,this.leaveCallback=C,this.willLinkActivate=S};f.MouseZone=c},6465:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},C=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},S=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b};Object.defineProperty(f,"__esModule",{value:!0}),f.Linkifier2=void 0;var L=d(2585),E=d(8460),k=d(844),x=d(3656),R=function(u){function t(f){var d=u.call(this)||this;return d._bufferService=f,d._linkProviders=[],d._linkCacheDisposables=[],d._isMouseOut=!0,d._activeLine=-1,d._onShowLinkUnderline=d.register(new E.EventEmitter),d._onHideLinkUnderline=d.register(new E.EventEmitter),d.register((0,k.getDisposeArrayDisposable)(d._linkCacheDisposables)),d}return v(t,u),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(u){var f=this;return this._linkProviders.push(u),{dispose:function(){var d=f._linkProviders.indexOf(u);-1!==d&&f._linkProviders.splice(d,1)}}},t.prototype.attachToDom=function(u,f,d){var _=this;this._element=u,this._mouseService=f,this._renderService=d,this.register((0,x.addDisposableDomListener)(this._element,"mouseleave",(function(){_._isMouseOut=!0,_._clearCurrentLink()}))),this.register((0,x.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,x.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,x.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},t.prototype._onMouseMove=function(u){if(this._lastMouseEvent=u,this._element&&this._mouseService){var f=this._positionFromMouseEvent(u,this._element,this._mouseService);if(f){this._isMouseOut=!1;for(var d=u.composedPath(),_=0;_<d.length;_++){var v=d[_];if(v.classList.contains("xterm"))break;if(v.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._onHover(f),this._lastBufferCell=f)}}},t.prototype._onHover=function(u){if(this._activeLine!==u.y)return this._clearCurrentLink(),void this._askForLink(u,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,u)||(this._clearCurrentLink(),this._askForLink(u,!0))},t.prototype._askForLink=function(u,f){var d,_,v,y,b=this;this._activeProviderReplies&&f||(null===(v=this._activeProviderReplies)||void 0===v||v.forEach((function(u){null==u||u.forEach((function(u){u.link.dispose&&u.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=u.y);var L=!1,h=function(d,_){f?(null===(y=E._activeProviderReplies)||void 0===y?void 0:y.get(d))&&(L=E._checkLinkProviderResult(d,u,L)):_.provideLinks(u.y,(function(f){var _,v;if(!b._isMouseOut){var y=null==f?void 0:f.map((function(u){return{link:u}}));null===(_=b._activeProviderReplies)||void 0===_||_.set(d,y),L=b._checkLinkProviderResult(d,u,L),(null===(v=b._activeProviderReplies)||void 0===v?void 0:v.size)===b._linkProviders.length&&b._removeIntersectingLinks(u.y,b._activeProviderReplies)}}))},E=this;try{for(var k=C(this._linkProviders.entries()),x=k.next();!x.done;x=k.next()){var R=S(x.value,2);h(R[0],R[1])}}catch(u){d={error:u}}finally{try{x&&!x.done&&(_=k.return)&&_.call(k)}finally{if(d)throw d.error}}},t.prototype._removeIntersectingLinks=function(u,f){for(var d=new Set,_=0;_<f.size;_++){var v=f.get(_);if(v)for(var y=0;y<v.length;y++)for(var b=v[y],C=b.link.range.start.y<u?0:b.link.range.start.x,S=b.link.range.end.y>u?this._bufferService.cols:b.link.range.end.x,L=C;L<=S;L++){if(d.has(L)){v.splice(y--,1);break}d.add(L)}}},t.prototype._checkLinkProviderResult=function(u,f,d){var _,v=this;if(!this._activeProviderReplies)return d;for(var y=this._activeProviderReplies.get(u),b=!1,C=0;C<u;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(b=!0);if(!b&&y){var S=y.find((function(u){return v._linkAtPosition(u.link,f)}));S&&(d=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(C=0;C<this._activeProviderReplies.size;C++){var L=null===(_=this._activeProviderReplies.get(C))||void 0===_?void 0:_.find((function(u){return v._linkAtPosition(u.link,f)}));if(L){d=!0,this._handleNewLink(L);break}}return d},t.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},t.prototype._handleMouseUp=function(u){if(this._element&&this._mouseService&&this._currentLink){var f=this._positionFromMouseEvent(u,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(u,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(u,f){this._element&&this._currentLink&&this._lastMouseEvent&&(!u||!f||this._currentLink.link.range.start.y>=u&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,k.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(u){var f=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(u.link,d)&&(this._currentLink=u,this._currentLink.state={decorations:{underline:void 0===u.link.decorations||u.link.decorations.underline,pointerCursor:void 0===u.link.decorations||u.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,u.link,this._lastMouseEvent),u.link.decorations={},Object.defineProperties(u.link.decorations,{pointerCursor:{get:function(){var u,d;return null===(d=null===(u=f._currentLink)||void 0===u?void 0:u.state)||void 0===d?void 0:d.decorations.pointerCursor},set:function(u){var d,_;(null===(d=f._currentLink)||void 0===d?void 0:d.state)&&f._currentLink.state.decorations.pointerCursor!==u&&(f._currentLink.state.decorations.pointerCursor=u,f._currentLink.state.isHovered&&(null===(_=f._element)||void 0===_||_.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:function(){var u,d;return null===(d=null===(u=f._currentLink)||void 0===u?void 0:u.state)||void 0===d?void 0:d.decorations.underline},set:function(d){var _,v,y;(null===(_=f._currentLink)||void 0===_?void 0:_.state)&&(null===(y=null===(v=f._currentLink)||void 0===v?void 0:v.state)||void 0===y?void 0:y.decorations.underline)!==d&&(f._currentLink.state.decorations.underline=d,f._currentLink.state.isHovered&&f._fireUnderlineEvent(u.link,d))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((function(u){var d=0===u.start?0:u.start+1+f._bufferService.buffer.ydisp;f._clearCurrentLink(d,u.end+1+f._bufferService.buffer.ydisp)}))))}},t.prototype._linkHover=function(u,f,d){var _;(null===(_=this._currentLink)||void 0===_?void 0:_.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&u.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(d,f.text)},t.prototype._fireUnderlineEvent=function(u,f){var d=u.range,_=this._bufferService.buffer.ydisp,v=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-_-1,d.end.x,d.end.y-_-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(v)},t.prototype._linkLeave=function(u,f,d){var _;(null===(_=this._currentLink)||void 0===_?void 0:_.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&u.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(d,f.text)},t.prototype._linkAtPosition=function(u,f){var d=u.range.start.y===u.range.end.y,_=u.range.start.y<f.y,v=u.range.end.y>f.y;return(d&&u.range.start.x<=f.x&&u.range.end.x>=f.x||_&&u.range.end.x>=f.x||v&&u.range.start.x<=f.x||_&&v)&&u.range.start.y<=f.y&&u.range.end.y>=f.y},t.prototype._positionFromMouseEvent=function(u,f,d){var _=d.getCoords(u,f,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(u,f,d,_,v){return{x1:u,y1:f,x2:d,y2:_,cols:this._bufferService.cols,fg:v}},y([b(0,L.IBufferService)],t)}(k.Disposable);f.Linkifier2=R},9042:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.tooMuchOutput=f.promptLabel=void 0,f.promptLabel="Terminal input",f.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.MouseZoneManager=void 0;var C=d(844),S=d(3656),L=d(4725),E=d(2585),k=function(u){function t(f,d,_,v,y,b){var C=u.call(this)||this;return C._element=f,C._screenElement=d,C._bufferService=_,C._mouseService=v,C._selectionService=y,C._optionsService=b,C._zones=[],C._areZonesActive=!1,C._lastHoverCoords=[void 0,void 0],C._initialSelectionLength=0,C.register((0,S.addDisposableDomListener)(C._element,"mousedown",(function(u){return C._onMouseDown(u)}))),C._mouseMoveListener=function(u){return C._onMouseMove(u)},C._mouseLeaveListener=function(u){return C._onMouseLeave(u)},C._clickListener=function(u){return C._onClick(u)},C}return v(t,u),t.prototype.dispose=function(){u.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(u){this._zones.push(u),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(u,f){if(0!==this._zones.length){u&&f||(u=0,f=this._bufferService.rows-1);for(var d=0;d<this._zones.length;d++){var _=this._zones[d];(_.y1>u&&_.y1<=f+1||_.y2>u&&_.y2<=f+1||_.y1<u&&_.y2>f+1)&&(this._currentZone&&this._currentZone===_&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(d--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(u){this._lastHoverCoords[0]===u.pageX&&this._lastHoverCoords[1]===u.pageY||(this._onHover(u),this._lastHoverCoords=[u.pageX,u.pageY])},t.prototype._onHover=function(u){var f=this,d=this._findZoneEventAt(u);d!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),d&&(this._currentZone=d,d.hoverCallback&&d.hoverCallback(u),this._tooltipTimeout=window.setTimeout((function(){return f._onTooltip(u)}),this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(u){this._tooltipTimeout=void 0;var f=this._findZoneEventAt(u);null==f||f.tooltipCallback(u)},t.prototype._onMouseDown=function(u){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var f=this._findZoneEventAt(u);(null==f?void 0:f.willLinkActivate(u))&&(u.preventDefault(),u.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(u){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(u){var f=this._findZoneEventAt(u),d=this._getSelectionLength();f&&d===this._initialSelectionLength&&(f.clickCallback(u),u.preventDefault(),u.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var u=this._selectionService.selectionText;return u?u.length:0},t.prototype._findZoneEventAt=function(u){var f=this._mouseService.getCoords(u,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(f)for(var d=f[0],_=f[1],v=0;v<this._zones.length;v++){var y=this._zones[v];if(y.y1===y.y2){if(_===y.y1&&d>=y.x1&&d<y.x2)return y}else if(_===y.y1&&d>=y.x1||_===y.y2&&d<y.x2||_>y.y1&&_<y.y2)return y}},y([b(2,E.IBufferService),b(3,L.IMouseService),b(4,L.ISelectionService),b(5,E.IOptionsService)],t)}(C.Disposable);f.MouseZoneManager=k},6193:function(u,f){var d=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.RenderDebouncer=void 0;var _=function(){function e(u){this._renderCallback=u,this._refreshCallbacks=[]}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.addRefreshCallback=function(u){var f=this;return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return f._innerRefresh()}))),this._animationFrame},e.prototype.refresh=function(u,f,d){var _=this;this._rowCount=d,u=void 0!==u?u:0,f=void 0!==f?f:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,u):u,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return _._innerRefresh()})))},e.prototype._innerRefresh=function(){if(this._animationFrame=void 0,void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var u=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,f),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},e.prototype._runRefreshCallbacks=function(){var u,f;try{for(var _=d(this._refreshCallbacks),v=_.next();!v.done;v=_.next())(0,v.value)(0)}catch(f){u={error:f}}finally{try{v&&!v.done&&(f=_.return)&&f.call(_)}finally{if(u)throw u.error}}this._refreshCallbacks=[]},e}();f.RenderDebouncer=_},5596:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.ScreenDprMonitor=void 0;var y=function(u){function t(){var f=null!==u&&u.apply(this,arguments)||this;return f._currentDevicePixelRatio=window.devicePixelRatio,f}return v(t,u),t.prototype.setListener=function(u){var f=this;this._listener&&this.clearListener(),this._listener=u,this._outerListener=function(){f._listener&&(f._listener(window.devicePixelRatio,f._currentDevicePixelRatio),f._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){u.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var u;this._outerListener&&(null===(u=this._resolutionMediaMatchList)||void 0===u||u.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(d(844).Disposable);f.ScreenDprMonitor=y},3236:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},b=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b},C=this&&this.__spreadArray||function(u,f,d){if(d||2===arguments.length)for(var _,v=0,y=f.length;v<y;v++)!_&&v in f||(_||(_=Array.prototype.slice.call(f,0,v)),_[v]=f[v]);return u.concat(_||Array.prototype.slice.call(f))};Object.defineProperty(f,"__esModule",{value:!0}),f.Terminal=void 0;var S=d(2950),L=d(1680),E=d(3614),k=d(2584),x=d(5435),R=d(3525),A=d(3551),M=d(9312),O=d(6114),D=d(3656),T=d(9042),B=d(357),P=d(6954),I=d(4567),H=d(1296),F=d(7399),j=d(8460),q=d(8437),W=d(5680),U=d(3230),N=d(4725),z=d(428),K=d(8934),V=d(6465),G=d(5114),X=d(8969),Y=d(8055),Z=d(4269),J=d(5941),$=d(3107),Q=d(5744),ee=d(9074),te=d(2585),re="undefined"!=typeof window?window.document:null,ie=function(u){function t(f){void 0===f&&(f={});var d=u.call(this,f)||this;return d.browser=O,d._keyDownHandled=!1,d._keyDownSeen=!1,d._keyPressHandled=!1,d._unprocessedDeadKey=!1,d._onCursorMove=new j.EventEmitter,d._onKey=new j.EventEmitter,d._onRender=new j.EventEmitter,d._onSelectionChange=new j.EventEmitter,d._onTitleChange=new j.EventEmitter,d._onBell=new j.EventEmitter,d._onFocus=new j.EventEmitter,d._onBlur=new j.EventEmitter,d._onA11yCharEmitter=new j.EventEmitter,d._onA11yTabEmitter=new j.EventEmitter,d._setup(),d.linkifier=d._instantiationService.createInstance(A.Linkifier),d.linkifier2=d.register(d._instantiationService.createInstance(V.Linkifier2)),d._decorationService=d._instantiationService.createInstance(ee.DecorationService),d._instantiationService.setService(te.IDecorationService,d._decorationService),d.register(d._inputHandler.onRequestBell((function(){return d.bell()}))),d.register(d._inputHandler.onRequestRefreshRows((function(u,f){return d.refresh(u,f)}))),d.register(d._inputHandler.onRequestSendFocus((function(){return d._reportFocus()}))),d.register(d._inputHandler.onRequestReset((function(){return d.reset()}))),d.register(d._inputHandler.onRequestWindowsOptionsReport((function(u){return d._reportWindowsOptions(u)}))),d.register(d._inputHandler.onColor((function(u){return d._handleColorEvent(u)}))),d.register((0,j.forwardEvent)(d._inputHandler.onCursorMove,d._onCursorMove)),d.register((0,j.forwardEvent)(d._inputHandler.onTitleChange,d._onTitleChange)),d.register((0,j.forwardEvent)(d._inputHandler.onA11yChar,d._onA11yCharEmitter)),d.register((0,j.forwardEvent)(d._inputHandler.onA11yTab,d._onA11yTabEmitter)),d.register(d._bufferService.onResize((function(u){return d._afterResize(u.cols,u.rows)}))),d}return v(t,u),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),t.prototype._handleColorEvent=function(u){var f,d,_,v;if(this._colorManager){try{for(var S=y(u),L=S.next();!L.done;L=S.next()){var E=L.value,x=void 0,R="";switch(E.index){case 256:x="foreground",R="10";break;case 257:x="background",R="11";break;case 258:x="cursor",R="12";break;default:x="ansi",R="4;"+E.index}if(x)switch(E.type){case 0:var A=Y.color.toColorRGB("ansi"===x?this._colorManager.colors.ansi[E.index]:this._colorManager.colors[x]);this.coreService.triggerDataEvent(k.C0.ESC+"]"+R+";"+(0,J.toRgbString)(A)+k.C1_ESCAPED.ST);break;case 1:"ansi"===x?this._colorManager.colors.ansi[E.index]=Y.rgba.toColor.apply(Y.rgba,C([],b(E.color),!1)):this._colorManager.colors[x]=Y.rgba.toColor.apply(Y.rgba,C([],b(E.color),!1));break;case 2:this._colorManager.restoreColor(E.index)}}}catch(u){f={error:u}}finally{try{L&&!L.done&&(d=S.return)&&d.call(S)}finally{if(f)throw f.error}}null===(_=this._renderService)||void 0===_||_.setColors(this._colorManager.colors),null===(v=this.viewport)||void 0===v||v.onThemeChange(this._colorManager.colors)}},t.prototype.dispose=function(){var f,d,_;this._isDisposed||(u.prototype.dispose.call(this),null===(f=this._renderService)||void 0===f||f.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(_=null===(d=this.element)||void 0===d?void 0:d.parentNode)||void 0===_||_.removeChild(this.element))},t.prototype._setup=function(){u.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._updateOptions=function(f){var d,_,v,y;switch(u.prototype._updateOptions.call(this,f),f){case"fontFamily":case"fontSize":null===(d=this._renderService)||void 0===d||d.clear(),null===(_=this._charSizeService)||void 0===_||_.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(v=this.viewport)||void 0===v||v.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new I.AccessibilityManager(this,this._renderService)):(null===(y=this._accessibilityManager)||void 0===y||y.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},t.prototype._onTextAreaFocus=function(u){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(k.C0.ESC+"[I"),this.updateCursorStyle(u),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},t.prototype.blur=function(){var u;return null===(u=this.textarea)||void 0===u?void 0:u.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(k.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var u=this.buffer.ybase+this.buffer.y,f=this.buffer.lines.get(u);if(f){var d=Math.min(this.buffer.x,this.cols-1),_=this._renderService.dimensions.actualCellHeight,v=f.getWidth(d),y=this._renderService.dimensions.actualCellWidth*v,b=this.buffer.y*this._renderService.dimensions.actualCellHeight,C=d*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=C+"px",this.textarea.style.top=b+"px",this.textarea.style.width=y+"px",this.textarea.style.height=_+"px",this.textarea.style.lineHeight=_+"px",this.textarea.style.zIndex="-5"}}},t.prototype._initGlobal=function(){var u=this;this._bindKeys(),this.register((0,D.addDisposableDomListener)(this.element,"copy",(function(f){u.hasSelection()&&(0,E.copyHandler)(f,u._selectionService)})));var t=function(f){return(0,E.handlePasteEvent)(f,u.textarea,u.coreService)};this.register((0,D.addDisposableDomListener)(this.textarea,"paste",t)),this.register((0,D.addDisposableDomListener)(this.element,"paste",t)),O.isFirefox?this.register((0,D.addDisposableDomListener)(this.element,"mousedown",(function(f){2===f.button&&(0,E.rightClickHandler)(f,u.textarea,u.screenElement,u._selectionService,u.options.rightClickSelectsWord)}))):this.register((0,D.addDisposableDomListener)(this.element,"contextmenu",(function(f){(0,E.rightClickHandler)(f,u.textarea,u.screenElement,u._selectionService,u.options.rightClickSelectsWord)}))),O.isLinux&&this.register((0,D.addDisposableDomListener)(this.element,"auxclick",(function(f){1===f.button&&(0,E.moveTextAreaUnderMouseCursor)(f,u.textarea,u.screenElement)})))},t.prototype._bindKeys=function(){var u=this;this.register((0,D.addDisposableDomListener)(this.textarea,"keyup",(function(f){return u._keyUp(f)}),!0)),this.register((0,D.addDisposableDomListener)(this.textarea,"keydown",(function(f){return u._keyDown(f)}),!0)),this.register((0,D.addDisposableDomListener)(this.textarea,"keypress",(function(f){return u._keyPress(f)}),!0)),this.register((0,D.addDisposableDomListener)(this.textarea,"compositionstart",(function(){return u._compositionHelper.compositionstart()}))),this.register((0,D.addDisposableDomListener)(this.textarea,"compositionupdate",(function(f){return u._compositionHelper.compositionupdate(f)}))),this.register((0,D.addDisposableDomListener)(this.textarea,"compositionend",(function(){return u._compositionHelper.compositionend()}))),this.register((0,D.addDisposableDomListener)(this.textarea,"input",(function(f){return u._inputEvent(f)}),!0)),this.register(this.onRender((function(){return u._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(f){return u._queueLinkification(f.start,f.end)})))},t.prototype.open=function(u){var f=this;if(!u)throw Error("Terminal requires a parent element.");u.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=u.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),u.appendChild(this.element);var d=re.createDocumentFragment();this._viewportElement=re.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),d.appendChild(this._viewportElement),this._viewportScrollArea=re.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=re.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=re.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),d.appendChild(this.screenElement),this.textarea=re.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",T.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,D.addDisposableDomListener)(this.textarea,"focus",(function(u){return f._onTextAreaFocus(u)}))),this.register((0,D.addDisposableDomListener)(this.textarea,"blur",(function(){return f._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var _=this._instantiationService.createInstance(G.CoreBrowserService,this.textarea);this._instantiationService.setService(N.ICoreBrowserService,_),this._charSizeService=this._instantiationService.createInstance(z.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(N.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new W.ColorManager(re,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(u){return f._colorManager.onOptionsChange(u)}))),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(Z.CharacterJoinerService),this._instantiationService.setService(N.ICharacterJoinerService,this._characterJoinerService);var v=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(U.RenderService,v,this.rows,this.screenElement)),this._instantiationService.setService(N.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((function(u){return f._onRender.fire(u)}))),this.onResize((function(u){return f._renderService.resize(u.cols,u.rows)})),this._compositionView=re.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(S.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(d),this._soundService=this._instantiationService.createInstance(B.SoundService),this._instantiationService.setService(N.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(K.MouseService),this._instantiationService.setService(N.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(L.Viewport,(function(u){return f.scrollLines(u,!0,1)}),this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar((function(){return f.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){f._renderService.onCursorMove(),f._syncTextArea()}))),this.register(this.onResize((function(){return f._renderService.onResize(f.cols,f.rows)}))),this.register(this.onBlur((function(){return f._renderService.onBlur()}))),this.register(this.onFocus((function(){return f._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return f.viewport.syncScrollArea()}))),this._selectionService=this.register(this._instantiationService.createInstance(M.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(N.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((function(u){return f.scrollLines(u.amount,u.suppressScrollEvent)}))),this.register(this._selectionService.onSelectionChange((function(){return f._onSelectionChange.fire()}))),this.register(this._selectionService.onRequestRedraw((function(u){return f._renderService.onSelectionChanged(u.start,u.end,u.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(u){f.textarea.value=u,f.textarea.focus(),f.textarea.select()}))),this.register(this._onScroll.event((function(u){f.viewport.syncScrollArea(),f._selectionService.refresh()}))),this.register((0,D.addDisposableDomListener)(this._viewportElement,"scroll",(function(){return f._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(P.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return f._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance($.BufferDecorationRenderer,this.screenElement)),this.register((0,D.addDisposableDomListener)(this.element,"mousedown",(function(u){return f._selectionService.onMouseDown(u)}))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new I.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(Q.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange((function(){!f._overviewRulerRenderer&&f.options.overviewRulerWidth&&f._viewportElement&&f.screenElement&&(f._overviewRulerRenderer=f._instantiationService.createInstance(Q.OverviewRulerRenderer,f._viewportElement,f.screenElement))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(R.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(H.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(u){var f,d,_;this._theme=u,null===(f=this._colorManager)||void 0===f||f.setTheme(u),null===(d=this._renderService)||void 0===d||d.setColors(this._colorManager.colors),null===(_=this.viewport)||void 0===_||_.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var u=this,f=this,d=this.element;function i(u){var d,_,v=f._mouseService.getRawByteCoords(u,f.screenElement,f.cols,f.rows);if(!v)return!1;switch(u.overrideType||u.type){case"mousemove":_=32,void 0===u.buttons?(d=3,void 0!==u.button&&(d=u.button<3?u.button:3)):d=1&u.buttons?0:4&u.buttons?1:2&u.buttons?2:3;break;case"mouseup":_=0,d=u.button<3?u.button:3;break;case"mousedown":_=1,d=u.button<3?u.button:3;break;case"wheel":if(0===f.viewport.getLinesScrolled(u))return!1;_=u.deltaY<0?0:1,d=4;break;default:return!1}return!(void 0===_||void 0===d||d>4)&&f.coreMouseService.triggerMouseEvent({col:v.x-33,row:v.y-33,button:d,action:_,ctrl:u.ctrlKey,alt:u.altKey,shift:u.shiftKey})}var _={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o=function(f){return i(f),f.buttons||(u._document.removeEventListener("mouseup",_.mouseup),_.mousedrag&&u._document.removeEventListener("mousemove",_.mousedrag)),u.cancel(f)},s=function(f){return i(f),u.cancel(f,!0)},a=function(u){u.buttons&&i(u)},c=function(u){u.buttons||i(u)};this.register(this.coreMouseService.onProtocolChange((function(f){f?("debug"===u.optionsService.rawOptions.logLevel&&u._logService.debug("Binding to mouse events:",u.coreMouseService.explainEvents(f)),u.element.classList.add("enable-mouse-events"),u._selectionService.disable()):(u._logService.debug("Unbinding from mouse events."),u.element.classList.remove("enable-mouse-events"),u._selectionService.enable()),8&f?_.mousemove||(d.addEventListener("mousemove",c),_.mousemove=c):(d.removeEventListener("mousemove",_.mousemove),_.mousemove=null),16&f?_.wheel||(d.addEventListener("wheel",s,{passive:!1}),_.wheel=s):(d.removeEventListener("wheel",_.wheel),_.wheel=null),2&f?_.mouseup||(_.mouseup=o):(u._document.removeEventListener("mouseup",_.mouseup),_.mouseup=null),4&f?_.mousedrag||(_.mousedrag=a):(u._document.removeEventListener("mousemove",_.mousedrag),_.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,D.addDisposableDomListener)(d,"mousedown",(function(f){if(f.preventDefault(),u.focus(),u.coreMouseService.areMouseEventsActive&&!u._selectionService.shouldForceSelection(f))return i(f),_.mouseup&&u._document.addEventListener("mouseup",_.mouseup),_.mousedrag&&u._document.addEventListener("mousemove",_.mousedrag),u.cancel(f)}))),this.register((0,D.addDisposableDomListener)(d,"wheel",(function(f){if(!_.wheel){if(!u.buffer.hasScrollback){var d=u.viewport.getLinesScrolled(f);if(0===d)return;for(var v=k.C0.ESC+(u.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(f.deltaY<0?"A":"B"),y="",b=0;b<Math.abs(d);b++)y+=v;return u.coreService.triggerDataEvent(y,!0),u.cancel(f,!0)}return u.viewport.onWheel(f)?u.cancel(f):void 0}}),{passive:!1})),this.register((0,D.addDisposableDomListener)(d,"touchstart",(function(f){if(!u.coreMouseService.areMouseEventsActive)return u.viewport.onTouchStart(f),u.cancel(f)}),{passive:!0})),this.register((0,D.addDisposableDomListener)(d,"touchmove",(function(f){if(!u.coreMouseService.areMouseEventsActive)return u.viewport.onTouchMove(f)?void 0:u.cancel(f)}),{passive:!1}))},t.prototype.refresh=function(u,f){var d;null===(d=this._renderService)||void 0===d||d.refreshRows(u,f)},t.prototype._queueLinkification=function(u,f){var d;null===(d=this.linkifier)||void 0===d||d.linkifyRows(u,f)},t.prototype.updateCursorStyle=function(u){var f;(null===(f=this._selectionService)||void 0===f?void 0:f.shouldColumnSelect(u))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scrollLines=function(f,d,_){void 0===_&&(_=0),u.prototype.scrollLines.call(this,f,d,_),this.refresh(0,this.rows-1)},t.prototype.paste=function(u){(0,E.paste)(u,this.textarea,this.coreService)},t.prototype.attachCustomKeyEventHandler=function(u){this._customKeyEventHandler=u},t.prototype.registerLinkMatcher=function(u,f,d){var _=this.linkifier.registerLinkMatcher(u,f,d);return this.refresh(0,this.rows-1),_},t.prototype.deregisterLinkMatcher=function(u){this.linkifier.deregisterLinkMatcher(u)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(u){return this.linkifier2.registerLinkProvider(u)},t.prototype.registerCharacterJoiner=function(u){if(!this._characterJoinerService)throw Error("Terminal must be opened first");var f=this._characterJoinerService.register(u);return this.refresh(0,this.rows-1),f},t.prototype.deregisterCharacterJoiner=function(u){if(!this._characterJoinerService)throw Error("Terminal must be opened first");this._characterJoinerService.deregister(u)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),t.prototype.addMarker=function(u){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+u)},t.prototype.registerDecoration=function(u){return this._decorationService.registerDecoration(u)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(u,f,d){this._selectionService.setSelection(u,f,d)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var u;null===(u=this._selectionService)||void 0===u||u.clearSelection()},t.prototype.selectAll=function(){var u;null===(u=this._selectionService)||void 0===u||u.selectAll()},t.prototype.selectLines=function(u,f){var d;null===(d=this._selectionService)||void 0===d||d.selectLines(u,f)},t.prototype._keyDown=function(u){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(u))return!1;var f=this.browser.isMac&&this.options.macOptionIsMeta&&u.altKey;if(!f&&!this._compositionHelper.keydown(u))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;f||"Dead"!==u.key&&"AltGraph"!==u.key||(this._unprocessedDeadKey=!0);var d=(0,F.evaluateKeyboardEvent)(u,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(u),3===d.type||2===d.type){var _=this.rows-1;return this.scrollLines(2===d.type?-_:_),this.cancel(u,!0)}return 1===d.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,u)||(d.cancel&&this.cancel(u,!0),!d.key||!!(u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&1===u.key.length&&u.key.charCodeAt(0)>=65&&u.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(d.key!==k.C0.ETX&&d.key!==k.C0.CR||(this.textarea.value=""),this._onKey.fire({key:d.key,domEvent:u}),this._showCursor(),this.coreService.triggerDataEvent(d.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(u,!0))))},t.prototype._isThirdLevelShift=function(u,f){var d=u.isMac&&!this.options.macOptionIsMeta&&f.altKey&&!f.ctrlKey&&!f.metaKey||u.isWindows&&f.altKey&&f.ctrlKey&&!f.metaKey||u.isWindows&&f.getModifierState("AltGraph");return"keypress"===f.type?d:d&&(!f.keyCode||f.keyCode>47)},t.prototype._keyUp=function(u){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(u)||(function(u){return 16===u.keyCode||17===u.keyCode||18===u.keyCode}(u)||this.focus(),this.updateCursorStyle(u),this._keyPressHandled=!1)},t.prototype._keyPress=function(u){var f;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(u))return!1;if(this.cancel(u),u.charCode)f=u.charCode;else if(null===u.which||void 0===u.which)f=u.keyCode;else{if(0===u.which||0===u.charCode)return!1;f=u.which}return!(!f||(u.altKey||u.ctrlKey||u.metaKey)&&!this._isThirdLevelShift(this.browser,u)||(f=String.fromCharCode(f),this._onKey.fire({key:f,domEvent:u}),this._showCursor(),this.coreService.triggerDataEvent(f,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},t.prototype._inputEvent=function(u){if(u.data&&"insertText"===u.inputType&&(!u.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var f=u.data;return this.coreService.triggerDataEvent(f,!0),this.cancel(u),!0}return!1},t.prototype.bell=function(){var u;this._soundBell()&&(null===(u=this._soundService)||void 0===u||u.playBellSound()),this._onBell.fire()},t.prototype.resize=function(f,d){f!==this.cols||d!==this.rows?u.prototype.resize.call(this,f,d):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},t.prototype._afterResize=function(u,f){var d,_;null===(d=this._charSizeService)||void 0===d||d.measure(),null===(_=this.viewport)||void 0===_||_.syncScrollArea(!0)},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var u=1;u<this.rows;u++)this.buffer.lines.push(this.buffer.getBlankLine(q.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},t.prototype.reset=function(){var f,d;this.options.rows=this.rows,this.options.cols=this.cols;var _=this._customKeyEventHandler;this._setup(),u.prototype.reset.call(this),null===(f=this._selectionService)||void 0===f||f.reset(),this._decorationService.reset(),this._customKeyEventHandler=_,this.refresh(0,this.rows-1),null===(d=this.viewport)||void 0===d||d.syncScrollArea()},t.prototype.clearTextureAtlas=function(){var u;null===(u=this._renderService)||void 0===u||u.clearTextureAtlas()},t.prototype._reportFocus=function(){var u;(null===(u=this.element)||void 0===u?void 0:u.classList.contains("focus"))?this.coreService.triggerDataEvent(k.C0.ESC+"[I"):this.coreService.triggerDataEvent(k.C0.ESC+"[O")},t.prototype._reportWindowsOptions=function(u){if(this._renderService)switch(u){case x.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var f=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),d=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(k.C0.ESC+"[4;"+d+";"+f+"t");break;case x.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var _=this._renderService.dimensions.scaledCellWidth.toFixed(0),v=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(k.C0.ESC+"[6;"+v+";"+_+"t")}},t.prototype.cancel=function(u,f){if(this.options.cancelEvents||f)return u.preventDefault(),u.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t}(X.CoreTerminal);f.Terminal=ie},9924:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.TimeBasedDebouncer=void 0;var d=function(){function e(u,f){void 0===f&&(f=1e3),this._renderCallback=u,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return e.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},e.prototype.refresh=function(u,f,d){var _=this;this._rowCount=d,u=void 0!==u?u:0,f=void 0!==f?f:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,u):u,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,f):f;var v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){var y=v-this._lastRefreshMs,b=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((function(){_._lastRefreshMs=Date.now(),_._innerRefresh(),_._additionalRefreshRequested=!1,_._refreshTimeoutID=void 0}),b)}},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var u=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,f)}},e}();f.TimeBasedDebouncer=d},1680:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.Viewport=void 0;var C=d(844),S=d(3656),L=d(4725),E=d(2585),k=function(u){function t(f,d,_,v,y,b,C,L){var E=u.call(this)||this;return E._scrollLines=f,E._viewportElement=d,E._scrollArea=_,E._element=v,E._bufferService=y,E._optionsService=b,E._charSizeService=C,E._renderService=L,E.scrollBarWidth=0,E._currentRowHeight=0,E._currentScaledCellHeight=0,E._lastRecordedBufferLength=0,E._lastRecordedViewportHeight=0,E._lastRecordedBufferHeight=0,E._lastTouchY=0,E._lastScrollTop=0,E._wheelPartialScroll=0,E._refreshAnimationFrame=null,E._ignoreNextScrollEvent=!1,E.scrollBarWidth=E._viewportElement.offsetWidth-E._scrollArea.offsetWidth||15,E.register((0,S.addDisposableDomListener)(E._viewportElement,"scroll",E._onScroll.bind(E))),E._activeBuffer=E._bufferService.buffer,E.register(E._bufferService.buffers.onBufferActivate((function(u){return E._activeBuffer=u.activeBuffer}))),E._renderDimensions=E._renderService.dimensions,E.register(E._renderService.onDimensionsChange((function(u){return E._renderDimensions=u}))),setTimeout((function(){return E.syncScrollArea()}),0),E}return v(t,u),t.prototype.onThemeChange=function(u){this._viewportElement.style.backgroundColor=u.background.css},t.prototype._refresh=function(u){var f=this;if(u)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return f._innerRefresh()})))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var u=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==u&&(this._lastRecordedBufferHeight=u,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var f=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==f&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=f),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(u){if(void 0===u&&(u=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(u)},t.prototype._onScroll=function(u){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(f)}},t.prototype._bubbleScroll=function(u,f){var d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&0!==this._viewportElement.scrollTop||f>0&&d<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)},t.prototype.onWheel=function(u){var f=this._getPixelsScrolled(u);return 0!==f&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(u,f))},t.prototype._getPixelsScrolled=function(u){if(0===u.deltaY||u.shiftKey)return 0;var f=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f},t.prototype.getLinesScrolled=function(u){if(0===u.deltaY||u.shiftKey)return 0;var f=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f},t.prototype._applyScrollModifier=function(u,f){var d=this._optionsService.rawOptions.fastScrollModifier;return"alt"===d&&f.altKey||"ctrl"===d&&f.ctrlKey||"shift"===d&&f.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(u){this._lastTouchY=u.touches[0].pageY},t.prototype.onTouchMove=function(u){var f=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,0!==f&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(u,f))},y([b(4,E.IBufferService),b(5,E.IOptionsService),b(6,L.ICharSizeService),b(7,L.IRenderService)],t)}(C.Disposable);f.Viewport=k},3107:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},C=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.BufferDecorationRenderer=void 0;var S=d(3656),L=d(4725),E=d(844),k=d(2585),x=function(u){function t(f,d,_,v){var y=u.call(this)||this;return y._screenElement=f,y._bufferService=d,y._decorationService=_,y._renderService=v,y._decorationElements=new Map,y._altBufferIsActive=!1,y._dimensionsChanged=!1,y._container=document.createElement("div"),y._container.classList.add("xterm-decoration-container"),y._screenElement.appendChild(y._container),y.register(y._renderService.onRenderedViewportChange((function(){return y._queueRefresh()}))),y.register(y._renderService.onDimensionsChange((function(){y._dimensionsChanged=!0,y._queueRefresh()}))),y.register((0,S.addDisposableDomListener)(window,"resize",(function(){return y._queueRefresh()}))),y.register(y._bufferService.buffers.onBufferActivate((function(){y._altBufferIsActive=y._bufferService.buffer===y._bufferService.buffers.alt}))),y.register(y._decorationService.onDecorationRegistered((function(){return y._queueRefresh()}))),y.register(y._decorationService.onDecorationRemoved((function(u){return y._removeDecoration(u)}))),y}return v(t,u),t.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),u.prototype.dispose.call(this)},t.prototype._queueRefresh=function(){var u=this;void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback((function(){u.refreshDecorations(),u._animationFrame=void 0})))},t.prototype.refreshDecorations=function(){var u,f;try{for(var d=C(this._decorationService.decorations),_=d.next();!_.done;_=d.next()){var v=_.value;this._renderDecoration(v)}}catch(f){u={error:f}}finally{try{_&&!_.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}this._dimensionsChanged=!1},t.prototype._renderDecoration=function(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)},t.prototype._createElement=function(u){var f,d=document.createElement("div");d.classList.add("xterm-decoration"),d.style.width=Math.round((u.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",d.style.height=(u.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",d.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",d.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var _=null!==(f=u.options.x)&&void 0!==f?f:0;return _&&_>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(u,d),d},t.prototype._refreshStyle=function(u){var f=this,d=u.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{var _=this._decorationElements.get(u);_||(u.onDispose((function(){return f._removeDecoration(u)})),_=this._createElement(u),u.element=_,this._decorationElements.set(u,_),this._container.appendChild(_)),_.style.top=d*this._renderService.dimensions.actualCellHeight+"px",_.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(_)}},t.prototype._refreshXPosition=function(u,f){var d;if(void 0===f&&(f=u.element),f){var _=null!==(d=u.options.x)&&void 0!==d?d:0;"right"===(u.options.anchor||"left")?f.style.right=_?_*this._renderService.dimensions.actualCellWidth+"px":"":f.style.left=_?_*this._renderService.dimensions.actualCellWidth+"px":""}},t.prototype._removeDecoration=function(u){var f;null===(f=this._decorationElements.get(u))||void 0===f||f.remove(),this._decorationElements.delete(u)},y([b(1,k.IBufferService),b(2,k.IDecorationService),b(3,L.IRenderService)],t)}(E.Disposable);f.BufferDecorationRenderer=x},5871:function(u,f){var d=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.ColorZoneStore=void 0;var _=function(){function e(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(e.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},e.prototype.addDecoration=function(u){var f,_;if(u.options.overviewRulerOptions){try{for(var v=d(this._zones),y=v.next();!y.done;y=v.next()){var b=y.value;if(b.color===u.options.overviewRulerOptions.color&&b.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(b,u.marker.line))return;if(this._lineAdjacentToZone(b,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(b,u.marker.line)}}}catch(u){f={error:u}}finally{try{y&&!y.done&&(_=v.return)&&_.call(v)}finally{if(f)throw f.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},e.prototype.setPadding=function(u){this._linePadding=u},e.prototype._lineIntersectsZone=function(u,f){return f>=u.startBufferLine&&f<=u.endBufferLine},e.prototype._lineAdjacentToZone=function(u,f,d){return f>=u.startBufferLine-this._linePadding[d||"full"]&&f<=u.endBufferLine+this._linePadding[d||"full"]},e.prototype._addLineToZone=function(u,f){u.startBufferLine=Math.min(u.startBufferLine,f),u.endBufferLine=Math.max(u.endBufferLine,f)},e}();f.ColorZoneStore=_},5744:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},C=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.OverviewRulerRenderer=void 0;var S=d(5871),L=d(3656),E=d(4725),k=d(844),x=d(2585),R={full:0,left:0,center:0,right:0},A={full:0,left:0,center:0,right:0},M={full:0,left:0,center:0,right:0},O=function(u){function t(f,d,_,v,y,b){var C,L=u.call(this)||this;L._viewportElement=f,L._screenElement=d,L._bufferService=_,L._decorationService=v,L._renderService=y,L._optionsService=b,L._colorZoneStore=new S.ColorZoneStore,L._shouldUpdateDimensions=!0,L._shouldUpdateAnchor=!0,L._lastKnownBufferLength=0,L._canvas=document.createElement("canvas"),L._canvas.classList.add("xterm-decoration-overview-ruler"),L._refreshCanvasDimensions(),null===(C=L._viewportElement.parentElement)||void 0===C||C.insertBefore(L._canvas,L._viewportElement);var E=L._canvas.getContext("2d");if(!E)throw Error("Ctx cannot be null");return L._ctx=E,L._registerDecorationListeners(),L._registerBufferChangeListeners(),L._registerDimensionChangeListeners(),L}return v(t,u),Object.defineProperty(t.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),t.prototype._registerDecorationListeners=function(){var u=this;this.register(this._decorationService.onDecorationRegistered((function(){return u._queueRefresh(void 0,!0)}))),this.register(this._decorationService.onDecorationRemoved((function(){return u._queueRefresh(void 0,!0)})))},t.prototype._registerBufferChangeListeners=function(){var u=this;this.register(this._renderService.onRenderedViewportChange((function(){return u._queueRefresh()}))),this.register(this._bufferService.buffers.onBufferActivate((function(){u._canvas.style.display=u._bufferService.buffer===u._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((function(){u._lastKnownBufferLength!==u._bufferService.buffers.normal.lines.length&&(u._refreshDrawHeightConstants(),u._refreshColorZonePadding())})))},t.prototype._registerDimensionChangeListeners=function(){var u=this;this.register(this._renderService.onRender((function(){u._containerHeight&&u._containerHeight===u._screenElement.clientHeight||(u._queueRefresh(!0),u._containerHeight=u._screenElement.clientHeight)}))),this.register(this._optionsService.onOptionChange((function(f){"overviewRulerWidth"===f&&u._queueRefresh(!0)}))),this.register((0,L.addDisposableDomListener)(window,"resize",(function(){u._queueRefresh(!0)}))),this._queueRefresh(!0)},t.prototype.dispose=function(){var f;null===(f=this._canvas)||void 0===f||f.remove(),u.prototype.dispose.call(this)},t.prototype._refreshDrawConstants=function(){var u=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);A.full=this._canvas.width,A.left=u,A.center=f,A.right=u,this._refreshDrawHeightConstants(),M.full=0,M.left=0,M.center=A.left,M.right=A.left+A.center},t.prototype._refreshDrawHeightConstants=function(){R.full=Math.round(2*window.devicePixelRatio);var u=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(u,12),6)*window.devicePixelRatio);R.left=f,R.center=f,R.right=f},t.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*R.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*R.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*R.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*R.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},t.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},t.prototype._refreshDecorations=function(){var u,f,d,_,v,y;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var b=C(this._decorationService.decorations),S=b.next();!S.done;S=b.next()){var L=S.value;this._colorZoneStore.addDecoration(L)}}catch(f){u={error:f}}finally{try{S&&!S.done&&(f=b.return)&&f.call(b)}finally{if(u)throw u.error}}this._ctx.lineWidth=1;var E=this._colorZoneStore.zones;try{for(var k=C(E),x=k.next();!x.done;x=k.next())"full"!==(M=x.value).position&&this._renderColorZone(M)}catch(u){d={error:u}}finally{try{x&&!x.done&&(_=k.return)&&_.call(k)}finally{if(d)throw d.error}}try{for(var R=C(E),A=R.next();!A.done;A=R.next()){var M;"full"===(M=A.value).position&&this._renderColorZone(M)}}catch(u){v={error:u}}finally{try{A&&!A.done&&(y=R.return)&&y.call(R)}finally{if(v)throw v.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},t.prototype._renderColorZone=function(u){this._ctx.fillStyle=u.color,this._ctx.fillRect(M[u.position||"full"],Math.round((this._canvas.height-1)*(u.startBufferLine/this._bufferService.buffers.active.lines.length)-R[u.position||"full"]/2),A[u.position||"full"],Math.round((this._canvas.height-1)*((u.endBufferLine-u.startBufferLine)/this._bufferService.buffers.active.lines.length)+R[u.position||"full"]))},t.prototype._queueRefresh=function(u,f){var d=this;this._shouldUpdateDimensions=u||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=window.requestAnimationFrame((function(){d._refreshDecorations(),d._animationFrame=void 0})))},y([b(2,x.IBufferService),b(3,x.IDecorationService),b(4,E.IRenderService),b(5,x.IOptionsService)],t)}(k.Disposable);f.OverviewRulerRenderer=O},2950:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.CompositionHelper=void 0;var y=d(4725),b=d(2585),C=function(){function e(u,f,d,_,v,y){this._textarea=u,this._compositionView=f,this._bufferService=d,this._optionsService=_,this._coreService=v,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(e.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(u){var f=this;this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout((function(){f._compositionPosition.end=f._textarea.value.length}),0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(u){if(this._isComposing||this._isSendingComposition){if(229===u.keyCode)return!1;if(16===u.keyCode||17===u.keyCode||18===u.keyCode)return!1;this._finalizeComposition(!1)}return 229!==u.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(u){var f=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){var d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){var u;f._isSendingComposition&&(f._isSendingComposition=!1,d.start+=f._dataAlreadySent.length,(u=f._isComposing?f._textarea.value.substring(d.start,d.end):f._textarea.value.substring(d.start)).length>0&&f._coreService.triggerDataEvent(u,!0))}),0)}else{this._isSendingComposition=!1;var _=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(_,!0)}},e.prototype._handleAnyTextareaChanges=function(){var u=this,f=this._textarea.value;setTimeout((function(){if(!u._isComposing){var d=u._textarea.value.replace(f,"");d.length>0&&(u._dataAlreadySent=d,u._coreService.triggerDataEvent(d,!0))}}),0)},e.prototype.updateCompositionElements=function(u){var f=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.actualCellHeight,v=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,y=d*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=y+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var b=this._compositionView.getBoundingClientRect();this._textarea.style.left=y+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}u||setTimeout((function(){return f.updateCompositionElements(!0)}),0)}},_([v(2,b.IBufferService),v(3,b.IOptionsService),v(4,b.ICoreService),v(5,y.IRenderService)],e)}();f.CompositionHelper=C},9806:(u,f)=>{function r(u,f,d){var _=d.getBoundingClientRect(),v=u.getComputedStyle(d),y=parseInt(v.getPropertyValue("padding-left")),b=parseInt(v.getPropertyValue("padding-top"));return[f.clientX-_.left-y,f.clientY-_.top-b]}Object.defineProperty(f,"__esModule",{value:!0}),f.getRawByteCoords=f.getCoords=f.getCoordsRelativeToElement=void 0,f.getCoordsRelativeToElement=r,f.getCoords=function(u,f,d,_,v,y,b,C,S){if(y){var L=r(u,f,d);if(L)return L[0]=Math.ceil((L[0]+(S?b/2:0))/b),L[1]=Math.ceil(L[1]/C),L[0]=Math.min(Math.max(L[0],1),_+(S?1:0)),L[1]=Math.min(Math.max(L[1],1),v),L}},f.getRawByteCoords=function(u){if(u)return{x:u[0]+32,y:u[1]+32}}},9504:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.moveToCellSequence=void 0;var _=d(2584);function n(u,f,d,_){var v=u-o(d,u),y=f-o(d,f),b=Math.abs(v-y)-function(u,f,d){for(var _=0,v=u-o(d,u),y=f-o(d,f),b=0;b<Math.abs(v-y);b++){var C="A"===s(u,f)?-1:1,S=d.buffer.lines.get(v+C*b);(null==S?void 0:S.isWrapped)&&_++}return _}(u,f,d);return l(b,c(s(u,f),_))}function o(u,f){for(var d=0,_=u.buffer.lines.get(f),v=null==_?void 0:_.isWrapped;v&&f>=0&&f<u.rows;)d++,v=null==(_=u.buffer.lines.get(--f))?void 0:_.isWrapped;return d}function s(u,f){return u>f?"A":"B"}function a(u,f,d,_,v,y){for(var b=u,C=f,S="";b!==d||C!==_;)b+=v?1:-1,v&&b>y.cols-1?(S+=y.buffer.translateBufferLineToString(C,!1,u,b),b=0,u=0,C++):!v&&b<0&&(S+=y.buffer.translateBufferLineToString(C,!1,0,u+1),u=b=y.cols-1,C--);return S+y.buffer.translateBufferLineToString(C,!1,u,b)}function c(u,f){var d=f?"O":"[";return _.C0.ESC+d+u}function l(u,f){u=Math.floor(u);for(var d="",_=0;_<u;_++)d+=f;return d}f.moveToCellSequence=function(u,f,d,_){var v,y=d.buffer.x,b=d.buffer.y;if(!d.buffer.hasScrollback)return function(u,f,d,_,v,y){return 0===n(f,_,v,y).length?"":l(a(u,f,u,f-o(v,f),!1,v).length,c("D",y))}(y,b,0,f,d,_)+n(b,f,d,_)+function(u,f,d,_,v,y){var b;b=n(f,_,v,y).length>0?_-o(v,_):f;var C=_,S=function(u,f,d,_,v,y){var b;return b=n(d,_,v,y).length>0?_-o(v,_):f,u<d&&b<=_||u>=d&&b<_?"C":"D"}(u,f,d,_,v,y);return l(a(u,b,d,C,"C"===S,v).length,c(S,y))}(y,b,u,f,d,_);if(b===f)return v=y>u?"D":"C",l(Math.abs(y-u),c(v,_));v=b>f?"D":"C";var C=Math.abs(b-f);return l(function(u,f){return f.cols-u}(b>f?u:y,d)+(C-1)*d.cols+1+((b>f?y:u)-1),c(v,_))}},4389:function(u,f,d){var _=this&&this.__assign||function(){return _=Object.assign||function(u){for(var f,d=1,_=arguments.length;d<_;d++)for(var v in f=arguments[d])Object.prototype.hasOwnProperty.call(f,v)&&(u[v]=f[v]);return u},_.apply(this,arguments)},v=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.Terminal=void 0;var y=d(3236),b=d(9042),C=d(7975),S=d(7090),L=d(5741),E=d(8285),k=["cols","rows"],x=function(){function e(u){var f=this;this._core=new y.Terminal(u),this._addonManager=new L.AddonManager,this._publicOptions=_({},this._core.options);var r=function(u){return f._core.options[u]},n=function(u,d){f._checkReadonlyOptions(u),f._core.options[u]=d};for(var d in this._core.options){var v={get:r.bind(this,d),set:n.bind(this,d)};Object.defineProperty(this._publicOptions,d,v)}}return e.prototype._checkReadonlyOptions=function(u){if(k.includes(u))throw Error('Option "'+u+'" can only be set in the constructor')},e.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new C.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new S.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new E.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modes",{get:function(){var u=this._core.coreService.decPrivateModes,f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._publicOptions},set:function(u){for(var f in u)this._publicOptions[f]=u[f]},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(u,f){this._verifyIntegers(u,f),this._core.resize(u,f)},e.prototype.open=function(u){this._core.open(u)},e.prototype.attachCustomKeyEventHandler=function(u){this._core.attachCustomKeyEventHandler(u)},e.prototype.registerLinkMatcher=function(u,f,d){return this._checkProposedApi(),this._core.registerLinkMatcher(u,f,d)},e.prototype.deregisterLinkMatcher=function(u){this._checkProposedApi(),this._core.deregisterLinkMatcher(u)},e.prototype.registerLinkProvider=function(u){return this._checkProposedApi(),this._core.registerLinkProvider(u)},e.prototype.registerCharacterJoiner=function(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)},e.prototype.deregisterCharacterJoiner=function(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)},e.prototype.registerMarker=function(u){return void 0===u&&(u=0),this._checkProposedApi(),this._verifyIntegers(u),this._core.addMarker(u)},e.prototype.registerDecoration=function(u){var f,d,_;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(f=u.x)&&void 0!==f?f:0,null!==(d=u.width)&&void 0!==d?d:0,null!==(_=u.height)&&void 0!==_?_:0),this._core.registerDecoration(u)},e.prototype.addMarker=function(u){return this.registerMarker(u)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(u,f,d){this._verifyIntegers(u,f,d),this._core.select(u,f,d)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(u,f){this._verifyIntegers(u,f),this._core.selectLines(u,f)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(u){this._verifyIntegers(u),this._core.scrollLines(u)},e.prototype.scrollPages=function(u){this._verifyIntegers(u),this._core.scrollPages(u)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(u){this._verifyIntegers(u),this._core.scrollToLine(u)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(u,f){this._core.write(u,f)},e.prototype.writeUtf8=function(u,f){this._core.write(u,f)},e.prototype.writeln=function(u,f){this._core.write(u),this._core.write("\r\n",f)},e.prototype.paste=function(u){this._core.paste(u)},e.prototype.getOption=function(u){return this._core.optionsService.getOption(u)},e.prototype.setOption=function(u,f){this._checkReadonlyOptions(u),this._core.optionsService.setOption(u,f)},e.prototype.refresh=function(u,f){this._verifyIntegers(u,f),this._core.refresh(u,f)},e.prototype.reset=function(){this._core.reset()},e.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},e.prototype.loadAddon=function(u){return this._addonManager.loadAddon(this,u)},Object.defineProperty(e,"strings",{get:function(){return b},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var u,f,d=[],_=0;_<arguments.length;_++)d[_]=arguments[_];try{for(var y=v(d),b=y.next();!b.done;b=y.next()){var C=b.value;if(C===1/0||isNaN(C)||C%1!=0)throw Error("This API only accepts integers")}}catch(f){u={error:f}}finally{try{b&&!b.done&&(f=y.return)&&f.call(y)}finally{if(u)throw u.error}}},e.prototype._verifyPositiveIntegers=function(){for(var u,f,d=[],_=0;_<arguments.length;_++)d[_]=arguments[_];try{for(var y=v(d),b=y.next();!b.done;b=y.next()){var C=b.value;if(C&&(C===1/0||isNaN(C)||C%1!=0||C<0))throw Error("This API only accepts positive integers")}}catch(f){u={error:f}}finally{try{b&&!b.done&&(f=y.return)&&f.call(y)}finally{if(u)throw u.error}}},e}();f.Terminal=x},1546:function(u,f,d){var _=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.BaseRenderLayer=void 0;var v=d(643),y=d(8803),b=d(1420),C=d(3734),S=d(1752),L=d(8055),E=d(9631),k=d(8978),x=function(){function e(u,f,d,_,v,y,b,C,S){this._container=u,this._alpha=_,this._colors=v,this._rendererId=y,this._bufferService=b,this._optionsService=C,this._decorationService=S,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+f+"-layer"),this._canvas.style.zIndex=d.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var u;(0,E.removeElementFromParent)(this._canvas),null===(u=this._charAtlas)||void 0===u||u.dispose()},e.prototype._initCanvas=function(){this._ctx=(0,S.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(u,f){},e.prototype.onSelectionChanged=function(u,f,d){void 0===d&&(d=!1),this._selectionStart=u,this._selectionEnd=f,this._columnSelectMode=d},e.prototype.setColors=function(u){this._refreshCharAtlas(u)},e.prototype._setTransparency=function(u){if(u!==this._alpha){var f=this._canvas;this._alpha=u,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,f),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(u){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,b.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,u,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(u){this._scaledCellWidth=u.scaledCellWidth,this._scaledCellHeight=u.scaledCellHeight,this._scaledCharWidth=u.scaledCharWidth,this._scaledCharHeight=u.scaledCharHeight,this._scaledCharLeft=u.scaledCharLeft,this._scaledCharTop=u.scaledCharTop,this._canvas.width=u.scaledCanvasWidth,this._canvas.height=u.scaledCanvasHeight,this._canvas.style.width=u.canvasWidth+"px",this._canvas.style.height=u.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype.clearTextureAtlas=function(){var u;null===(u=this._charAtlas)||void 0===u||u.clear()},e.prototype._fillCells=function(u,f,d,_){this._ctx.fillRect(u*this._scaledCellWidth,f*this._scaledCellHeight,d*this._scaledCellWidth,_*this._scaledCellHeight)},e.prototype._fillMiddleLineAtCells=function(u,f,d){void 0===d&&(d=1);var _=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(u*this._scaledCellWidth,(f+1)*this._scaledCellHeight-_-window.devicePixelRatio,d*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillBottomLineAtCells=function(u,f,d){void 0===d&&(d=1),this._ctx.fillRect(u*this._scaledCellWidth,(f+1)*this._scaledCellHeight-window.devicePixelRatio-1,d*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(u,f,d){this._ctx.fillRect(u*this._scaledCellWidth,f*this._scaledCellHeight,window.devicePixelRatio*d,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(u,f,d,_){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(u*this._scaledCellWidth+window.devicePixelRatio/2,f*this._scaledCellHeight+window.devicePixelRatio/2,d*this._scaledCellWidth-window.devicePixelRatio,_*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(u,f,d,_){this._alpha?this._ctx.clearRect(u*this._scaledCellWidth,f*this._scaledCellHeight,d*this._scaledCellWidth,_*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(u*this._scaledCellWidth,f*this._scaledCellHeight,d*this._scaledCellWidth,_*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(u,f,d){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=y.TEXT_BASELINE,this._clipRow(d);var _=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(_=(0,k.tryDrawCustomChar)(this._ctx,u.getChars(),f*this._scaledCellWidth,d*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),_||this._ctx.fillText(u.getChars(),f*this._scaledCellWidth+this._scaledCharLeft,d*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},e.prototype._drawChars=function(u,f,d){var b,C,S,L=this._getContrastColor(u,f,d);if(L||u.isFgRGB()||u.isBgRGB())this._drawUncachedChars(u,f,d,L);else{var E,k;u.isInverse()?(E=u.isBgDefault()?y.INVERTED_DEFAULT_COLOR:u.getBgColor(),k=u.isFgDefault()?y.INVERTED_DEFAULT_COLOR:u.getFgColor()):(k=u.isBgDefault()?v.DEFAULT_COLOR:u.getBgColor(),E=u.isFgDefault()?v.DEFAULT_COLOR:u.getFgColor()),E+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&u.isBold()&&E<8?8:0,this._currentGlyphIdentifier.chars=u.getChars()||v.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=u.getCode()||v.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=k,this._currentGlyphIdentifier.fg=E,this._currentGlyphIdentifier.bold=!!u.isBold(),this._currentGlyphIdentifier.dim=!!u.isDim(),this._currentGlyphIdentifier.italic=!!u.isItalic();var x=!1;try{for(var R=_(this._decorationService.getDecorationsAtCell(f,d)),A=R.next();!A.done;A=R.next()){var M=A.value;if(M.backgroundColorRGB||M.foregroundColorRGB){x=!0;break}}}catch(u){b={error:u}}finally{try{A&&!A.done&&(C=R.return)&&C.call(R)}finally{if(b)throw b.error}}!x&&(null===(S=this._charAtlas)||void 0===S?void 0:S.draw(this._ctx,this._currentGlyphIdentifier,f*this._scaledCellWidth+this._scaledCharLeft,d*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(u,f,d)}},e.prototype._drawUncachedChars=function(u,f,d,_){if(this._ctx.save(),this._ctx.font=this._getFont(!!u.isBold(),!!u.isItalic()),this._ctx.textBaseline=y.TEXT_BASELINE,u.isInverse())if(_)this._ctx.fillStyle=_.css;else if(u.isBgDefault())this._ctx.fillStyle=L.color.opaque(this._colors.background).css;else if(u.isBgRGB())this._ctx.fillStyle="rgb("+C.AttributeData.toColorRGB(u.getBgColor()).join(",")+")";else{var v=u.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&u.isBold()&&v<8&&(v+=8),this._ctx.fillStyle=this._colors.ansi[v].css}else if(_)this._ctx.fillStyle=_.css;else if(u.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(u.isFgRGB())this._ctx.fillStyle="rgb("+C.AttributeData.toColorRGB(u.getFgColor()).join(",")+")";else{var b=u.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&u.isBold()&&b<8&&(b+=8),this._ctx.fillStyle=this._colors.ansi[b].css}this._clipRow(d),u.isDim()&&(this._ctx.globalAlpha=y.DIM_OPACITY);var S=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(S=(0,k.tryDrawCustomChar)(this._ctx,u.getChars(),f*this._scaledCellWidth,d*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),S||this._ctx.fillText(u.getChars(),f*this._scaledCellWidth+this._scaledCharLeft,d*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},e.prototype._clipRow=function(u){this._ctx.beginPath(),this._ctx.rect(0,u*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(u,f){return(f?"italic":"")+" "+(u?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},e.prototype._getContrastColor=function(u,f,d){var v,y,b,C,E=!1;try{for(var k=_(this._decorationService.getDecorationsAtCell(f,d)),x=k.next();!x.done;x=k.next()){var R=x.value;"top"!==R.options.layer&&E||(R.backgroundColorRGB&&(b=R.backgroundColorRGB.rgba),R.foregroundColorRGB&&(C=R.foregroundColorRGB.rgba),E="top"===R.options.layer)}}catch(u){v={error:u}}finally{try{x&&!x.done&&(y=k.return)&&y.call(k)}finally{if(v)throw v.error}}if(E||this._colors.selectionForeground&&this._isCellInSelection(f,d)&&(C=this._colors.selectionForeground.rgba),b||C||1!==this._optionsService.rawOptions.minimumContrastRatio&&!(0,S.excludeFromContrastRatioDemands)(u.getCode())){if(!b&&!C){var A=this._colors.contrastCache.getColor(u.bg,u.fg);if(void 0!==A)return A||void 0}var M=u.getFgColor(),O=u.getFgColorMode(),D=u.getBgColor(),T=u.getBgColorMode(),B=!!u.isInverse(),P=!!u.isInverse();if(B){var I=M;M=D,D=I;var H=O;O=T,T=H}var F=this._resolveBackgroundRgba(void 0!==b?50331648:T,null!=b?b:D,B),j=this._resolveForegroundRgba(O,M,B,P),q=L.rgba.ensureContrastRatio(null!=b?b:F,null!=C?C:j,this._optionsService.rawOptions.minimumContrastRatio);if(!q){if(!C)return void this._colors.contrastCache.setColor(u.bg,u.fg,null);q=C}var W={css:L.channels.toCss(q>>24&255,q>>16&255,q>>8&255),rgba:q};return b||C||this._colors.contrastCache.setColor(u.bg,u.fg,W),W}},e.prototype._resolveBackgroundRgba=function(u,f,d){switch(u){case 16777216:case 33554432:return this._colors.ansi[f].rgba;case 50331648:return f<<8;default:return d?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(u,f,d,_){switch(u){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&_&&f<8&&(f+=8),this._colors.ansi[f].rgba;case 50331648:return f<<8;default:return d?this._colors.background.rgba:this._colors.foreground.rgba}},e.prototype._isCellInSelection=function(u,f){var d=this._selectionStart,_=this._selectionEnd;return!(!d||!_)&&(this._columnSelectMode?u>=d[0]&&f>=d[1]&&u<_[0]&&f<_[1]:f>d[1]&&f<_[1]||d[1]===_[1]&&f===d[1]&&u>=d[0]&&u<_[0]||d[1]<_[1]&&f===_[1]&&u<_[0]||d[1]<_[1]&&f===d[1]&&u>=d[0])},e}();f.BaseRenderLayer=x},2512:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.CursorRenderLayer=void 0;var C=d(1546),S=d(511),L=d(2585),E=d(4725),k=600,x=function(u){function t(f,d,_,v,y,b,C,L,E,k){var x=u.call(this,f,"cursor",d,!0,_,v,b,C,k)||this;return x._onRequestRedraw=y,x._coreService=L,x._coreBrowserService=E,x._cell=new S.CellData,x._state={x:0,y:0,isFocused:!1,style:"",width:0},x._cursorRenderers={bar:x._renderBarCursor.bind(x),block:x._renderBlockCursor.bind(x),underline:x._renderUnderlineCursor.bind(x)},x}return v(t,u),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),u.prototype.dispose.call(this)},t.prototype.resize=function(f){u.prototype.resize.call(this,f),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){var u;this._clearCursor(),null===(u=this._cursorBlinkStateManager)||void 0===u||u.restartBlinkAnimation(),this.onOptionsChanged()},t.prototype.onBlur=function(){var u;null===(u=this._cursorBlinkStateManager)||void 0===u||u.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){var u;null===(u=this._cursorBlinkStateManager)||void 0===u||u.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var u,f=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new R(this._coreBrowserService.isFocused,(function(){f._render(!0)}))):(null===(u=this._cursorBlinkStateManager)||void 0===u||u.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){var u;null===(u=this._cursorBlinkStateManager)||void 0===u||u.restartBlinkAnimation()},t.prototype.onGridChanged=function(u,f){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(u){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var f=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=f-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)this._clearCursor();else{var _=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(f).loadCell(_,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var v=this._optionsService.rawOptions.cursorStyle;return v&&"block"!==v?this._cursorRenderers[v](_,d,this._cell):this._renderBlurCursor(_,d,this._cell),this._ctx.restore(),this._state.x=_,this._state.y=d,this._state.isFocused=!1,this._state.style=v,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===_&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](_,d,this._cell),this._ctx.restore(),this._state.x=_,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(u,f,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(u,f,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(u,f,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(u,f,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,u,f),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(u,f,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(u,f),this._ctx.restore()},t.prototype._renderBlurCursor=function(u,f,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(u,f,d.getWidth(),1),this._ctx.restore()},y([b(5,L.IBufferService),b(6,L.IOptionsService),b(7,L.ICoreService),b(8,E.ICoreBrowserService),b(9,L.IDecorationService)],t)}(C.BaseRenderLayer);f.CursorRenderLayer=x;var R=function(){function e(u,f){this._renderCallback=f,this.isCursorVisible=!0,u&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var u=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){u._renderCallback(),u._animationFrame=void 0}))))},e.prototype._restartInterval=function(u){var f=this;void 0===u&&(u=k),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout((function(){if(f._animationTimeRestarted){var u=k-(Date.now()-f._animationTimeRestarted);if(f._animationTimeRestarted=void 0,u>0)return void f._restartInterval(u)}f.isCursorVisible=!1,f._animationFrame=window.requestAnimationFrame((function(){f._renderCallback(),f._animationFrame=void 0})),f._blinkInterval=window.setInterval((function(){if(f._animationTimeRestarted){var u=k-(Date.now()-f._animationTimeRestarted);return f._animationTimeRestarted=void 0,void f._restartInterval(u)}f.isCursorVisible=!f.isCursorVisible,f._animationFrame=window.requestAnimationFrame((function(){f._renderCallback(),f._animationFrame=void 0}))}),k)}),u)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(u,f,d){var _,v,y,b,C,S,L,E,k,x,R,A,M,O,D,T,B,P,I,H,F,j,q,W,U,N,z,K,V,G,X,Y,Z,J,$,Q,ee,te,re,ie,ne,oe,se,ae,ce,le,he,ue,fe,de,pe,_e,ve,ye,ge,me,be,Ce,Se,we,Le,Ee,ke,xe,Re,Ae,Me,Oe,De,Te,Be,Pe,Ie,He,Fe,je,qe,We,Ue,Ne,ze,Ke,Ve,Ge,Xe,Ye,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,dt,pt,_t,vt,yt,gt,mt,bt,Ct,St,wt,Lt,Et,xt,Rt,Mt,Ot,Dt,Tt,Bt,Pt,It,Ht,Ft,jt,qt=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b},Wt=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.tryDrawCustomChar=f.powerlineDefinitions=f.boxDrawingDefinitions=f.blockElementDefinitions=void 0;var Ut=d(1752);f.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:9,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Nt={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};f.boxDrawingDefinitions={"─":(_={},_[1]="M0,.5 L1,.5",_),"━":(v={},v[3]="M0,.5 L1,.5",v),"│":(y={},y[1]="M.5,0 L.5,1",y),"┃":(b={},b[3]="M.5,0 L.5,1",b),"┌":(C={},C[1]="M0.5,1 L.5,.5 L1,.5",C),"┏":(S={},S[3]="M0.5,1 L.5,.5 L1,.5",S),"┐":(L={},L[1]="M0,.5 L.5,.5 L.5,1",L),"┓":(E={},E[3]="M0,.5 L.5,.5 L.5,1",E),"└":(k={},k[1]="M.5,0 L.5,.5 L1,.5",k),"┗":(x={},x[3]="M.5,0 L.5,.5 L1,.5",x),"┘":(R={},R[1]="M.5,0 L.5,.5 L0,.5",R),"┛":(A={},A[3]="M.5,0 L.5,.5 L0,.5",A),"├":(M={},M[1]="M.5,0 L.5,1 M.5,.5 L1,.5",M),"┣":(O={},O[3]="M.5,0 L.5,1 M.5,.5 L1,.5",O),"┤":(D={},D[1]="M.5,0 L.5,1 M.5,.5 L0,.5",D),"┫":(T={},T[3]="M.5,0 L.5,1 M.5,.5 L0,.5",T),"┬":(B={},B[1]="M0,.5 L1,.5 M.5,.5 L.5,1",B),"┳":(P={},P[3]="M0,.5 L1,.5 M.5,.5 L.5,1",P),"┴":(I={},I[1]="M0,.5 L1,.5 M.5,.5 L.5,0",I),"┻":(H={},H[3]="M0,.5 L1,.5 M.5,.5 L.5,0",H),"┼":(F={},F[1]="M0,.5 L1,.5 M.5,0 L.5,1",F),"╋":(j={},j[3]="M0,.5 L1,.5 M.5,0 L.5,1",j),"╴":(q={},q[1]="M.5,.5 L0,.5",q),"╸":(W={},W[3]="M.5,.5 L0,.5",W),"╵":(U={},U[1]="M.5,.5 L.5,0",U),"╹":(N={},N[3]="M.5,.5 L.5,0",N),"╶":(z={},z[1]="M.5,.5 L1,.5",z),"╺":(K={},K[3]="M.5,.5 L1,.5",K),"╷":(V={},V[1]="M.5,.5 L.5,1",V),"╻":(G={},G[3]="M.5,.5 L.5,1",G),"═":(X={},X[1]=function(u,f){return"M0,"+(.5-f)+" L1,"+(.5-f)+" M0,"+(.5+f)+" L1,"+(.5+f)},X),"║":(Y={},Y[1]=function(u,f){return"M"+(.5-u)+",0 L"+(.5-u)+",1 M"+(.5+u)+",0 L"+(.5+u)+",1"},Y),"╒":(Z={},Z[1]=function(u,f){return"M.5,1 L.5,"+(.5-f)+" L1,"+(.5-f)+" M.5,"+(.5+f)+" L1,"+(.5+f)},Z),"╓":(J={},J[1]=function(u,f){return"M"+(.5-u)+",1 L"+(.5-u)+",.5 L1,.5 M"+(.5+u)+",.5 L"+(.5+u)+",1"},J),"╔":($={},$[1]=function(u,f){return"M1,"+(.5-f)+" L"+(.5-u)+","+(.5-f)+" L"+(.5-u)+",1 M1,"+(.5+f)+" L"+(.5+u)+","+(.5+f)+" L"+(.5+u)+",1"},$),"╕":(Q={},Q[1]=function(u,f){return"M0,"+(.5-f)+" L.5,"+(.5-f)+" L.5,1 M0,"+(.5+f)+" L.5,"+(.5+f)},Q),"╖":(ee={},ee[1]=function(u,f){return"M"+(.5+u)+",1 L"+(.5+u)+",.5 L0,.5 M"+(.5-u)+",.5 L"+(.5-u)+",1"},ee),"╗":(te={},te[1]=function(u,f){return"M0,"+(.5+f)+" L"+(.5-u)+","+(.5+f)+" L"+(.5-u)+",1 M0,"+(.5-f)+" L"+(.5+u)+","+(.5-f)+" L"+(.5+u)+",1"},te),"╘":(re={},re[1]=function(u,f){return"M.5,0 L.5,"+(.5+f)+" L1,"+(.5+f)+" M.5,"+(.5-f)+" L1,"+(.5-f)},re),"╙":(ie={},ie[1]=function(u,f){return"M1,.5 L"+(.5-u)+",.5 L"+(.5-u)+",0 M"+(.5+u)+",.5 L"+(.5+u)+",0"},ie),"╚":(ne={},ne[1]=function(u,f){return"M1,"+(.5-f)+" L"+(.5+u)+","+(.5-f)+" L"+(.5+u)+",0 M1,"+(.5+f)+" L"+(.5-u)+","+(.5+f)+" L"+(.5-u)+",0"},ne),"╛":(oe={},oe[1]=function(u,f){return"M0,"+(.5+f)+" L.5,"+(.5+f)+" L.5,0 M0,"+(.5-f)+" L.5,"+(.5-f)},oe),"╜":(se={},se[1]=function(u,f){return"M0,.5 L"+(.5+u)+",.5 L"+(.5+u)+",0 M"+(.5-u)+",.5 L"+(.5-u)+",0"},se),"╝":(ae={},ae[1]=function(u,f){return"M0,"+(.5-f)+" L"+(.5-u)+","+(.5-f)+" L"+(.5-u)+",0 M0,"+(.5+f)+" L"+(.5+u)+","+(.5+f)+" L"+(.5+u)+",0"},ae),"╞":(ce={},ce[1]=function(u,f){return"M.5,0 L.5,1 M.5,"+(.5-f)+" L1,"+(.5-f)+" M.5,"+(.5+f)+" L1,"+(.5+f)},ce),"╟":(le={},le[1]=function(u,f){return"M"+(.5-u)+",0 L"+(.5-u)+",1 M"+(.5+u)+",0 L"+(.5+u)+",1 M"+(.5+u)+",.5 L1,.5"},le),"╠":(he={},he[1]=function(u,f){return"M"+(.5-u)+",0 L"+(.5-u)+",1 M1,"+(.5+f)+" L"+(.5+u)+","+(.5+f)+" L"+(.5+u)+",1 M1,"+(.5-f)+" L"+(.5+u)+","+(.5-f)+" L"+(.5+u)+",0"},he),"╡":(ue={},ue[1]=function(u,f){return"M.5,0 L.5,1 M0,"+(.5-f)+" L.5,"+(.5-f)+" M0,"+(.5+f)+" L.5,"+(.5+f)},ue),"╢":(fe={},fe[1]=function(u,f){return"M0,.5 L"+(.5-u)+",.5 M"+(.5-u)+",0 L"+(.5-u)+",1 M"+(.5+u)+",0 L"+(.5+u)+",1"},fe),"╣":(de={},de[1]=function(u,f){return"M"+(.5+u)+",0 L"+(.5+u)+",1 M0,"+(.5+f)+" L"+(.5-u)+","+(.5+f)+" L"+(.5-u)+",1 M0,"+(.5-f)+" L"+(.5-u)+","+(.5-f)+" L"+(.5-u)+",0"},de),"╤":(pe={},pe[1]=function(u,f){return"M0,"+(.5-f)+" L1,"+(.5-f)+" M0,"+(.5+f)+" L1,"+(.5+f)+" M.5,"+(.5+f)+" L.5,1"},pe),"╥":(_e={},_e[1]=function(u,f){return"M0,.5 L1,.5 M"+(.5-u)+",.5 L"+(.5-u)+",1 M"+(.5+u)+",.5 L"+(.5+u)+",1"},_e),"╦":(ve={},ve[1]=function(u,f){return"M0,"+(.5-f)+" L1,"+(.5-f)+" M0,"+(.5+f)+" L"+(.5-u)+","+(.5+f)+" L"+(.5-u)+",1 M1,"+(.5+f)+" L"+(.5+u)+","+(.5+f)+" L"+(.5+u)+",1"},ve),"╧":(ye={},ye[1]=function(u,f){return"M.5,0 L.5,"+(.5-f)+" M0,"+(.5-f)+" L1,"+(.5-f)+" M0,"+(.5+f)+" L1,"+(.5+f)},ye),"╨":(ge={},ge[1]=function(u,f){return"M0,.5 L1,.5 M"+(.5-u)+",.5 L"+(.5-u)+",0 M"+(.5+u)+",.5 L"+(.5+u)+",0"},ge),"╩":(me={},me[1]=function(u,f){return"M0,"+(.5+f)+" L1,"+(.5+f)+" M0,"+(.5-f)+" L"+(.5-u)+","+(.5-f)+" L"+(.5-u)+",0 M1,"+(.5-f)+" L"+(.5+u)+","+(.5-f)+" L"+(.5+u)+",0"},me),"╪":(be={},be[1]=function(u,f){return"M.5,0 L.5,1 M0,"+(.5-f)+" L1,"+(.5-f)+" M0,"+(.5+f)+" L1,"+(.5+f)},be),"╫":(Ce={},Ce[1]=function(u,f){return"M0,.5 L1,.5 M"+(.5-u)+",0 L"+(.5-u)+",1 M"+(.5+u)+",0 L"+(.5+u)+",1"},Ce),"╬":(Se={},Se[1]=function(u,f){return"M0,"+(.5+f)+" L"+(.5-u)+","+(.5+f)+" L"+(.5-u)+",1 M1,"+(.5+f)+" L"+(.5+u)+","+(.5+f)+" L"+(.5+u)+",1 M0,"+(.5-f)+" L"+(.5-u)+","+(.5-f)+" L"+(.5-u)+",0 M1,"+(.5-f)+" L"+(.5+u)+","+(.5-f)+" L"+(.5+u)+",0"},Se),"╱":(we={},we[1]="M1,0 L0,1",we),"╲":(Le={},Le[1]="M0,0 L1,1",Le),"╳":(Ee={},Ee[1]="M1,0 L0,1 M0,0 L1,1",Ee),"╼":(ke={},ke[1]="M.5,.5 L0,.5",ke[3]="M.5,.5 L1,.5",ke),"╽":(xe={},xe[1]="M.5,.5 L.5,0",xe[3]="M.5,.5 L.5,1",xe),"╾":(Re={},Re[1]="M.5,.5 L1,.5",Re[3]="M.5,.5 L0,.5",Re),"╿":(Ae={},Ae[1]="M.5,.5 L.5,1",Ae[3]="M.5,.5 L.5,0",Ae),"┍":(Me={},Me[1]="M.5,.5 L.5,1",Me[3]="M.5,.5 L1,.5",Me),"┎":(Oe={},Oe[1]="M.5,.5 L1,.5",Oe[3]="M.5,.5 L.5,1",Oe),"┑":(De={},De[1]="M.5,.5 L.5,1",De[3]="M.5,.5 L0,.5",De),"┒":(Te={},Te[1]="M.5,.5 L0,.5",Te[3]="M.5,.5 L.5,1",Te),"┕":(Be={},Be[1]="M.5,.5 L.5,0",Be[3]="M.5,.5 L1,.5",Be),"┖":(Pe={},Pe[1]="M.5,.5 L1,.5",Pe[3]="M.5,.5 L.5,0",Pe),"┙":(Ie={},Ie[1]="M.5,.5 L.5,0",Ie[3]="M.5,.5 L0,.5",Ie),"┚":(He={},He[1]="M.5,.5 L0,.5",He[3]="M.5,.5 L.5,0",He),"┝":(Fe={},Fe[1]="M.5,0 L.5,1",Fe[3]="M.5,.5 L1,.5",Fe),"┞":(je={},je[1]="M0.5,1 L.5,.5 L1,.5",je[3]="M.5,.5 L.5,0",je),"┟":(qe={},qe[1]="M.5,0 L.5,.5 L1,.5",qe[3]="M.5,.5 L.5,1",qe),"┠":(We={},We[1]="M.5,.5 L1,.5",We[3]="M.5,0 L.5,1",We),"┡":(Ue={},Ue[1]="M.5,.5 L.5,1",Ue[3]="M.5,0 L.5,.5 L1,.5",Ue),"┢":(Ne={},Ne[1]="M.5,.5 L.5,0",Ne[3]="M0.5,1 L.5,.5 L1,.5",Ne),"┥":(ze={},ze[1]="M.5,0 L.5,1",ze[3]="M.5,.5 L0,.5",ze),"┦":(Ke={},Ke[1]="M0,.5 L.5,.5 L.5,1",Ke[3]="M.5,.5 L.5,0",Ke),"┧":(Ve={},Ve[1]="M.5,0 L.5,.5 L0,.5",Ve[3]="M.5,.5 L.5,1",Ve),"┨":(Ge={},Ge[1]="M.5,.5 L0,.5",Ge[3]="M.5,0 L.5,1",Ge),"┩":(Xe={},Xe[1]="M.5,.5 L.5,1",Xe[3]="M.5,0 L.5,.5 L0,.5",Xe),"┪":(Ye={},Ye[1]="M.5,.5 L.5,0",Ye[3]="M0,.5 L.5,.5 L.5,1",Ye),"┭":(Ze={},Ze[1]="M0.5,1 L.5,.5 L1,.5",Ze[3]="M.5,.5 L0,.5",Ze),"┮":(Je={},Je[1]="M0,.5 L.5,.5 L.5,1",Je[3]="M.5,.5 L1,.5",Je),"┯":($e={},$e[1]="M.5,.5 L.5,1",$e[3]="M0,.5 L1,.5",$e),"┰":(Qe={},Qe[1]="M0,.5 L1,.5",Qe[3]="M.5,.5 L.5,1",Qe),"┱":(et={},et[1]="M.5,.5 L1,.5",et[3]="M0,.5 L.5,.5 L.5,1",et),"┲":(tt={},tt[1]="M.5,.5 L0,.5",tt[3]="M0.5,1 L.5,.5 L1,.5",tt),"┵":(rt={},rt[1]="M.5,0 L.5,.5 L1,.5",rt[3]="M.5,.5 L0,.5",rt),"┶":(it={},it[1]="M.5,0 L.5,.5 L0,.5",it[3]="M.5,.5 L1,.5",it),"┷":(nt={},nt[1]="M.5,.5 L.5,0",nt[3]="M0,.5 L1,.5",nt),"┸":(ot={},ot[1]="M0,.5 L1,.5",ot[3]="M.5,.5 L.5,0",ot),"┹":(st={},st[1]="M.5,.5 L1,.5",st[3]="M.5,0 L.5,.5 L0,.5",st),"┺":(at={},at[1]="M.5,.5 L0,.5",at[3]="M.5,0 L.5,.5 L1,.5",at),"┽":(ct={},ct[1]="M.5,0 L.5,1 M.5,.5 L1,.5",ct[3]="M.5,.5 L0,.5",ct),"┾":(lt={},lt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",lt[3]="M.5,.5 L1,.5",lt),"┿":(ht={},ht[1]="M.5,0 L.5,1",ht[3]="M0,.5 L1,.5",ht),"╀":(ut={},ut[1]="M0,.5 L1,.5 M.5,.5 L.5,1",ut[3]="M.5,.5 L.5,0",ut),"╁":(ft={},ft[1]="M.5,.5 L.5,0 M0,.5 L1,.5",ft[3]="M.5,.5 L.5,1",ft),"╂":(dt={},dt[1]="M0,.5 L1,.5",dt[3]="M.5,0 L.5,1",dt),"╃":(pt={},pt[1]="M0.5,1 L.5,.5 L1,.5",pt[3]="M.5,0 L.5,.5 L0,.5",pt),"╄":(_t={},_t[1]="M0,.5 L.5,.5 L.5,1",_t[3]="M.5,0 L.5,.5 L1,.5",_t),"╅":(vt={},vt[1]="M.5,0 L.5,.5 L1,.5",vt[3]="M0,.5 L.5,.5 L.5,1",vt),"╆":(yt={},yt[1]="M.5,0 L.5,.5 L0,.5",yt[3]="M0.5,1 L.5,.5 L1,.5",yt),"╇":(gt={},gt[1]="M.5,.5 L.5,1",gt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",gt),"╈":(mt={},mt[1]="M.5,.5 L.5,0",mt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",mt),"╉":(bt={},bt[1]="M.5,.5 L1,.5",bt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",bt),"╊":(Ct={},Ct[1]="M.5,.5 L0,.5",Ct[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Ct),"╌":(St={},St[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",St),"╍":(wt={},wt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",wt),"┄":(Lt={},Lt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Lt),"┅":(Et={},Et[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Et),"┈":(xt={},xt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",xt),"┉":(Rt={},Rt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Rt),"╎":(Mt={},Mt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Mt),"╏":(Ot={},Ot[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Ot),"┆":(Dt={},Dt[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Dt),"┇":(Tt={},Tt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Tt),"┊":(Bt={},Bt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Bt),"┋":(Pt={},Pt[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Pt),"╭":(It={},It[1]="C.5,1,.5,.5,1,.5",It),"╮":(Ht={},Ht[1]="C.5,1,.5,.5,0,.5",Ht),"╯":(Ft={},Ft[1]="C.5,0,.5,.5,0,.5",Ft),"╰":(jt={},jt[1]="C.5,0,.5,.5,1,.5",jt)},f.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},f.tryDrawCustomChar=function(u,d,_,v,y,b){var C=f.blockElementDefinitions[d];if(C)return function(u,f,d,_,v,y){for(var b=0;b<f.length;b++){var C=f[b],S=v/8,L=y/8;u.fillRect(d+C.x*S,_+C.y*L,C.w*S,C.h*L)}}(u,C,_,v,y,b),!0;var S=Nt[d];if(S)return function(u,f,d,_,v,y){var b,C=zt.get(f);C||(C=new Map,zt.set(f,C));var S=u.fillStyle;if("string"!=typeof S)throw Error('Unexpected fillStyle type "'+S+'"');var L=C.get(S);if(!L){var E=f[0].length,k=f.length,x=document.createElement("canvas");x.width=E,x.height=k;var R=(0,Ut.throwIfFalsy)(x.getContext("2d")),A=new ImageData(E,k),M=void 0,O=void 0,D=void 0,T=void 0;if(S.startsWith("#"))M=parseInt(S.slice(1,3),16),O=parseInt(S.slice(3,5),16),D=parseInt(S.slice(5,7),16),T=S.length>7&&parseInt(S.slice(7,9),16)||1;else{if(!S.startsWith("rgba"))throw Error('Unexpected fillStyle color format "'+S+'" when drawing pattern glyph');M=(b=qt(S.substring(5,S.length-1).split(",").map((function(u){return parseFloat(u)})),4))[0],O=b[1],D=b[2],T=b[3]}for(var B=0;B<k;B++)for(var P=0;P<E;P++)A.data[4*(B*E+P)]=M,A.data[4*(B*E+P)+1]=O,A.data[4*(B*E+P)+2]=D,A.data[4*(B*E+P)+3]=f[B][P]*(255*T);R.putImageData(A,0,0),L=(0,Ut.throwIfFalsy)(u.createPattern(x,null)),C.set(S,L)}u.fillStyle=L,u.fillRect(d,_,v,y)}(u,S,_,v,y,b),!0;var L=f.boxDrawingDefinitions[d];if(L)return function(u,f,d,_,v,y){var b,C,S,L;u.strokeStyle=u.fillStyle;try{for(var E=Wt(Object.entries(f)),k=E.next();!k.done;k=E.next()){var x=qt(k.value,2),R=x[0],A=x[1];u.beginPath(),u.lineWidth=window.devicePixelRatio*Number.parseInt(R);var M=void 0;M="function"==typeof A?A(.15,.15/y*v):A;try{for(var O=(S=void 0,Wt(M.split(" "))),D=O.next();!D.done;D=O.next()){var T=D.value,B=T[0],P=Kt[B];if(P){var I=T.substring(1).split(",");I[0]&&I[1]&&P(u,At(I,v,y,d,_))}else console.error('Could not find drawing instructions for "'+B+'"')}}catch(u){S={error:u}}finally{try{D&&!D.done&&(L=O.return)&&L.call(O)}finally{if(S)throw S.error}}u.stroke(),u.closePath()}}catch(u){b={error:u}}finally{try{k&&!k.done&&(C=E.return)&&C.call(E)}finally{if(b)throw b.error}}}(u,L,_,v,y,b),!0;var E=f.powerlineDefinitions[d];return!!E&&(function(u,f,d,_,v,y){var b,C;u.beginPath(),u.lineWidth=window.devicePixelRatio;try{for(var S=Wt(f.d.split(" ")),L=S.next();!L.done;L=S.next()){var E=L.value,k=E[0],x=Kt[k];if(x){var R=E.substring(1).split(",");R[0]&&R[1]&&x(u,At(R,v,y,d,_,f.horizontalPadding))}else console.error('Could not find drawing instructions for "'+k+'"')}}catch(u){b={error:u}}finally{try{L&&!L.done&&(C=S.return)&&C.call(S)}finally{if(b)throw b.error}}1===f.type?(u.strokeStyle=u.fillStyle,u.stroke()):u.fill(),u.closePath()}(u,E,_,v,y,b),!0)};var zt=new Map;function kt(u,f,d){return void 0===d&&(d=0),Math.max(Math.min(u,f),d)}var Kt={C:function(u,f){return u.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5])},L:function(u,f){return u.lineTo(f[0],f[1])},M:function(u,f){return u.moveTo(f[0],f[1])}};function At(u,f,d,_,v,y){void 0===y&&(y=0);var b=u.map((function(u){return parseFloat(u)||parseInt(u)}));if(b.length<2)throw Error("Too few arguments for instruction");for(var C=0;C<b.length;C+=2)b[C]*=f-2*y*window.devicePixelRatio,0!==b[C]&&(b[C]=kt(Math.round(b[C]+.5)-.5,f,0)),b[C]+=_+y*window.devicePixelRatio;for(var S=1;S<b.length;S+=2)b[S]*=d,0!==b[S]&&(b[S]=kt(Math.round(b[S]+.5)-.5,d,0)),b[S]+=v;return b}},3700:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.GridCache=void 0;var d=function(){function e(){this.cache=[]}return e.prototype.resize=function(u,f){for(var d=0;d<u;d++){this.cache.length<=d&&this.cache.push([]);for(var _=this.cache[d].length;_<f;_++)this.cache[d].push(void 0);this.cache[d].length=f}this.cache.length=u},e.prototype.clear=function(){for(var u=0;u<this.cache.length;u++)for(var f=0;f<this.cache[u].length;f++)this.cache[u][f]=void 0},e}();f.GridCache=d},5098:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.LinkRenderLayer=void 0;var C=d(1546),S=d(8803),L=d(2040),E=d(2585),k=function(u){function t(f,d,_,v,y,b,C,S,L){var E=u.call(this,f,"link",d,!0,_,v,C,S,L)||this;return y.onShowLinkUnderline((function(u){return E._onShowLinkUnderline(u)})),y.onHideLinkUnderline((function(u){return E._onHideLinkUnderline(u)})),b.onShowLinkUnderline((function(u){return E._onShowLinkUnderline(u)})),b.onHideLinkUnderline((function(u){return E._onHideLinkUnderline(u)})),E}return v(t,u),t.prototype.resize=function(f){u.prototype.resize.call(this,f),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var u=this._state.y2-this._state.y1-1;u>0&&this._clearCells(0,this._state.y1+1,this._state.cols,u),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(u){if(u.fg===S.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:u.fg&&(0,L.is256Color)(u.fg)?this._ctx.fillStyle=this._colors.ansi[u.fg].css:this._ctx.fillStyle=this._colors.foreground.css,u.y1===u.y2)this._fillBottomLineAtCells(u.x1,u.y1,u.x2-u.x1);else{this._fillBottomLineAtCells(u.x1,u.y1,u.cols-u.x1);for(var f=u.y1+1;f<u.y2;f++)this._fillBottomLineAtCells(0,f,u.cols);this._fillBottomLineAtCells(0,u.y2,u.x2)}this._state=u},t.prototype._onHideLinkUnderline=function(u){this._clearCurrentLink()},y([b(6,E.IBufferService),b(7,E.IOptionsService),b(8,E.IDecorationService)],t)}(C.BaseRenderLayer);f.LinkRenderLayer=k},3525:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},C=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.Renderer=void 0;var S=d(9596),L=d(4149),E=d(2512),k=d(5098),x=d(844),R=d(4725),A=d(2585),M=d(1420),O=d(8460),D=1,T=function(u){function t(f,d,_,v,y,b,C,x){var R=u.call(this)||this;R._colors=f,R._screenElement=d,R._bufferService=b,R._charSizeService=C,R._optionsService=x,R._id=D++,R._onRequestRedraw=new O.EventEmitter;var A=R._optionsService.rawOptions.allowTransparency;return R._renderLayers=[y.createInstance(S.TextRenderLayer,R._screenElement,0,R._colors,A,R._id),y.createInstance(L.SelectionRenderLayer,R._screenElement,1,R._colors,R._id),y.createInstance(k.LinkRenderLayer,R._screenElement,2,R._colors,R._id,_,v),y.createInstance(E.CursorRenderLayer,R._screenElement,3,R._colors,R._id,R._onRequestRedraw)],R.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},R._devicePixelRatio=window.devicePixelRatio,R._updateDimensions(),R.onOptionsChanged(),R}return v(t,u),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var f,d;try{for(var _=C(this._renderLayers),v=_.next();!v.done;v=_.next())v.value.dispose()}catch(u){f={error:u}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(f)throw f.error}}u.prototype.dispose.call(this),(0,M.removeTerminalFromCache)(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(u){var f,d;this._colors=u;try{for(var _=C(this._renderLayers),v=_.next();!v.done;v=_.next()){var y=v.value;y.setColors(this._colors),y.reset()}}catch(u){f={error:u}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(f)throw f.error}}},t.prototype.onResize=function(u,f){var d,_;this._updateDimensions();try{for(var v=C(this._renderLayers),y=v.next();!y.done;y=v.next())y.value.resize(this.dimensions)}catch(u){d={error:u}}finally{try{y&&!y.done&&(_=v.return)&&_.call(v)}finally{if(d)throw d.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation((function(u){return u.onBlur()}))},t.prototype.onFocus=function(){this._runOperation((function(u){return u.onFocus()}))},t.prototype.onSelectionChanged=function(u,f,d){void 0===d&&(d=!1),this._runOperation((function(_){return _.onSelectionChanged(u,f,d)})),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},t.prototype.onCursorMove=function(){this._runOperation((function(u){return u.onCursorMove()}))},t.prototype.onOptionsChanged=function(){this._runOperation((function(u){return u.onOptionsChanged()}))},t.prototype.clear=function(){this._runOperation((function(u){return u.reset()}))},t.prototype._runOperation=function(u){var f,d;try{for(var _=C(this._renderLayers),v=_.next();!v.done;v=_.next())u(v.value)}catch(u){f={error:u}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(f)throw f.error}}},t.prototype.renderRows=function(u,f){var d,_;try{for(var v=C(this._renderLayers),y=v.next();!y.done;y=v.next())y.value.onGridChanged(u,f)}catch(u){d={error:u}}finally{try{y&&!y.done&&(_=v.return)&&_.call(v)}finally{if(d)throw d.error}}},t.prototype.clearTextureAtlas=function(){var u,f;try{for(var d=C(this._renderLayers),_=d.next();!_.done;_=d.next())_.value.clearTextureAtlas()}catch(f){u={error:f}}finally{try{_&&!_.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},y([b(4,A.IInstantiationService),b(5,A.IBufferService),b(6,R.ICharSizeService),b(7,A.IOptionsService)],t)}(x.Disposable);f.Renderer=T},1752:(u,f)=>{function r(u){return 57508<=u&&u<=57558}Object.defineProperty(f,"__esModule",{value:!0}),f.excludeFromContrastRatioDemands=f.isPowerlineGlyph=f.throwIfFalsy=void 0,f.throwIfFalsy=function(u){if(!u)throw Error("value must not be falsy");return u},f.isPowerlineGlyph=r,f.excludeFromContrastRatioDemands=function(u){return r(u)||function(u){return 9472<=u&&u<=9631}(u)}},4149:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.SelectionRenderLayer=void 0;var C=d(1546),S=d(2585),L=function(u){function t(f,d,_,v,y,b,C){var S=u.call(this,f,"selection",d,!0,_,v,y,b,C)||this;return S._clearState(),S}return v(t,u),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(f){u.prototype.resize.call(this,f),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(f,d,_){if(u.prototype.onSelectionChanged.call(this,f,d,_),this._didStateChange(f,d,_,this._bufferService.buffer.ydisp))if(this._clearAll(),f&&d){var v=f[1]-this._bufferService.buffer.ydisp,y=d[1]-this._bufferService.buffer.ydisp,b=Math.max(v,0),C=Math.min(y,this._bufferService.rows-1);if(b>=this._bufferService.rows||C<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,_){var S=f[0],L=d[0]-S,E=C-b+1;this._fillCells(S,b,L,E)}else{S=v===b?f[0]:0;var k=b===y?d[0]:this._bufferService.cols;this._fillCells(S,b,k-S,1);var x=Math.max(C-b-1,0);if(this._fillCells(0,b+1,this._bufferService.cols,x),b!==C){var R=y===C?d[0]:this._bufferService.cols;this._fillCells(0,C,R,1)}}this._state.start=[f[0],f[1]],this._state.end=[d[0],d[1]],this._state.columnSelectMode=_,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(u,f,d,_){return!this._areCoordinatesEqual(u,this._state.start)||!this._areCoordinatesEqual(f,this._state.end)||d!==this._state.columnSelectMode||_!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(u,f){return!(!u||!f)&&u[0]===f[0]&&u[1]===f[1]},y([b(4,S.IBufferService),b(5,S.IOptionsService),b(6,S.IDecorationService)],t)}(C.BaseRenderLayer);f.SelectionRenderLayer=L},9596:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},C=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.TextRenderLayer=void 0;var S=d(3700),L=d(1546),E=d(3734),k=d(643),x=d(511),R=d(2585),A=d(4725),M=d(4269),O=function(u){function t(f,d,_,v,y,b,C,L,E){var k=u.call(this,f,"text",d,v,_,y,b,C,E)||this;return k._characterJoinerService=L,k._characterWidth=0,k._characterFont="",k._characterOverlapCache={},k._workCell=new x.CellData,k._state=new S.GridCache,k}return v(t,u),t.prototype.resize=function(f){u.prototype.resize.call(this,f);var d=this._getFont(!1,!1);this._characterWidth===f.scaledCharWidth&&this._characterFont===d||(this._characterWidth=f.scaledCharWidth,this._characterFont=d,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(u,f,d){for(var _=u;_<=f;_++)for(var v=_+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.lines.get(v),b=this._characterJoinerService.getJoinedCharacters(v),C=0;C<this._bufferService.cols;C++){y.loadCell(C,this._workCell);var S=this._workCell,L=!1,E=C;if(0!==S.getWidth()){if(b.length>0&&C===b[0][0]){L=!0;var x=b.shift();S=new M.JoinedCellData(this._workCell,y.translateToString(!0,x[0],x[1]),x[1]-x[0]),E=x[1]-1}!L&&this._isOverlapping(S)&&E<y.length-1&&y.getCodePoint(E+1)===k.NULL_CELL_CODE&&(S.content&=-12582913,S.content|=2<<22),d(S,C,_),C=E}}},t.prototype._drawBackground=function(u,f){var d=this,_=this._ctx,v=this._bufferService.cols,y=0,b=0,S=null;_.save(),this._forEachCell(u,f,(function(u,f,L){var k,x,R=null;u.isInverse()?R=u.isFgDefault()?d._colors.foreground.css:u.isFgRGB()?"rgb("+E.AttributeData.toColorRGB(u.getFgColor()).join(",")+")":d._colors.ansi[u.getFgColor()].css:u.isBgRGB()?R="rgb("+E.AttributeData.toColorRGB(u.getBgColor()).join(",")+")":u.isBgPalette()&&(R=d._colors.ansi[u.getBgColor()].css);var A=!1;try{for(var M=C(d._decorationService.getDecorationsAtCell(f,d._bufferService.buffer.ydisp+L)),O=M.next();!O.done;O=M.next()){var D=O.value;"top"!==D.options.layer&&A||(D.backgroundColorRGB&&(R=D.backgroundColorRGB.css),A="top"===D.options.layer)}}catch(u){k={error:u}}finally{try{O&&!O.done&&(x=M.return)&&x.call(M)}finally{if(k)throw k.error}}null===S&&(y=f,b=L),L!==b?(_.fillStyle=S||"",d._fillCells(y,b,v-y,1),y=f,b=L):S!==R&&(_.fillStyle=S||"",d._fillCells(y,b,f-y,1),y=f,b=L),S=R})),null!==S&&(_.fillStyle=S,this._fillCells(y,b,v-y,1)),_.restore()},t.prototype._drawForeground=function(u,f){var d=this;this._forEachCell(u,f,(function(u,f,_){if(!u.isInvisible()&&(d._drawChars(u,f,_),u.isUnderline()||u.isStrikethrough())){if(d._ctx.save(),u.isInverse())if(u.isBgDefault())d._ctx.fillStyle=d._colors.background.css;else if(u.isBgRGB())d._ctx.fillStyle="rgb("+E.AttributeData.toColorRGB(u.getBgColor()).join(",")+")";else{var v=u.getBgColor();d._optionsService.rawOptions.drawBoldTextInBrightColors&&u.isBold()&&v<8&&(v+=8),d._ctx.fillStyle=d._colors.ansi[v].css}else if(u.isFgDefault())d._ctx.fillStyle=d._colors.foreground.css;else if(u.isFgRGB())d._ctx.fillStyle="rgb("+E.AttributeData.toColorRGB(u.getFgColor()).join(",")+")";else{var y=u.getFgColor();d._optionsService.rawOptions.drawBoldTextInBrightColors&&u.isBold()&&y<8&&(y+=8),d._ctx.fillStyle=d._colors.ansi[y].css}u.isStrikethrough()&&d._fillMiddleLineAtCells(f,_,u.getWidth()),u.isUnderline()&&d._fillBottomLineAtCells(f,_,u.getWidth()),d._ctx.restore()}}))},t.prototype.onGridChanged=function(u,f){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,u,this._bufferService.cols,f-u+1),this._drawBackground(u,f),this._drawForeground(u,f))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},t.prototype._isOverlapping=function(u){if(1!==u.getWidth())return!1;if(u.getCode()<256)return!1;var f=u.getChars();if(this._characterOverlapCache.hasOwnProperty(f))return this._characterOverlapCache[f];this._ctx.save(),this._ctx.font=this._characterFont;var d=Math.floor(this._ctx.measureText(f).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[f]=d,d},y([b(5,R.IBufferService),b(6,R.IOptionsService),b(7,A.ICharacterJoinerService),b(8,R.IDecorationService)],t)}(L.BaseRenderLayer);f.TextRenderLayer=O},9616:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BaseCharAtlas=void 0;var d=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.clear=function(){},e.prototype.beginFrame=function(){},e}();f.BaseCharAtlas=d},1420:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.removeTerminalFromCache=f.acquireCharAtlas=void 0;var _=d(2040),v=d(1906),y=[];f.acquireCharAtlas=function(u,f,d,b,C){for(var S=(0,_.generateConfig)(b,C,u,d),L=0;L<y.length;L++){var E=(k=y[L]).ownedBy.indexOf(f);if(E>=0){if((0,_.configEquals)(k.config,S))return k.atlas;1===k.ownedBy.length?(k.atlas.dispose(),y.splice(L,1)):k.ownedBy.splice(E,1);break}}for(L=0;L<y.length;L++){var k=y[L];if((0,_.configEquals)(k.config,S))return k.ownedBy.push(f),k.atlas}var x={atlas:new v.DynamicCharAtlas(document,S),config:S,ownedBy:[f]};return y.push(x),x.atlas},f.removeTerminalFromCache=function(u){for(var f=0;f<y.length;f++){var d=y[f].ownedBy.indexOf(u);if(-1!==d){1===y[f].ownedBy.length?(y[f].atlas.dispose(),y.splice(f,1)):y[f].ownedBy.splice(d,1);break}}}},2040:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.is256Color=f.configEquals=f.generateConfig=void 0;var _=d(643);f.generateConfig=function(u,f,d,_){var v={foreground:_.foreground,background:_.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:_.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:u,scaledCharHeight:f,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,colors:v}},f.configEquals=function(u,f){for(var d=0;d<u.colors.ansi.length;d++)if(u.colors.ansi[d].rgba!==f.colors.ansi[d].rgba)return!1;return u.devicePixelRatio===f.devicePixelRatio&&u.fontFamily===f.fontFamily&&u.fontSize===f.fontSize&&u.fontWeight===f.fontWeight&&u.fontWeightBold===f.fontWeightBold&&u.allowTransparency===f.allowTransparency&&u.scaledCharWidth===f.scaledCharWidth&&u.scaledCharHeight===f.scaledCharHeight&&u.colors.foreground===f.colors.foreground&&u.colors.background===f.colors.background},f.is256Color=function(u){return u<_.DEFAULT_COLOR}},8803:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CHAR_ATLAS_CELL_SPACING=f.TEXT_BASELINE=f.DIM_OPACITY=f.INVERTED_DEFAULT_COLOR=void 0;var _=d(6114);f.INVERTED_DEFAULT_COLOR=257,f.DIM_OPACITY=.5,f.TEXT_BASELINE=_.isFirefox||_.isLegacyEdge?"bottom":"ideographic",f.CHAR_ATLAS_CELL_SPACING=1},1906:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.NoneCharAtlas=f.DynamicCharAtlas=f.getGlyphCacheKey=void 0;var y=d(8803),b=d(9616),C=d(5680),S=d(7001),L=d(6114),E=d(1752),k=d(8055),x=1024,R=1024,A={css:"rgba(0, 0, 0, 0)",rgba:0};function p(u){return u.code<<21|u.bg<<12|u.fg<<3|(u.bold?0:4)+(u.dim?0:2)+(u.italic?0:1)}f.getGlyphCacheKey=p;var M=function(u){function t(f,d){var _=u.call(this)||this;_._config=d,_._drawToCacheCount=0,_._glyphsWaitingOnBitmap=[],_._bitmapCommitTimeout=null,_._bitmap=null,_._cacheCanvas=f.createElement("canvas"),_._cacheCanvas.width=x,_._cacheCanvas.height=R,_._cacheCtx=(0,E.throwIfFalsy)(_._cacheCanvas.getContext("2d",{alpha:!0}));var v=f.createElement("canvas");v.width=_._config.scaledCharWidth,v.height=_._config.scaledCharHeight,_._tmpCtx=(0,E.throwIfFalsy)(v.getContext("2d",{alpha:_._config.allowTransparency})),_._width=Math.floor(x/_._config.scaledCharWidth),_._height=Math.floor(R/_._config.scaledCharHeight);var y=_._width*_._height;return _._cacheMap=new S.LRUMap(y),_._cacheMap.prealloc(y),_}return v(t,u),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.clear=function(){if(this._cacheMap.size>0){var u=this._width*this._height;this._cacheMap=new S.LRUMap(u),this._cacheMap.prealloc(u)}this._cacheCtx.clearRect(0,0,x,R),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},t.prototype.draw=function(u,f,d,_){if(32===f.code)return!0;if(!this._canCache(f))return!1;var v=p(f),y=this._cacheMap.get(v);if(null!=y)return this._drawFromCache(u,y,d,_),!0;if(this._drawToCacheCount<100){var b;b=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var C=this._drawToCache(f,b);return this._cacheMap.set(v,C),this._drawFromCache(u,C,d,_),!0}return!1},t.prototype._canCache=function(u){return u.code<256},t.prototype._toCoordinateX=function(u){return u%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(u){return Math.floor(u/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(u,f,d,_){if(!f.isEmpty){var v=this._toCoordinateX(f.index),y=this._toCoordinateY(f.index);u.drawImage(f.inBitmap?this._bitmap:this._cacheCanvas,v,y,this._config.scaledCharWidth,this._config.scaledCharHeight,d,_,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(u){return u<this._config.colors.ansi.length?this._config.colors.ansi[u]:C.DEFAULT_ANSI_COLORS[u]},t.prototype._getBackgroundColor=function(u){return this._config.allowTransparency?A:u.bg===y.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:u.bg<256?this._getColorFromAnsiIndex(u.bg):this._config.colors.background},t.prototype._getForegroundColor=function(u){return u.fg===y.INVERTED_DEFAULT_COLOR?k.color.opaque(this._config.colors.background):u.fg<256?this._getColorFromAnsiIndex(u.fg):this._config.colors.foreground},t.prototype._drawToCache=function(u,f){this._drawToCacheCount++,this._tmpCtx.save();var d=this._getBackgroundColor(u);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=d.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var _=u.bold?this._config.fontWeightBold:this._config.fontWeight,v=u.italic?"italic":"";this._tmpCtx.font=v+" "+_+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=y.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(u).css,u.dim&&(this._tmpCtx.globalAlpha=y.DIM_OPACITY),this._tmpCtx.fillText(u.chars,0,this._config.scaledCharHeight);var b=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),C=!1;if(this._config.allowTransparency||(C=g(b,d)),C&&"_"===u.chars&&!this._config.allowTransparency)for(var S=1;S<=5&&(this._tmpCtx.fillText(u.chars,0,this._config.scaledCharHeight-S),C=g(b=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),d));S++);this._tmpCtx.restore();var L=this._toCoordinateX(f),E=this._toCoordinateY(f);this._cacheCtx.putImageData(b,L,E);var k={index:f,isEmpty:C,inBitmap:!1};return this._addGlyphToBitmap(k),k},t.prototype._addGlyphToBitmap=function(u){var f=this;!("createImageBitmap"in window)||L.isFirefox||L.isSafari||(this._glyphsWaitingOnBitmap.push(u),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return f._generateBitmap()}),100)))},t.prototype._generateBitmap=function(){var u=this,f=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(d){u._bitmap=d;for(var _=0;_<f.length;_++)f[_].inBitmap=!0})),this._bitmapCommitTimeout=null},t}(b.BaseCharAtlas);f.DynamicCharAtlas=M;var O=function(u){function t(f,d){return u.call(this)||this}return v(t,u),t.prototype.draw=function(u,f,d,_){return!1},t}(b.BaseCharAtlas);function g(u,f){for(var d=!0,_=f.rgba>>>24,v=f.rgba>>>16&255,y=f.rgba>>>8&255,b=0;b<u.data.length;b+=4)u.data[b]===_&&u.data[b+1]===v&&u.data[b+2]===y?u.data[b+3]=0:d=!1;return d}f.NoneCharAtlas=O},7001:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.LRUMap=void 0;var d=function(){function e(u){this.capacity=u,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(u){var f=u.prev,d=u.next;u===this._head&&(this._head=d),u===this._tail&&(this._tail=f),null!==f&&(f.next=d),null!==d&&(d.prev=f)},e.prototype._appendNode=function(u){var f=this._tail;null!==f&&(f.next=u),u.prev=f,u.next=null,this._tail=u,null===this._head&&(this._head=u)},e.prototype.prealloc=function(u){for(var f=this._nodePool,d=0;d<u;d++)f.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(u){var f=this._map[u];return void 0!==f?(this._unlinkNode(f),this._appendNode(f),f.value):null},e.prototype.peekValue=function(u){var f=this._map[u];return void 0!==f?f.value:null},e.prototype.peek=function(){var u=this._head;return null===u?null:u.value},e.prototype.set=function(u,f){var d=this._map[u];if(void 0!==d)d=this._map[u],this._unlinkNode(d),d.value=f;else if(this.size>=this.capacity)d=this._head,this._unlinkNode(d),delete this._map[d.key],d.key=u,d.value=f,this._map[u]=d;else{var _=this._nodePool;_.length>0?((d=_.pop()).key=u,d.value=f):d={prev:null,next:null,key:u,value:f},this._map[u]=d,this.size++}this._appendNode(d)},e}();f.LRUMap=d},1296:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},C=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.DomRenderer=void 0;var S=d(3787),L=d(8803),E=d(844),k=d(4725),x=d(2585),R=d(8460),A=d(8055),M=d(9631),O="xterm-dom-renderer-owner-",D="xterm-fg-",T="xterm-bg-",B="xterm-focus",P=1,I=function(u){function t(f,d,_,v,y,b,C,L,E,k){var x=u.call(this)||this;return x._colors=f,x._element=d,x._screenElement=_,x._viewportElement=v,x._linkifier=y,x._linkifier2=b,x._charSizeService=L,x._optionsService=E,x._bufferService=k,x._terminalClass=P++,x._rowElements=[],x._rowContainer=document.createElement("div"),x._rowContainer.classList.add("xterm-rows"),x._rowContainer.style.lineHeight="normal",x._rowContainer.setAttribute("aria-hidden","true"),x._refreshRowElements(x._bufferService.cols,x._bufferService.rows),x._selectionContainer=document.createElement("div"),x._selectionContainer.classList.add("xterm-selection"),x._selectionContainer.setAttribute("aria-hidden","true"),x.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},x._updateDimensions(),x._injectCss(),x._rowFactory=C.createInstance(S.DomRendererRowFactory,document,x._colors),x._element.classList.add(O+x._terminalClass),x._screenElement.appendChild(x._rowContainer),x._screenElement.appendChild(x._selectionContainer),x.register(x._linkifier.onShowLinkUnderline((function(u){return x._onLinkHover(u)}))),x.register(x._linkifier.onHideLinkUnderline((function(u){return x._onLinkLeave(u)}))),x.register(x._linkifier2.onShowLinkUnderline((function(u){return x._onLinkHover(u)}))),x.register(x._linkifier2.onHideLinkUnderline((function(u){return x._onLinkLeave(u)}))),x}return v(t,u),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new R.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove(O+this._terminalClass),(0,M.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),u.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var u,f;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var d=C(this._rowElements),_=d.next();!_.done;_=d.next()){var v=_.value;v.style.width=this.dimensions.canvasWidth+"px",v.style.height=this.dimensions.actualCellHeight+"px",v.style.lineHeight=this.dimensions.actualCellHeight+"px",v.style.overflow="hidden"}}catch(f){u={error:f}}finally{try{_&&!_.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var y=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=y,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(u){this._colors=u,this._injectCss()},t.prototype._injectCss=function(){var u=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var f=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";f+=this._terminalSelector+" span:not(."+S.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+S.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+S.ITALIC_CLASS+" { font-style: italic;}",f+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",f+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",f+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+":not(."+S.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_BLINK_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+S.CURSOR_CLASS+"."+S.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",f+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach((function(d,_){f+=u._terminalSelector+" ."+D+_+" { color: "+d.css+"; }"+u._terminalSelector+" ."+T+_+" { background-color: "+d.css+"; }"})),f+=this._terminalSelector+" ."+D+L.INVERTED_DEFAULT_COLOR+" { color: "+A.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+T+L.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=f},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(u,f){for(var d=this._rowElements.length;d<=f;d++){var _=document.createElement("div");this._rowContainer.appendChild(_),this._rowElements.push(_)}for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(u,f){this._refreshRowElements(u,f),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove(B)},t.prototype.onFocus=function(){this._rowContainer.classList.add(B)},t.prototype.onSelectionChanged=function(u,f,d){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(u,f,d),this.renderRows(0,this._bufferService.rows-1),u&&f){var _=u[1]-this._bufferService.buffer.ydisp,v=f[1]-this._bufferService.buffer.ydisp,y=Math.max(_,0),b=Math.min(v,this._bufferService.rows-1);if(!(y>=this._bufferService.rows||b<0)){var C=document.createDocumentFragment();if(d){var S=u[0]>f[0];C.appendChild(this._createSelectionElement(y,S?f[0]:u[0],S?u[0]:f[0],b-y+1))}else{var L=_===y?u[0]:0,E=y===v?f[0]:this._bufferService.cols;C.appendChild(this._createSelectionElement(y,L,E));var k=b-y-1;if(C.appendChild(this._createSelectionElement(y+1,0,this._bufferService.cols,k)),y!==b){var x=v===b?f[0]:this._bufferService.cols;C.appendChild(this._createSelectionElement(b,0,x))}}this._selectionContainer.appendChild(C)}}},t.prototype._createSelectionElement=function(u,f,d,_){void 0===_&&(_=1);var v=document.createElement("div");return v.style.height=_*this.dimensions.actualCellHeight+"px",v.style.top=u*this.dimensions.actualCellHeight+"px",v.style.left=f*this.dimensions.actualCellWidth+"px",v.style.width=this.dimensions.actualCellWidth*(d-f)+"px",v},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){var u,f;try{for(var d=C(this._rowElements),_=d.next();!_.done;_=d.next())_.value.innerText=""}catch(f){u={error:f}}finally{try{_&&!_.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}},t.prototype.renderRows=function(u,f){for(var d=this._bufferService.buffer.ybase+this._bufferService.buffer.y,_=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),v=this._optionsService.rawOptions.cursorBlink,y=u;y<=f;y++){var b=this._rowElements[y];b.innerText="";var C=y+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.lines.get(C),L=this._optionsService.rawOptions.cursorStyle;b.appendChild(this._rowFactory.createRow(S,C,C===d,L,_,v,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return"."+O+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype._onLinkHover=function(u){this._setCellUnderline(u.x1,u.x2,u.y1,u.y2,u.cols,!0)},t.prototype._onLinkLeave=function(u){this._setCellUnderline(u.x1,u.x2,u.y1,u.y2,u.cols,!1)},t.prototype._setCellUnderline=function(u,f,d,_,v,y){for(;u!==f||d!==_;){var b=this._rowElements[d];if(!b)return;var C=b.children[u];C&&(C.style.textDecoration=y?"underline":"none"),++u>=v&&(u=0,d++)}},y([b(6,x.IInstantiationService),b(7,k.ICharSizeService),b(8,x.IOptionsService),b(9,x.IBufferService)],t)}(E.Disposable);f.DomRenderer=I},3787:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},y=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.DomRendererRowFactory=f.CURSOR_STYLE_UNDERLINE_CLASS=f.CURSOR_STYLE_BAR_CLASS=f.CURSOR_STYLE_BLOCK_CLASS=f.CURSOR_BLINK_CLASS=f.CURSOR_CLASS=f.STRIKETHROUGH_CLASS=f.UNDERLINE_CLASS=f.ITALIC_CLASS=f.DIM_CLASS=f.BOLD_CLASS=void 0;var b=d(8803),C=d(643),S=d(511),L=d(2585),E=d(8055),k=d(4725),x=d(4269),R=d(1752);f.BOLD_CLASS="xterm-bold",f.DIM_CLASS="xterm-dim",f.ITALIC_CLASS="xterm-italic",f.UNDERLINE_CLASS="xterm-underline",f.STRIKETHROUGH_CLASS="xterm-strikethrough",f.CURSOR_CLASS="xterm-cursor",f.CURSOR_BLINK_CLASS="xterm-cursor-blink",f.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",f.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",f.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var A=function(){function e(u,f,d,_,v,y){this._document=u,this._colors=f,this._characterJoinerService=d,this._optionsService=_,this._coreService=v,this._decorationService=y,this._workCell=new S.CellData,this._columnSelectMode=!1}return e.prototype.setColors=function(u){this._colors=u},e.prototype.onSelectionChanged=function(u,f,d){this._selectionStart=u,this._selectionEnd=f,this._columnSelectMode=d},e.prototype.createRow=function(u,d,_,v,S,L,k,R){for(var A,M,O=this._document.createDocumentFragment(),D=this._characterJoinerService.getJoinedCharacters(d),T=0,B=Math.min(u.length,R)-1;B>=0;B--)if(u.loadCell(B,this._workCell).getCode()!==C.NULL_CELL_CODE||_&&B===S){T=B+1;break}for(B=0;B<T;B++){u.loadCell(B,this._workCell);var P=this._workCell.getWidth();if(0!==P){var I=!1,H=B,F=this._workCell;if(D.length>0&&B===D[0][0]){I=!0;var j=D.shift();F=new x.JoinedCellData(this._workCell,u.translateToString(!0,j[0],j[1]),j[1]-j[0]),H=j[1]-1,P=F.getWidth()}var q=this._document.createElement("span");if(P>1&&(q.style.width=k*P+"px"),I&&(q.style.display="inline",S>=B&&S<=H&&(S=B)),!this._coreService.isCursorHidden&&_&&B===S)switch(q.classList.add(f.CURSOR_CLASS),L&&q.classList.add(f.CURSOR_BLINK_CLASS),v){case"bar":q.classList.add(f.CURSOR_STYLE_BAR_CLASS);break;case"underline":q.classList.add(f.CURSOR_STYLE_UNDERLINE_CLASS);break;default:q.classList.add(f.CURSOR_STYLE_BLOCK_CLASS)}F.isBold()&&q.classList.add(f.BOLD_CLASS),F.isItalic()&&q.classList.add(f.ITALIC_CLASS),F.isDim()&&q.classList.add(f.DIM_CLASS),F.isUnderline()&&q.classList.add(f.UNDERLINE_CLASS),F.isInvisible()?q.textContent=C.WHITESPACE_CELL_CHAR:q.textContent=F.getChars()||C.WHITESPACE_CELL_CHAR,F.isStrikethrough()&&q.classList.add(f.STRIKETHROUGH_CLASS);var W=F.getFgColor(),U=F.getFgColorMode(),N=F.getBgColor(),z=F.getBgColorMode(),K=!!F.isInverse();if(K){var V=W;W=N,N=V;var G=U;U=z,z=G}var X=void 0,Y=void 0,Z=!1;try{for(var J=(A=void 0,y(this._decorationService.getDecorationsAtCell(B,d))),$=J.next();!$.done;$=J.next()){var Q=$.value;"top"!==Q.options.layer&&Z||(Q.backgroundColorRGB&&(z=50331648,N=Q.backgroundColorRGB.rgba>>8&16777215,X=Q.backgroundColorRGB),Q.foregroundColorRGB&&(U=50331648,W=Q.foregroundColorRGB.rgba>>8&16777215,Y=Q.foregroundColorRGB),Z="top"===Q.options.layer)}}catch(u){A={error:u}}finally{try{$&&!$.done&&(M=J.return)&&M.call(J)}finally{if(A)throw A.error}}var ee=this._isCellInSelection(B,d);Z||this._colors.selectionForeground&&ee&&(U=50331648,W=this._colors.selectionForeground.rgba>>8&16777215,Y=this._colors.selectionForeground),ee&&(X=this._colors.selectionOpaque,Z=!0),Z&&q.classList.add("xterm-decoration-top");var te=void 0;switch(z){case 16777216:case 33554432:te=this._colors.ansi[N],q.classList.add("xterm-bg-"+N);break;case 50331648:te=E.rgba.toColor(N>>16,N>>8&255,255&N),this._addStyle(q,"background-color:#"+p((N>>>0).toString(16),"0",6));break;default:K?(te=this._colors.foreground,q.classList.add("xterm-bg-"+b.INVERTED_DEFAULT_COLOR)):te=this._colors.background}switch(U){case 16777216:case 33554432:F.isBold()&&W<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(W+=8),this._applyMinimumContrast(q,te,this._colors.ansi[W],F,X,void 0)||q.classList.add("xterm-fg-"+W);break;case 50331648:var re=E.rgba.toColor(W>>16&255,W>>8&255,255&W);this._applyMinimumContrast(q,te,re,F,X,Y)||this._addStyle(q,"color:#"+p(W.toString(16),"0",6));break;default:this._applyMinimumContrast(q,te,this._colors.foreground,F,X,void 0)||K&&q.classList.add("xterm-fg-"+b.INVERTED_DEFAULT_COLOR)}O.appendChild(q),B=H}}return O},e.prototype._applyMinimumContrast=function(u,f,d,_,v,y){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,R.excludeFromContrastRatioDemands)(_.getCode()))return!1;var b=void 0;return v||y||(b=this._colors.contrastCache.getColor(f.rgba,d.rgba)),void 0===b&&(b=E.color.ensureContrastRatio(v||f,y||d,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((v||f).rgba,(y||d).rgba,null!=b?b:null)),!!b&&(this._addStyle(u,"color:"+b.css),!0)},e.prototype._addStyle=function(u,f){u.setAttribute("style",""+(u.getAttribute("style")||"")+f+";")},e.prototype._isCellInSelection=function(u,f){var d=this._selectionStart,_=this._selectionEnd;return!(!d||!_)&&(this._columnSelectMode?d[0]<=_[0]?u>=d[0]&&f>=d[1]&&u<_[0]&&f<=_[1]:u<d[0]&&f>=d[1]&&u>=_[0]&&f<=_[1]:f>d[1]&&f<_[1]||d[1]===_[1]&&f===d[1]&&u>=d[0]&&u<_[0]||d[1]<_[1]&&f===_[1]&&u<_[0]||d[1]<_[1]&&f===d[1]&&u>=d[0])},_([v(2,k.ICharacterJoinerService),v(3,L.IOptionsService),v(4,L.ICoreService),v(5,L.IDecorationService)],e)}();function p(u,f,d){for(;u.length<d;)u=f+u;return u}f.DomRendererRowFactory=A},456:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SelectionModel=void 0;var d=function(){function e(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(u=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(u=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var u},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var u=this.selectionStart,f=this.selectionEnd;return!(!u||!f)&&(u[1]>f[1]||u[1]===f[1]&&u[0]>f[0])},e.prototype.onTrim=function(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();f.SelectionModel=d},428:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.CharSizeService=void 0;var y=d(2585),b=d(8460),C=function(){function e(u,f,d){this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=new b.EventEmitter,this._measureStrategy=new S(u,f,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var u=this._measureStrategy.measure();u.width===this.width&&u.height===this.height||(this.width=u.width,this.height=u.height,this._onCharSizeChange.fire())},_([v(2,y.IOptionsService)],e)}();f.CharSizeService=C;var S=function(){function e(u,f,d){this._document=u,this._parentElement=f,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var u=this._measureElement.getBoundingClientRect();return 0!==u.width&&0!==u.height&&(this._result.width=u.width,this._result.height=Math.ceil(u.height)),this._result},e}()},4269:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.CharacterJoinerService=f.JoinedCellData=void 0;var C=d(3734),S=d(643),L=d(511),E=d(2585),k=function(u){function t(f,d,_){var v=u.call(this)||this;return v.content=0,v.combinedData="",v.fg=f.fg,v.bg=f.bg,v.combinedData=d,v._width=_,v}return v(t,u),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(u){throw Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(C.AttributeData);f.JoinedCellData=k;var x=function(){function e(u){this._bufferService=u,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new L.CellData}return e.prototype.register=function(u){var f={id:this._nextCharacterJoinerId++,handler:u};return this._characterJoiners.push(f),f.id},e.prototype.deregister=function(u){for(var f=0;f<this._characterJoiners.length;f++)if(this._characterJoiners[f].id===u)return this._characterJoiners.splice(f,1),!0;return!1},e.prototype.getJoinedCharacters=function(u){if(0===this._characterJoiners.length)return[];var f=this._bufferService.buffer.lines.get(u);if(!f||0===f.length)return[];for(var d=[],_=f.translateToString(!0),v=0,y=0,b=0,C=f.getFg(0),L=f.getBg(0),E=0;E<f.getTrimmedLength();E++)if(f.loadCell(E,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==C||this._workCell.bg!==L){if(E-v>1)for(var k=this._getJoinedRanges(_,b,y,f,v),x=0;x<k.length;x++)d.push(k[x]);v=E,b=y,C=this._workCell.fg,L=this._workCell.bg}y+=this._workCell.getChars().length||S.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-v>1)for(k=this._getJoinedRanges(_,b,y,f,v),x=0;x<k.length;x++)d.push(k[x]);return d},e.prototype._getJoinedRanges=function(u,f,d,_,v){var y=u.substring(f,d),b=[];try{b=this._characterJoiners[0].handler(y)}catch(u){console.error(u)}for(var C=1;C<this._characterJoiners.length;C++)try{for(var S=this._characterJoiners[C].handler(y),L=0;L<S.length;L++)e._mergeRanges(b,S[L])}catch(u){console.error(u)}return this._stringRangesToCellRanges(b,_,v),b},e.prototype._stringRangesToCellRanges=function(u,f,d){var _=0,v=!1,y=0,b=u[_];if(b){for(var C=d;C<this._bufferService.cols;C++){var L=f.getWidth(C),E=f.getString(C).length||S.WHITESPACE_CELL_CHAR.length;if(0!==L){if(!v&&b[0]<=y&&(b[0]=C,v=!0),b[1]<=y){if(b[1]=C,!(b=u[++_]))break;b[0]<=y?(b[0]=C,v=!0):v=!1}y+=E}}b&&(b[1]=this._bufferService.cols)}},e._mergeRanges=function(u,f){for(var d=!1,_=0;_<u.length;_++){var v=u[_];if(d){if(f[1]<=v[0])return u[_-1][1]=f[1],u;if(f[1]<=v[1])return u[_-1][1]=Math.max(f[1],v[1]),u.splice(_,1),u;u.splice(_,1),_--}else{if(f[1]<=v[0])return u.splice(_,0,f),u;if(f[1]<=v[1])return v[0]=Math.min(f[0],v[0]),u;f[0]<v[1]&&(v[0]=Math.min(f[0],v[0]),d=!0)}}return d?u[u.length-1][1]=f[1]:u.push(f),u},e=y([b(0,E.IBufferService)],e)}();f.CharacterJoinerService=x},5114:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CoreBrowserService=void 0;var d=function(){function e(u){this._textarea=u}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();f.CoreBrowserService=d},8934:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.MouseService=void 0;var y=d(4725),b=d(9806),C=function(){function e(u,f){this._renderService=u,this._charSizeService=f}return e.prototype.getCoords=function(u,f,d,_,v){return(0,b.getCoords)(window,u,f,d,_,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,v)},e.prototype.getRawByteCoords=function(u,f,d,_){var v=this.getCoords(u,f,d,_);return(0,b.getRawByteCoords)(v)},_([v(0,y.IRenderService),v(1,y.ICharSizeService)],e)}();f.MouseService=C},3230:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.RenderService=void 0;var C=d(6193),S=d(8460),L=d(844),E=d(5596),k=d(3656),x=d(2585),R=d(4725),A=function(u){function t(f,d,_,v,y,b,L){var x=u.call(this)||this;if(x._renderer=f,x._rowCount=d,x._charSizeService=y,x._isPaused=!1,x._needsFullRefresh=!1,x._isNextRenderRedrawOnly=!0,x._needsSelectionRefresh=!1,x._canvasWidth=0,x._canvasHeight=0,x._selectionState={start:void 0,end:void 0,columnSelectMode:!1},x._onDimensionsChange=new S.EventEmitter,x._onRenderedViewportChange=new S.EventEmitter,x._onRender=new S.EventEmitter,x._onRefreshRequest=new S.EventEmitter,x.register({dispose:function(){return x._renderer.dispose()}}),x._renderDebouncer=new C.RenderDebouncer((function(u,f){return x._renderRows(u,f)})),x.register(x._renderDebouncer),x._screenDprMonitor=new E.ScreenDprMonitor,x._screenDprMonitor.setListener((function(){return x.onDevicePixelRatioChange()})),x.register(x._screenDprMonitor),x.register(L.onResize((function(){return x._fullRefresh()}))),x.register(L.buffers.onBufferActivate((function(){var u;return null===(u=x._renderer)||void 0===u?void 0:u.clear()}))),x.register(v.onOptionChange((function(){return x._handleOptionsChanged()}))),x.register(x._charSizeService.onCharSizeChange((function(){return x.onCharSizeChanged()}))),x.register(b.onDecorationRegistered((function(){return x._fullRefresh()}))),x.register(b.onDecorationRemoved((function(){return x._fullRefresh()}))),x._renderer.onRequestRedraw((function(u){return x.refreshRows(u.start,u.end,!0)})),x.register((0,k.addDisposableDomListener)(window,"resize",(function(){return x.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var R=new IntersectionObserver((function(u){return x._onIntersectionChange(u[u.length-1])}),{threshold:0});R.observe(_),x.register({dispose:function(){return R.disconnect()}})}return x}return v(t,u),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(u){this._isPaused=void 0===u.isIntersecting?0===u.intersectionRatio:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(u,f,d){void 0===d&&(d=!1),this._isPaused?this._needsFullRefresh=!0:(d||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,f,this._rowCount))},t.prototype._renderRows=function(u,f){this._renderer.renderRows(u,f),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:u,end:f}),this._onRender.fire({start:u,end:f}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(u,f){this._rowCount=f,this._fireOnCanvasResize()},t.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){u.prototype.dispose.call(this)},t.prototype.setRenderer=function(u){var f=this;this._renderer.dispose(),this._renderer=u,this._renderer.onRequestRedraw((function(u){return f.refreshRows(u.start,u.end,!0)})),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype.addRefreshCallback=function(u){return this._renderDebouncer.addRefreshCallback(u)},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.clearTextureAtlas=function(){var u,f;null===(f=null===(u=this._renderer)||void 0===u?void 0:u.clearTextureAtlas)||void 0===f||f.call(u),this._fullRefresh()},t.prototype.setColors=function(u){this._renderer.setColors(u),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(u,f){this._renderer.onResize(u,f),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(u,f,d){this._selectionState.start=u,this._selectionState.end=f,this._selectionState.columnSelectMode=d,this._renderer.onSelectionChanged(u,f,d)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},y([b(3,x.IOptionsService),b(4,R.ICharSizeService),b(5,x.IDecorationService),b(6,x.IBufferService)],t)}(L.Disposable);f.RenderService=A},9312:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.SelectionService=void 0;var C=d(6114),S=d(456),L=d(511),E=d(8460),k=d(4725),x=d(2585),R=d(9806),A=d(9504),M=d(844),O=d(4841),D=/ /g,T=function(u){function t(f,d,_,v,y,b,C,k){var x=u.call(this)||this;return x._element=f,x._screenElement=d,x._linkifier=_,x._bufferService=v,x._coreService=y,x._mouseService=b,x._optionsService=C,x._renderService=k,x._dragScrollAmount=0,x._enabled=!0,x._workCell=new L.CellData,x._mouseDownTimeStamp=0,x._oldHasSelection=!1,x._oldSelectionStart=void 0,x._oldSelectionEnd=void 0,x._onLinuxMouseSelection=x.register(new E.EventEmitter),x._onRedrawRequest=x.register(new E.EventEmitter),x._onSelectionChange=x.register(new E.EventEmitter),x._onRequestScrollLines=x.register(new E.EventEmitter),x._mouseMoveListener=function(u){return x._onMouseMove(u)},x._mouseUpListener=function(u){return x._onMouseUp(u)},x._coreService.onUserInput((function(){x.hasSelection&&x.clearSelection()})),x._trimListener=x._bufferService.buffer.lines.onTrim((function(u){return x._onTrim(u)})),x.register(x._bufferService.buffers.onBufferActivate((function(u){return x._onBufferActivate(u)}))),x.enable(),x._model=new S.SelectionModel(x._bufferService),x._activeSelectionMode=0,x}return v(t,u),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var u=this._model.finalSelectionStart,f=this._model.finalSelectionEnd;return!(!u||!f||u[0]===f[0]&&u[1]===f[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var u=this._model.finalSelectionStart,f=this._model.finalSelectionEnd;if(!u||!f)return"";var d=this._bufferService.buffer,_=[];if(3===this._activeSelectionMode){if(u[0]===f[0])return"";for(var v=u[0]<f[0]?u[0]:f[0],y=u[0]<f[0]?f[0]:u[0],b=u[1];b<=f[1];b++){var S=d.translateBufferLineToString(b,!0,v,y);_.push(S)}}else{var L=u[1]===f[1]?f[0]:void 0;for(_.push(d.translateBufferLineToString(u[1],!0,u[0],L)),b=u[1]+1;b<=f[1]-1;b++){var E=d.lines.get(b);S=d.translateBufferLineToString(b,!0),(null==E?void 0:E.isWrapped)?_[_.length-1]+=S:_.push(S)}u[1]!==f[1]&&(E=d.lines.get(f[1]),S=d.translateBufferLineToString(f[1],!0,0,f[0]),E&&E.isWrapped?_[_.length-1]+=S:_.push(S))}return _.map((function(u){return u.replace(D," ")})).join(C.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(u){var f=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return f._refresh()}))),C.isLinux&&u&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype._isClickInSelection=function(u){var f=this._getMouseBufferCoords(u),d=this._model.finalSelectionStart,_=this._model.finalSelectionEnd;return!!(d&&_&&f)&&this._areCoordsInSelection(f,d,_)},t.prototype.isCellInSelection=function(u,f){var d=this._model.finalSelectionStart,_=this._model.finalSelectionEnd;return!(!d||!_)&&this._areCoordsInSelection([u,f],d,_)},t.prototype._areCoordsInSelection=function(u,f,d){return u[1]>f[1]&&u[1]<d[1]||f[1]===d[1]&&u[1]===f[1]&&u[0]>=f[0]&&u[0]<d[0]||f[1]<d[1]&&u[1]===d[1]&&u[0]<d[0]||f[1]<d[1]&&u[1]===f[1]&&u[0]>=f[0]},t.prototype._selectWordAtCursor=function(u,f){var d,_,v=null===(_=null===(d=this._linkifier.currentLink)||void 0===d?void 0:d.link)||void 0===_?void 0:_.range;if(v)return this._model.selectionStart=[v.start.x-1,v.start.y-1],this._model.selectionStartLength=(0,O.getRangeLength)(v,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var y=this._getMouseBufferCoords(u);return!!y&&(this._selectWordAt(y,f),this._model.selectionEnd=void 0,!0)},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(u,f){this._model.clearSelection(),u=Math.max(u,0),f=Math.min(f,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,u],this._model.selectionEnd=[this._bufferService.cols,f],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(u){this._model.onTrim(u)&&this.refresh()},t.prototype._getMouseBufferCoords=function(u){var f=this._mouseService.getCoords(u,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(f)return f[0]--,f[1]--,f[1]+=this._bufferService.buffer.ydisp,f},t.prototype._getMouseEventScrollAmount=function(u){var f=(0,R.getCoordsRelativeToElement)(window,u,this._screenElement)[1],d=this._renderService.dimensions.canvasHeight;return f>=0&&f<=d?0:(f>d&&(f-=d),f=Math.min(Math.max(f,-50),50),(f/=50)/Math.abs(f)+Math.round(14*f))},t.prototype.shouldForceSelection=function(u){return C.isMac?u.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:u.shiftKey},t.prototype.onMouseDown=function(u){if(this._mouseDownTimeStamp=u.timeStamp,(2!==u.button||!this.hasSelection)&&0===u.button){if(!this._enabled){if(!this.shouldForceSelection(u))return;u.stopPropagation()}u.preventDefault(),this._dragScrollAmount=0,this._enabled&&u.shiftKey?this._onIncrementalClick(u):1===u.detail?this._onSingleClick(u):2===u.detail?this._onDoubleClick(u):3===u.detail&&this._onTripleClick(u),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var u=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return u._dragScroll()}),50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(u){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(u))},t.prototype._onSingleClick=function(u){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(u)?3:0,this._model.selectionStart=this._getMouseBufferCoords(u),this._model.selectionStart){this._model.selectionEnd=void 0;var f=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);f&&f.length!==this._model.selectionStart[0]&&0===f.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(u){this._selectWordAtCursor(u,!0)&&(this._activeSelectionMode=1)},t.prototype._onTripleClick=function(u){var f=this._getMouseBufferCoords(u);f&&(this._activeSelectionMode=2,this._selectLineAt(f[1]))},t.prototype.shouldColumnSelect=function(u){return u.altKey&&!(C.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(u){if(u.stopImmediatePropagation(),this._model.selectionStart){var f=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(u),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(u),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var d=this._bufferService.buffer;if(this._model.selectionEnd[1]<d.lines.length){var _=d.lines.get(this._model.selectionEnd[1]);_&&0===_.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}f&&f[0]===this._model.selectionEnd[0]&&f[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var u=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(u.ydisp+this._bufferService.rows,u.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=u.ydisp),this.refresh()}},t.prototype._onMouseUp=function(u){var f=u.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&f<500&&u.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var d=this._mouseService.getCoords(u,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(d&&void 0!==d[0]&&void 0!==d[1]){var _=(0,A.moveToCellSequence)(d[0]-1,d[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(_,!0)}}}else this._fireEventIfSelectionChanged()},t.prototype._fireEventIfSelectionChanged=function(){var u=this._model.finalSelectionStart,f=this._model.finalSelectionEnd,d=!(!u||!f||u[0]===f[0]&&u[1]===f[1]);d?u&&f&&(this._oldSelectionStart&&this._oldSelectionEnd&&u[0]===this._oldSelectionStart[0]&&u[1]===this._oldSelectionStart[1]&&f[0]===this._oldSelectionEnd[0]&&f[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(u,f,d)):this._oldHasSelection&&this._fireOnSelectionChange(u,f,d)},t.prototype._fireOnSelectionChange=function(u,f,d){this._oldSelectionStart=u,this._oldSelectionEnd=f,this._oldHasSelection=d,this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(u){var f=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=u.activeBuffer.lines.onTrim((function(u){return f._onTrim(u)}))},t.prototype._convertViewportColToCharacterIndex=function(u,f){for(var d=f[0],_=0;f[0]>=_;_++){var v=u.loadCell(_,this._workCell).getChars().length;0===this._workCell.getWidth()?d--:v>1&&f[0]!==_&&(d+=v-1)}return d},t.prototype.setSelection=function(u,f,d){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[u,f],this._model.selectionStartLength=d,this.refresh(),this._fireEventIfSelectionChanged()},t.prototype.rightClickSelect=function(u){this._isClickInSelection(u)||(this._selectWordAtCursor(u,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},t.prototype._getWordAt=function(u,f,d,_){if(void 0===d&&(d=!0),void 0===_&&(_=!0),!(u[0]>=this._bufferService.cols)){var v=this._bufferService.buffer,y=v.lines.get(u[1]);if(y){var b=v.translateBufferLineToString(u[1],!1),C=this._convertViewportColToCharacterIndex(y,u),S=C,L=u[0]-C,E=0,k=0,x=0,R=0;if(" "===b.charAt(C)){for(;C>0&&" "===b.charAt(C-1);)C--;for(;S<b.length&&" "===b.charAt(S+1);)S++}else{var A=u[0],M=u[0];0===y.getWidth(A)&&(E++,A--),2===y.getWidth(M)&&(k++,M++);var O=y.getString(M).length;for(O>1&&(R+=O-1,S+=O-1);A>0&&C>0&&!this._isCharWordSeparator(y.loadCell(A-1,this._workCell));){y.loadCell(A-1,this._workCell);var D=this._workCell.getChars().length;0===this._workCell.getWidth()?(E++,A--):D>1&&(x+=D-1,C-=D-1),C--,A--}for(;M<y.length&&S+1<b.length&&!this._isCharWordSeparator(y.loadCell(M+1,this._workCell));){y.loadCell(M+1,this._workCell);var T=this._workCell.getChars().length;2===this._workCell.getWidth()?(k++,M++):T>1&&(R+=T-1,S+=T-1),S++,M++}}S++;var B=C+L-E+x,P=Math.min(this._bufferService.cols,S-C+E+k-x-R);if(f||""!==b.slice(C,S).trim()){if(d&&0===B&&32!==y.getCodePoint(0)){var I=v.lines.get(u[1]-1);if(I&&y.isWrapped&&32!==I.getCodePoint(this._bufferService.cols-1)){var H=this._getWordAt([this._bufferService.cols-1,u[1]-1],!1,!0,!1);if(H){var F=this._bufferService.cols-H.start;B-=F,P+=F}}}if(_&&B+P===this._bufferService.cols&&32!==y.getCodePoint(this._bufferService.cols-1)){var j=v.lines.get(u[1]+1);if((null==j?void 0:j.isWrapped)&&32!==j.getCodePoint(0)){var q=this._getWordAt([0,u[1]+1],!1,!1,!0);q&&(P+=q.length)}}return{start:B,length:P}}}}},t.prototype._selectWordAt=function(u,f){var d=this._getWordAt(u,f);if(d){for(;d.start<0;)d.start+=this._bufferService.cols,u[1]--;this._model.selectionStart=[d.start,u[1]],this._model.selectionStartLength=d.length}},t.prototype._selectToWordAt=function(u){var f=this._getWordAt(u,!0);if(f){for(var d=u[1];f.start<0;)f.start+=this._bufferService.cols,d--;if(!this._model.areSelectionValuesReversed())for(;f.start+f.length>this._bufferService.cols;)f.length-=this._bufferService.cols,d++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?f.start:f.start+f.length,d]}},t.prototype._isCharWordSeparator=function(u){return 0!==u.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(u.getChars())>=0},t.prototype._selectLineAt=function(u){var f=this._bufferService.buffer.getWrappedRangeForLine(u),d={start:{x:0,y:f.first},end:{x:this._bufferService.cols-1,y:f.last}};this._model.selectionStart=[0,f.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,O.getRangeLength)(d,this._bufferService.cols)},y([b(3,x.IBufferService),b(4,x.ICoreService),b(5,k.IMouseService),b(6,x.IOptionsService),b(7,k.IRenderService)],t)}(M.Disposable);f.SelectionService=T},4725:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ICharacterJoinerService=f.ISoundService=f.ISelectionService=f.IRenderService=f.IMouseService=f.ICoreBrowserService=f.ICharSizeService=void 0;var _=d(8343);f.ICharSizeService=(0,_.createDecorator)("CharSizeService"),f.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),f.IMouseService=(0,_.createDecorator)("MouseService"),f.IRenderService=(0,_.createDecorator)("RenderService"),f.ISelectionService=(0,_.createDecorator)("SelectionService"),f.ISoundService=(0,_.createDecorator)("SoundService"),f.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService")},357:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.SoundService=void 0;var y=d(2585),b=function(){function e(u){this._optionsService=u}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var u=window.AudioContext||window.webkitAudioContext;if(!u)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new u}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var u=e.audioContext;if(u){var f=u.createBufferSource();u.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),(function(d){f.buffer=d,f.connect(u.destination),f.start(0)}))}},e.prototype._base64ToArrayBuffer=function(u){for(var f=window.atob(u),d=f.length,_=new Uint8Array(d),v=0;v<d;v++)_[v]=f.charCodeAt(v);return _.buffer},e.prototype._removeMimeType=function(u){return u.split(",")[1]},e=_([v(0,y.IOptionsService)],e)}();f.SoundService=b},6349:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CircularList=void 0;var _=d(8460),v=function(){function e(u){this._maxLength=u,this.onDeleteEmitter=new _.EventEmitter,this.onInsertEmitter=new _.EventEmitter,this.onTrimEmitter=new _.EventEmitter,this._array=Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(u){if(this._maxLength!==u){for(var f=Array(u),d=0;d<Math.min(u,this.length);d++)f[d]=this._array[this._getCyclicIndex(d)];this._array=f,this._maxLength=u,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(u){if(u>this._length)for(var f=this._length;f<u;f++)this._array[f]=void 0;this._length=u},enumerable:!1,configurable:!0}),e.prototype.get=function(u){return this._array[this._getCyclicIndex(u)]},e.prototype.set=function(u,f){this._array[this._getCyclicIndex(u)]=f},e.prototype.push=function(u){this._array[this._getCyclicIndex(this._length)]=u,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(u,f){for(var d=[],_=2;_<arguments.length;_++)d[_-2]=arguments[_];if(f){for(var v=u;v<this._length-f;v++)this._array[this._getCyclicIndex(v)]=this._array[this._getCyclicIndex(v+f)];this._length-=f,this.onDeleteEmitter.fire({index:u,amount:f})}for(v=this._length-1;v>=u;v--)this._array[this._getCyclicIndex(v+d.length)]=this._array[this._getCyclicIndex(v)];for(v=0;v<d.length;v++)this._array[this._getCyclicIndex(u+v)]=d[v];if(d.length&&this.onInsertEmitter.fire({index:u,amount:d.length}),this._length+d.length>this._maxLength){var y=this._length+d.length-this._maxLength;this._startIndex+=y,this._length=this._maxLength,this.onTrimEmitter.fire(y)}else this._length+=d.length},e.prototype.trimStart=function(u){u>this._length&&(u=this._length),this._startIndex+=u,this._length-=u,this.onTrimEmitter.fire(u)},e.prototype.shiftElements=function(u,f,d){if(!(f<=0)){if(u<0||u>=this._length)throw Error("start argument out of range");if(u+d<0)throw Error("Cannot shift elements in list beyond index 0");if(d>0){for(var _=f-1;_>=0;_--)this.set(u+_+d,this.get(u+_));var v=u+f+d-this._length;if(v>0)for(this._length+=v;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(_=0;_<f;_++)this.set(u+_+d,this.get(u+_))}},e.prototype._getCyclicIndex=function(u){return(this._startIndex+u)%this._maxLength},e}();f.CircularList=v},1439:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.clone=void 0,f.clone=function e(u,f){if(void 0===f&&(f=5),"object"!=typeof u)return u;var d=Array.isArray(u)?[]:{};for(var _ in u)d[_]=f<=1?u[_]:u[_]&&e(u[_],f-1);return d}},8055:function(u,f){var d,_,v,y,b=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b};function a(u){var f=u.toString(16);return f.length<2?"0"+f:f}function c(u,f){return u<f?(f+.05)/(u+.05):(u+.05)/(f+.05)}Object.defineProperty(f,"__esModule",{value:!0}),f.contrastRatio=f.toPaddedHex=f.rgba=f.rgb=f.css=f.color=f.channels=void 0,function(u){u.toCss=function(u,f,d,_){return void 0!==_?"#"+a(u)+a(f)+a(d)+a(_):"#"+a(u)+a(f)+a(d)},u.toRgba=function(u,f,d,_){return void 0===_&&(_=255),(u<<24|f<<16|d<<8|_)>>>0}}(d=f.channels||(f.channels={})),(_=f.color||(f.color={})).blend=function(u,f){var _=(255&f.rgba)/255;if(1===_)return{css:f.css,rgba:f.rgba};var v=f.rgba>>24&255,y=f.rgba>>16&255,b=f.rgba>>8&255,C=u.rgba>>24&255,S=u.rgba>>16&255,L=u.rgba>>8&255,E=C+Math.round((v-C)*_),k=S+Math.round((y-S)*_),x=L+Math.round((b-L)*_);return{css:d.toCss(E,k,x),rgba:d.toRgba(E,k,x)}},_.isOpaque=function(u){return 255==(255&u.rgba)},_.ensureContrastRatio=function(u,f,d){var _=y.ensureContrastRatio(u.rgba,f.rgba,d);if(_)return y.toColor(_>>24&255,_>>16&255,_>>8&255)},_.opaque=function(u){var f=(255|u.rgba)>>>0,_=b(y.toChannels(f),3),v=_[0],C=_[1],S=_[2];return{css:d.toCss(v,C,S),rgba:f}},_.opacity=function(u,f){var _=Math.round(255*f),v=b(y.toChannels(u.rgba),3),C=v[0],S=v[1],L=v[2];return{css:d.toCss(C,S,L,_),rgba:d.toRgba(C,S,L,_)}},_.toColorRGB=function(u){return[u.rgba>>24&255,u.rgba>>16&255,u.rgba>>8&255]},(f.css||(f.css={})).toColor=function(u){if(u.match(/#[0-9a-f]{3,8}/i))switch(u.length){case 4:var f=parseInt(u.slice(1,2).repeat(2),16),d=parseInt(u.slice(2,3).repeat(2),16),_=parseInt(u.slice(3,4).repeat(2),16);return y.toColor(f,d,_);case 5:f=parseInt(u.slice(1,2).repeat(2),16),d=parseInt(u.slice(2,3).repeat(2),16),_=parseInt(u.slice(3,4).repeat(2),16);var v=parseInt(u.slice(4,5).repeat(2),16);return y.toColor(f,d,_,v);case 7:return{css:u,rgba:(parseInt(u.slice(1),16)<<8|255)>>>0};case 9:return{css:u,rgba:parseInt(u.slice(1),16)>>>0}}var b=u.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return f=parseInt(b[1]),d=parseInt(b[2]),_=parseInt(b[3]),v=Math.round(255*(void 0===b[5]?1:parseFloat(b[5]))),y.toColor(f,d,_,v);throw Error("css.toColor: Unsupported css format")},function(u){function t(u,f,d){var _=u/255,v=f/255,y=d/255;return.2126*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.7152*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.0722*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))}u.relativeLuminance=function(u){return t(u>>16&255,u>>8&255,255&u)},u.relativeLuminance2=t}(v=f.rgb||(f.rgb={})),function(u){function t(u,f,d){for(var _=u>>24&255,y=u>>16&255,b=u>>8&255,C=f>>24&255,S=f>>16&255,L=f>>8&255,E=c(v.relativeLuminance2(C,S,L),v.relativeLuminance2(_,y,b));E<d&&(C>0||S>0||L>0);)C-=Math.max(0,Math.ceil(.1*C)),S-=Math.max(0,Math.ceil(.1*S)),L-=Math.max(0,Math.ceil(.1*L)),E=c(v.relativeLuminance2(C,S,L),v.relativeLuminance2(_,y,b));return(C<<24|S<<16|L<<8|255)>>>0}function i(u,f,d){for(var _=u>>24&255,y=u>>16&255,b=u>>8&255,C=f>>24&255,S=f>>16&255,L=f>>8&255,E=c(v.relativeLuminance2(C,S,L),v.relativeLuminance2(_,y,b));E<d&&(C<255||S<255||L<255);)C=Math.min(255,C+Math.ceil(.1*(255-C))),S=Math.min(255,S+Math.ceil(.1*(255-S))),L=Math.min(255,L+Math.ceil(.1*(255-L))),E=c(v.relativeLuminance2(C,S,L),v.relativeLuminance2(_,y,b));return(C<<24|S<<16|L<<8|255)>>>0}u.ensureContrastRatio=function(u,f,d){var _=v.relativeLuminance(u>>8),y=v.relativeLuminance(f>>8);if(c(_,y)<d){if(y<_){var b=t(u,f,d),C=c(_,v.relativeLuminance(b>>8));if(C<d){var S=i(u,u,d);return C>c(_,v.relativeLuminance(S>>8))?b:S}return b}var L=i(u,f,d),E=c(_,v.relativeLuminance(L>>8));return E<d?(S=t(u,u,d),E>c(_,v.relativeLuminance(S>>8))?L:S):L}},u.reduceLuminance=t,u.increaseLuminance=i,u.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},u.toColor=function(u,f,_,v){return{css:d.toCss(u,f,_,v),rgba:d.toRgba(u,f,_,v)}}}(y=f.rgba||(f.rgba={})),f.toPaddedHex=a,f.contrastRatio=c},8969:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.CoreTerminal=void 0;var b=d(844),C=d(2585),S=d(4348),L=d(7866),E=d(744),k=d(7302),x=d(6975),R=d(8460),A=d(1753),M=d(3730),O=d(1480),D=d(7994),T=d(9282),B=d(5435),P=d(5981),I=!1,H=function(u){function t(f){var d=u.call(this)||this;return d._onBinary=new R.EventEmitter,d._onData=new R.EventEmitter,d._onLineFeed=new R.EventEmitter,d._onResize=new R.EventEmitter,d._onScroll=new R.EventEmitter,d._onWriteParsed=new R.EventEmitter,d._instantiationService=new S.InstantiationService,d.optionsService=new k.OptionsService(f),d._instantiationService.setService(C.IOptionsService,d.optionsService),d._bufferService=d.register(d._instantiationService.createInstance(E.BufferService)),d._instantiationService.setService(C.IBufferService,d._bufferService),d._logService=d._instantiationService.createInstance(L.LogService),d._instantiationService.setService(C.ILogService,d._logService),d.coreService=d.register(d._instantiationService.createInstance(x.CoreService,(function(){return d.scrollToBottom()}))),d._instantiationService.setService(C.ICoreService,d.coreService),d.coreMouseService=d._instantiationService.createInstance(A.CoreMouseService),d._instantiationService.setService(C.ICoreMouseService,d.coreMouseService),d._dirtyRowService=d._instantiationService.createInstance(M.DirtyRowService),d._instantiationService.setService(C.IDirtyRowService,d._dirtyRowService),d.unicodeService=d._instantiationService.createInstance(O.UnicodeService),d._instantiationService.setService(C.IUnicodeService,d.unicodeService),d._charsetService=d._instantiationService.createInstance(D.CharsetService),d._instantiationService.setService(C.ICharsetService,d._charsetService),d._inputHandler=new B.InputHandler(d._bufferService,d._charsetService,d.coreService,d._dirtyRowService,d._logService,d.optionsService,d.coreMouseService,d.unicodeService),d.register((0,R.forwardEvent)(d._inputHandler.onLineFeed,d._onLineFeed)),d.register(d._inputHandler),d.register((0,R.forwardEvent)(d._bufferService.onResize,d._onResize)),d.register((0,R.forwardEvent)(d.coreService.onData,d._onData)),d.register((0,R.forwardEvent)(d.coreService.onBinary,d._onBinary)),d.register(d.optionsService.onOptionChange((function(u){return d._updateOptions(u)}))),d.register(d._bufferService.onScroll((function(u){d._onScroll.fire({position:d._bufferService.buffer.ydisp,source:0}),d._dirtyRowService.markRangeDirty(d._bufferService.buffer.scrollTop,d._bufferService.buffer.scrollBottom)}))),d.register(d._inputHandler.onScroll((function(u){d._onScroll.fire({position:d._bufferService.buffer.ydisp,source:0}),d._dirtyRowService.markRangeDirty(d._bufferService.buffer.scrollTop,d._bufferService.buffer.scrollBottom)}))),d._writeBuffer=new P.WriteBuffer((function(u,f){return d._inputHandler.parse(u,f)})),d.register((0,R.forwardEvent)(d._writeBuffer.onWriteParsed,d._onWriteParsed)),d}return v(t,u),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){var u=this;return this._onScrollApi||(this._onScrollApi=new R.EventEmitter,this.register(this._onScroll.event((function(f){var d;null===(d=u._onScrollApi)||void 0===d||d.fire(f.position)})))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},set:function(u){for(var f in u)this.optionsService.options[f]=u[f]},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var f;this._isDisposed||(u.prototype.dispose.call(this),null===(f=this._windowsMode)||void 0===f||f.dispose(),this._windowsMode=void 0)},t.prototype.write=function(u,f){this._writeBuffer.write(u,f)},t.prototype.writeSync=function(u,f){this._logService.logLevel<=C.LogLevelEnum.WARN&&!I&&(this._logService.warn("writeSync is unreliable and will be removed soon."),I=!0),this._writeBuffer.writeSync(u,f)},t.prototype.resize=function(u,f){isNaN(u)||isNaN(f)||(u=Math.max(u,E.MINIMUM_COLS),f=Math.max(f,E.MINIMUM_ROWS),this._bufferService.resize(u,f))},t.prototype.scroll=function(u,f){void 0===f&&(f=!1),this._bufferService.scroll(u,f)},t.prototype.scrollLines=function(u,f,d){this._bufferService.scrollLines(u,f,d)},t.prototype.scrollPages=function(u){this._bufferService.scrollPages(u)},t.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},t.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},t.prototype.scrollToLine=function(u){this._bufferService.scrollToLine(u)},t.prototype.registerEscHandler=function(u,f){return this._inputHandler.registerEscHandler(u,f)},t.prototype.registerDcsHandler=function(u,f){return this._inputHandler.registerDcsHandler(u,f)},t.prototype.registerCsiHandler=function(u,f){return this._inputHandler.registerCsiHandler(u,f)},t.prototype.registerOscHandler=function(u,f){return this._inputHandler.registerOscHandler(u,f)},t.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},t.prototype._updateOptions=function(u){var f;switch(u){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():(null===(f=this._windowsMode)||void 0===f||f.dispose(),this._windowsMode=void 0)}},t.prototype._enableWindowsMode=function(){var u=this;if(!this._windowsMode){var f=[];f.push(this.onLineFeed(T.updateWindowsModeWrappedState.bind(null,this._bufferService))),f.push(this.registerCsiHandler({final:"H"},(function(){return(0,T.updateWindowsModeWrappedState)(u._bufferService),!1}))),this._windowsMode={dispose:function(){var u,d;try{for(var _=y(f),v=_.next();!v.done;v=_.next())v.value.dispose()}catch(f){u={error:f}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(u)throw u.error}}}}}},t}(b.Disposable);f.CoreTerminal=H},8460:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.forwardEvent=f.EventEmitter=void 0;var d=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var u=this;return this._event||(this._event=function(f){return u._listeners.push(f),{dispose:function(){if(!u._disposed)for(var d=0;d<u._listeners.length;d++)if(u._listeners[d]===f)return void u._listeners.splice(d,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(u,f){for(var d=[],_=0;_<this._listeners.length;_++)d.push(this._listeners[_]);for(_=0;_<d.length;_++)d[_].call(void 0,u,f)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();f.EventEmitter=d,f.forwardEvent=function(u,f){return u((function(u){return f.fire(u)}))}},5435:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.InputHandler=f.WindowsOptionsReportType=void 0;var y,b=d(2584),C=d(7116),S=d(2015),L=d(844),E=d(8273),k=d(482),x=d(8437),R=d(8460),A=d(643),M=d(511),O=d(3734),D=d(2585),T=d(6242),B=d(6351),P=d(5941),I={"(":0,")":1,"*":2,"+":3,"-":1,".":2},H=131072;function w(u,f){if(u>24)return f.setWinLines||!1;switch(u){case 1:return!!f.restoreWin;case 2:return!!f.minimizeWin;case 3:return!!f.setWinPosition;case 4:return!!f.setWinSizePixels;case 5:return!!f.raiseWin;case 6:return!!f.lowerWin;case 7:return!!f.refreshWin;case 8:return!!f.setWinSizeChars;case 9:return!!f.maximizeWin;case 10:return!!f.fullscreenWin;case 11:return!!f.getWinState;case 13:return!!f.getWinPosition;case 14:return!!f.getWinSizePixels;case 15:return!!f.getScreenSizePixels;case 16:return!!f.getCellSizePixels;case 18:return!!f.getWinSizeChars;case 19:return!!f.getScreenSizeChars;case 20:return!!f.getIconTitle;case 21:return!!f.getWinTitle;case 22:return!!f.pushTitle;case 23:return!!f.popTitle;case 24:return!!f.setWinLines}return!1}!function(u){u[u.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",u[u.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(y=f.WindowsOptionsReportType||(f.WindowsOptionsReportType={}));var F=function(){function e(u,f,d,_){this._bufferService=u,this._coreService=f,this._logService=d,this._optionsService=_,this._data=new Uint32Array(0)}return e.prototype.hook=function(u){this._data=new Uint32Array(0)},e.prototype.put=function(u,f,d){this._data=(0,E.concat)(this._data,u.subarray(f,d))},e.prototype.unhook=function(u){if(!u)return this._data=new Uint32Array(0),!0;var f=(0,k.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),f){case'"q':this._coreService.triggerDataEvent(b.C0.ESC+'P1$r0"q'+b.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(b.C0.ESC+'P1$r61;1"p'+b.C0.ESC+"\\");break;case"r":var d=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(b.C0.ESC+"P1$r"+d+b.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(b.C0.ESC+"P1$r0m"+b.C0.ESC+"\\");break;case" q":var _={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];_-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(b.C0.ESC+"P1$r"+_+" q"+b.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",f),this._coreService.triggerDataEvent(b.C0.ESC+"P0$r"+b.C0.ESC+"\\")}return!0},e}(),j=function(u){function t(f,d,_,v,y,L,E,A,O){void 0===O&&(O=new S.EscapeSequenceParser);var D=u.call(this)||this;D._bufferService=f,D._charsetService=d,D._coreService=_,D._dirtyRowService=v,D._logService=y,D._optionsService=L,D._coreMouseService=E,D._unicodeService=A,D._parser=O,D._parseBuffer=new Uint32Array(4096),D._stringDecoder=new k.StringToUtf32,D._utf8Decoder=new k.Utf8ToUtf32,D._workCell=new M.CellData,D._windowTitle="",D._iconName="",D._windowTitleStack=[],D._iconNameStack=[],D._curAttrData=x.DEFAULT_ATTR_DATA.clone(),D._eraseAttrDataInternal=x.DEFAULT_ATTR_DATA.clone(),D._onRequestBell=new R.EventEmitter,D._onRequestRefreshRows=new R.EventEmitter,D._onRequestReset=new R.EventEmitter,D._onRequestSendFocus=new R.EventEmitter,D._onRequestSyncScrollBar=new R.EventEmitter,D._onRequestWindowsOptionsReport=new R.EventEmitter,D._onA11yChar=new R.EventEmitter,D._onA11yTab=new R.EventEmitter,D._onCursorMove=new R.EventEmitter,D._onLineFeed=new R.EventEmitter,D._onScroll=new R.EventEmitter,D._onTitleChange=new R.EventEmitter,D._onColor=new R.EventEmitter,D._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},D._specialColors=[256,257,258],D.register(D._parser),D._activeBuffer=D._bufferService.buffer,D.register(D._bufferService.buffers.onBufferActivate((function(u){return D._activeBuffer=u.activeBuffer}))),D._parser.setCsiHandlerFallback((function(u,f){D._logService.debug("Unknown CSI code: ",{identifier:D._parser.identToString(u),params:f.toArray()})})),D._parser.setEscHandlerFallback((function(u){D._logService.debug("Unknown ESC code: ",{identifier:D._parser.identToString(u)})})),D._parser.setExecuteHandlerFallback((function(u){D._logService.debug("Unknown EXECUTE code: ",{code:u})})),D._parser.setOscHandlerFallback((function(u,f,d){D._logService.debug("Unknown OSC code: ",{identifier:u,action:f,data:d})})),D._parser.setDcsHandlerFallback((function(u,f,d){"HOOK"===f&&(d=d.toArray()),D._logService.debug("Unknown DCS code: ",{identifier:D._parser.identToString(u),action:f,payload:d})})),D._parser.setPrintHandler((function(u,f,d){return D.print(u,f,d)})),D._parser.registerCsiHandler({final:"@"},(function(u){return D.insertChars(u)})),D._parser.registerCsiHandler({intermediates:" ",final:"@"},(function(u){return D.scrollLeft(u)})),D._parser.registerCsiHandler({final:"A"},(function(u){return D.cursorUp(u)})),D._parser.registerCsiHandler({intermediates:" ",final:"A"},(function(u){return D.scrollRight(u)})),D._parser.registerCsiHandler({final:"B"},(function(u){return D.cursorDown(u)})),D._parser.registerCsiHandler({final:"C"},(function(u){return D.cursorForward(u)})),D._parser.registerCsiHandler({final:"D"},(function(u){return D.cursorBackward(u)})),D._parser.registerCsiHandler({final:"E"},(function(u){return D.cursorNextLine(u)})),D._parser.registerCsiHandler({final:"F"},(function(u){return D.cursorPrecedingLine(u)})),D._parser.registerCsiHandler({final:"G"},(function(u){return D.cursorCharAbsolute(u)})),D._parser.registerCsiHandler({final:"H"},(function(u){return D.cursorPosition(u)})),D._parser.registerCsiHandler({final:"I"},(function(u){return D.cursorForwardTab(u)})),D._parser.registerCsiHandler({final:"J"},(function(u){return D.eraseInDisplay(u)})),D._parser.registerCsiHandler({prefix:"?",final:"J"},(function(u){return D.eraseInDisplay(u)})),D._parser.registerCsiHandler({final:"K"},(function(u){return D.eraseInLine(u)})),D._parser.registerCsiHandler({prefix:"?",final:"K"},(function(u){return D.eraseInLine(u)})),D._parser.registerCsiHandler({final:"L"},(function(u){return D.insertLines(u)})),D._parser.registerCsiHandler({final:"M"},(function(u){return D.deleteLines(u)})),D._parser.registerCsiHandler({final:"P"},(function(u){return D.deleteChars(u)})),D._parser.registerCsiHandler({final:"S"},(function(u){return D.scrollUp(u)})),D._parser.registerCsiHandler({final:"T"},(function(u){return D.scrollDown(u)})),D._parser.registerCsiHandler({final:"X"},(function(u){return D.eraseChars(u)})),D._parser.registerCsiHandler({final:"Z"},(function(u){return D.cursorBackwardTab(u)})),D._parser.registerCsiHandler({final:"`"},(function(u){return D.charPosAbsolute(u)})),D._parser.registerCsiHandler({final:"a"},(function(u){return D.hPositionRelative(u)})),D._parser.registerCsiHandler({final:"b"},(function(u){return D.repeatPrecedingCharacter(u)})),D._parser.registerCsiHandler({final:"c"},(function(u){return D.sendDeviceAttributesPrimary(u)})),D._parser.registerCsiHandler({prefix:">",final:"c"},(function(u){return D.sendDeviceAttributesSecondary(u)})),D._parser.registerCsiHandler({final:"d"},(function(u){return D.linePosAbsolute(u)})),D._parser.registerCsiHandler({final:"e"},(function(u){return D.vPositionRelative(u)})),D._parser.registerCsiHandler({final:"f"},(function(u){return D.hVPosition(u)})),D._parser.registerCsiHandler({final:"g"},(function(u){return D.tabClear(u)})),D._parser.registerCsiHandler({final:"h"},(function(u){return D.setMode(u)})),D._parser.registerCsiHandler({prefix:"?",final:"h"},(function(u){return D.setModePrivate(u)})),D._parser.registerCsiHandler({final:"l"},(function(u){return D.resetMode(u)})),D._parser.registerCsiHandler({prefix:"?",final:"l"},(function(u){return D.resetModePrivate(u)})),D._parser.registerCsiHandler({final:"m"},(function(u){return D.charAttributes(u)})),D._parser.registerCsiHandler({final:"n"},(function(u){return D.deviceStatus(u)})),D._parser.registerCsiHandler({prefix:"?",final:"n"},(function(u){return D.deviceStatusPrivate(u)})),D._parser.registerCsiHandler({intermediates:"!",final:"p"},(function(u){return D.softReset(u)})),D._parser.registerCsiHandler({intermediates:" ",final:"q"},(function(u){return D.setCursorStyle(u)})),D._parser.registerCsiHandler({final:"r"},(function(u){return D.setScrollRegion(u)})),D._parser.registerCsiHandler({final:"s"},(function(u){return D.saveCursor(u)})),D._parser.registerCsiHandler({final:"t"},(function(u){return D.windowOptions(u)})),D._parser.registerCsiHandler({final:"u"},(function(u){return D.restoreCursor(u)})),D._parser.registerCsiHandler({intermediates:"'",final:"}"},(function(u){return D.insertColumns(u)})),D._parser.registerCsiHandler({intermediates:"'",final:"~"},(function(u){return D.deleteColumns(u)})),D._parser.setExecuteHandler(b.C0.BEL,(function(){return D.bell()})),D._parser.setExecuteHandler(b.C0.LF,(function(){return D.lineFeed()})),D._parser.setExecuteHandler(b.C0.VT,(function(){return D.lineFeed()})),D._parser.setExecuteHandler(b.C0.FF,(function(){return D.lineFeed()})),D._parser.setExecuteHandler(b.C0.CR,(function(){return D.carriageReturn()})),D._parser.setExecuteHandler(b.C0.BS,(function(){return D.backspace()})),D._parser.setExecuteHandler(b.C0.HT,(function(){return D.tab()})),D._parser.setExecuteHandler(b.C0.SO,(function(){return D.shiftOut()})),D._parser.setExecuteHandler(b.C0.SI,(function(){return D.shiftIn()})),D._parser.setExecuteHandler(b.C1.IND,(function(){return D.index()})),D._parser.setExecuteHandler(b.C1.NEL,(function(){return D.nextLine()})),D._parser.setExecuteHandler(b.C1.HTS,(function(){return D.tabSet()})),D._parser.registerOscHandler(0,new T.OscHandler((function(u){return D.setTitle(u),D.setIconName(u),!0}))),D._parser.registerOscHandler(1,new T.OscHandler((function(u){return D.setIconName(u)}))),D._parser.registerOscHandler(2,new T.OscHandler((function(u){return D.setTitle(u)}))),D._parser.registerOscHandler(4,new T.OscHandler((function(u){return D.setOrReportIndexedColor(u)}))),D._parser.registerOscHandler(10,new T.OscHandler((function(u){return D.setOrReportFgColor(u)}))),D._parser.registerOscHandler(11,new T.OscHandler((function(u){return D.setOrReportBgColor(u)}))),D._parser.registerOscHandler(12,new T.OscHandler((function(u){return D.setOrReportCursorColor(u)}))),D._parser.registerOscHandler(104,new T.OscHandler((function(u){return D.restoreIndexedColor(u)}))),D._parser.registerOscHandler(110,new T.OscHandler((function(u){return D.restoreFgColor(u)}))),D._parser.registerOscHandler(111,new T.OscHandler((function(u){return D.restoreBgColor(u)}))),D._parser.registerOscHandler(112,new T.OscHandler((function(u){return D.restoreCursorColor(u)}))),D._parser.registerEscHandler({final:"7"},(function(){return D.saveCursor()})),D._parser.registerEscHandler({final:"8"},(function(){return D.restoreCursor()})),D._parser.registerEscHandler({final:"D"},(function(){return D.index()})),D._parser.registerEscHandler({final:"E"},(function(){return D.nextLine()})),D._parser.registerEscHandler({final:"H"},(function(){return D.tabSet()})),D._parser.registerEscHandler({final:"M"},(function(){return D.reverseIndex()})),D._parser.registerEscHandler({final:"="},(function(){return D.keypadApplicationMode()})),D._parser.registerEscHandler({final:">"},(function(){return D.keypadNumericMode()})),D._parser.registerEscHandler({final:"c"},(function(){return D.fullReset()})),D._parser.registerEscHandler({final:"n"},(function(){return D.setgLevel(2)})),D._parser.registerEscHandler({final:"o"},(function(){return D.setgLevel(3)})),D._parser.registerEscHandler({final:"|"},(function(){return D.setgLevel(3)})),D._parser.registerEscHandler({final:"}"},(function(){return D.setgLevel(2)})),D._parser.registerEscHandler({final:"~"},(function(){return D.setgLevel(1)})),D._parser.registerEscHandler({intermediates:"%",final:"@"},(function(){return D.selectDefaultCharset()})),D._parser.registerEscHandler({intermediates:"%",final:"G"},(function(){return D.selectDefaultCharset()}));var m=function(u){B._parser.registerEscHandler({intermediates:"(",final:u},(function(){return D.selectCharset("("+u)})),B._parser.registerEscHandler({intermediates:")",final:u},(function(){return D.selectCharset(")"+u)})),B._parser.registerEscHandler({intermediates:"*",final:u},(function(){return D.selectCharset("*"+u)})),B._parser.registerEscHandler({intermediates:"+",final:u},(function(){return D.selectCharset("+"+u)})),B._parser.registerEscHandler({intermediates:"-",final:u},(function(){return D.selectCharset("-"+u)})),B._parser.registerEscHandler({intermediates:".",final:u},(function(){return D.selectCharset("."+u)})),B._parser.registerEscHandler({intermediates:"/",final:u},(function(){return D.selectCharset("/"+u)}))},B=this;for(var P in C.CHARSETS)m(P);return D._parser.registerEscHandler({intermediates:"#",final:"8"},(function(){return D.screenAlignmentPattern()})),D._parser.setErrorHandler((function(u){return D._logService.error("Parsing error: ",u),u})),D._parser.registerDcsHandler({intermediates:"$",final:"q"},new F(D._bufferService,D._coreService,D._logService,D._optionsService)),D}return v(t,u),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){u.prototype.dispose.call(this)},t.prototype._preserveStack=function(u,f,d,_){this._parseStack.paused=!0,this._parseStack.cursorStartX=u,this._parseStack.cursorStartY=f,this._parseStack.decodedLength=d,this._parseStack.position=_},t.prototype._logSlowResolvingAsync=function(u){this._logService.logLevel<=D.LogLevelEnum.WARN&&Promise.race([u,new Promise((function(u,f){return setTimeout((function(){return f("#SLOW_TIMEOUT")}),5e3)}))]).catch((function(u){if("#SLOW_TIMEOUT"!==u)throw u;console.warn("async parser handler taking longer than 5000 ms")}))},t.prototype.parse=function(u,f){var d,_=this._activeBuffer.x,v=this._activeBuffer.y,y=0,b=this._parseStack.paused;if(b){if(d=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,f))return this._logSlowResolvingAsync(d),d;_=this._parseStack.cursorStartX,v=this._parseStack.cursorStartY,this._parseStack.paused=!1,u.length>H&&(y=this._parseStack.position+H)}if(this._logService.logLevel<=D.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof u?' "'+u+'"':' "'+Array.prototype.map.call(u,(function(u){return String.fromCharCode(u)})).join("")+'"'),"string"==typeof u?u.split("").map((function(u){return u.charCodeAt(0)})):u),this._parseBuffer.length<u.length&&this._parseBuffer.length<H&&(this._parseBuffer=new Uint32Array(Math.min(u.length,H))),b||this._dirtyRowService.clearRange(),u.length>H)for(var C=y;C<u.length;C+=H){var S=C+H<u.length?C+H:u.length,L="string"==typeof u?this._stringDecoder.decode(u.substring(C,S),this._parseBuffer):this._utf8Decoder.decode(u.subarray(C,S),this._parseBuffer);if(d=this._parser.parse(this._parseBuffer,L))return this._preserveStack(_,v,L,C),this._logSlowResolvingAsync(d),d}else if(!b&&(L="string"==typeof u?this._stringDecoder.decode(u,this._parseBuffer):this._utf8Decoder.decode(u,this._parseBuffer),d=this._parser.parse(this._parseBuffer,L)))return this._preserveStack(_,v,L,0),this._logSlowResolvingAsync(d),d;this._activeBuffer.x===_&&this._activeBuffer.y===v||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(u,f,d){var _,v,y=this._charsetService.charset,b=this._optionsService.rawOptions.screenReaderMode,C=this._bufferService.cols,S=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,E=this._curAttrData,x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&d-f>0&&2===x.getWidth(this._activeBuffer.x-1)&&x.setCellFromCodePoint(this._activeBuffer.x-1,0,1,E.fg,E.bg,E.extended);for(var R=f;R<d;++R){if(_=u[R],v=this._unicodeService.wcwidth(_),_<127&&y){var M=y[String.fromCharCode(_)];M&&(_=M.charCodeAt(0))}if(b&&this._onA11yChar.fire((0,k.stringFromCodePoint)(_)),v||!this._activeBuffer.x){if(this._activeBuffer.x+v-1>=C)if(S){for(;this._activeBuffer.x<C;)x.setCellFromCodePoint(this._activeBuffer.x++,0,1,E.fg,E.bg,E.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=C-1,2===v)continue;if(L&&(x.insertCells(this._activeBuffer.x,v,this._activeBuffer.getNullCell(E),E),2===x.getWidth(C-1)&&x.setCellFromCodePoint(C-1,A.NULL_CELL_CODE,A.NULL_CELL_WIDTH,E.fg,E.bg,E.extended)),x.setCellFromCodePoint(this._activeBuffer.x++,_,v,E.fg,E.bg,E.extended),v>0)for(;--v;)x.setCellFromCodePoint(this._activeBuffer.x++,0,0,E.fg,E.bg,E.extended)}else x.getWidth(this._activeBuffer.x-1)?x.addCodepointToCell(this._activeBuffer.x-1,_):x.addCodepointToCell(this._activeBuffer.x-2,_)}d-f>0&&(x.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<C&&d-f>0&&0===x.getWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&x.setCellFromCodePoint(this._activeBuffer.x,0,1,E.fg,E.bg,E.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype.registerCsiHandler=function(u,f){var d=this;return"t"!==u.final||u.prefix||u.intermediates?this._parser.registerCsiHandler(u,f):this._parser.registerCsiHandler(u,(function(u){return!w(u.params[0],d._optionsService.rawOptions.windowOptions)||f(u)}))},t.prototype.registerDcsHandler=function(u,f){return this._parser.registerDcsHandler(u,new B.DcsHandler(f))},t.prototype.registerEscHandler=function(u,f){return this._parser.registerEscHandler(u,f)},t.prototype.registerOscHandler=function(u,f){return this._parser.registerOscHandler(u,new T.OscHandler(f))},t.prototype.bell=function(){return this._onRequestBell.fire(),!0},t.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},t.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},t.prototype.backspace=function(){var u;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(u=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===u?void 0:u.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);f.hasWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},t.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var u=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-u),!0},t.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},t.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},t.prototype._restrictCursor=function(u){void 0===u&&(u=this._bufferService.cols-1),this._activeBuffer.x=Math.min(u,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._setCursor=function(u,f){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=u,this._activeBuffer.y=this._activeBuffer.scrollTop+f):(this._activeBuffer.x=u,this._activeBuffer.y=f),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._moveCursor=function(u,f){this._restrictCursor(),this._setCursor(this._activeBuffer.x+u,this._activeBuffer.y+f)},t.prototype.cursorUp=function(u){var f=this._activeBuffer.y-this._activeBuffer.scrollTop;return f>=0?this._moveCursor(0,-Math.min(f,u.params[0]||1)):this._moveCursor(0,-(u.params[0]||1)),!0},t.prototype.cursorDown=function(u){var f=this._activeBuffer.scrollBottom-this._activeBuffer.y;return f>=0?this._moveCursor(0,Math.min(f,u.params[0]||1)):this._moveCursor(0,u.params[0]||1),!0},t.prototype.cursorForward=function(u){return this._moveCursor(u.params[0]||1,0),!0},t.prototype.cursorBackward=function(u){return this._moveCursor(-(u.params[0]||1),0),!0},t.prototype.cursorNextLine=function(u){return this.cursorDown(u),this._activeBuffer.x=0,!0},t.prototype.cursorPrecedingLine=function(u){return this.cursorUp(u),this._activeBuffer.x=0,!0},t.prototype.cursorCharAbsolute=function(u){return this._setCursor((u.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.cursorPosition=function(u){return this._setCursor(u.length>=2?(u.params[1]||1)-1:0,(u.params[0]||1)-1),!0},t.prototype.charPosAbsolute=function(u){return this._setCursor((u.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.hPositionRelative=function(u){return this._moveCursor(u.params[0]||1,0),!0},t.prototype.linePosAbsolute=function(u){return this._setCursor(this._activeBuffer.x,(u.params[0]||1)-1),!0},t.prototype.vPositionRelative=function(u){return this._moveCursor(0,u.params[0]||1),!0},t.prototype.hVPosition=function(u){return this.cursorPosition(u),!0},t.prototype.tabClear=function(u){var f=u.params[0];return 0===f?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===f&&(this._activeBuffer.tabs={}),!0},t.prototype.cursorForwardTab=function(u){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var f=u.params[0]||1;f--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},t.prototype.cursorBackwardTab=function(u){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var f=u.params[0]||1;f--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},t.prototype._eraseInBufferLine=function(u,f,d,_){void 0===_&&(_=!1);var v=this._activeBuffer.lines.get(this._activeBuffer.ybase+u);v.replaceCells(f,d,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),_&&(v.isWrapped=!1)},t.prototype._resetBufferLine=function(u){var f=this._activeBuffer.lines.get(this._activeBuffer.ybase+u);f.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+u),f.isWrapped=!1},t.prototype.eraseInDisplay=function(u){var f;switch(this._restrictCursor(this._bufferService.cols),u.params[0]){case 0:for(f=this._activeBuffer.y,this._dirtyRowService.markDirty(f),this._eraseInBufferLine(f++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);f<this._bufferService.rows;f++)this._resetBufferLine(f);this._dirtyRowService.markDirty(f);break;case 1:for(f=this._activeBuffer.y,this._dirtyRowService.markDirty(f),this._eraseInBufferLine(f,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(f+1).isWrapped=!1);f--;)this._resetBufferLine(f);this._dirtyRowService.markDirty(0);break;case 2:for(f=this._bufferService.rows,this._dirtyRowService.markDirty(f-1);f--;)this._resetBufferLine(f);this._dirtyRowService.markDirty(0);break;case 3:var d=this._activeBuffer.lines.length-this._bufferService.rows;d>0&&(this._activeBuffer.lines.trimStart(d),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-d,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-d,0),this._onScroll.fire(0))}return!0},t.prototype.eraseInLine=function(u){switch(this._restrictCursor(this._bufferService.cols),u.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},t.prototype.insertLines=function(u){this._restrictCursor();var f=u.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var d=this._activeBuffer.ybase+this._activeBuffer.y,_=this._bufferService.rows-1-this._activeBuffer.scrollBottom,v=this._bufferService.rows-1+this._activeBuffer.ybase-_+1;f--;)this._activeBuffer.lines.splice(v-1,1),this._activeBuffer.lines.splice(d,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.deleteLines=function(u){this._restrictCursor();var f=u.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var d,_=this._activeBuffer.ybase+this._activeBuffer.y;for(d=this._bufferService.rows-1-this._activeBuffer.scrollBottom,d=this._bufferService.rows-1+this._activeBuffer.ybase-d;f--;)this._activeBuffer.lines.splice(_,1),this._activeBuffer.lines.splice(d,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.insertChars=function(u){this._restrictCursor();var f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return f&&(f.insertCells(this._activeBuffer.x,u.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.deleteChars=function(u){this._restrictCursor();var f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return f&&(f.deleteCells(this._activeBuffer.x,u.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.scrollUp=function(u){for(var f=u.params[0]||1;f--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollDown=function(u){for(var f=u.params[0]||1;f--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(x.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollLeft=function(u){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var f=u.params[0]||1,d=this._activeBuffer.scrollTop;d<=this._activeBuffer.scrollBottom;++d){var _=this._activeBuffer.lines.get(this._activeBuffer.ybase+d);_.deleteCells(0,f,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),_.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollRight=function(u){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var f=u.params[0]||1,d=this._activeBuffer.scrollTop;d<=this._activeBuffer.scrollBottom;++d){var _=this._activeBuffer.lines.get(this._activeBuffer.ybase+d);_.insertCells(0,f,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),_.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.insertColumns=function(u){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var f=u.params[0]||1,d=this._activeBuffer.scrollTop;d<=this._activeBuffer.scrollBottom;++d){var _=this._activeBuffer.lines.get(this._activeBuffer.ybase+d);_.insertCells(this._activeBuffer.x,f,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),_.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.deleteColumns=function(u){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var f=u.params[0]||1,d=this._activeBuffer.scrollTop;d<=this._activeBuffer.scrollBottom;++d){var _=this._activeBuffer.lines.get(this._activeBuffer.ybase+d);_.deleteCells(this._activeBuffer.x,f,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),_.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.eraseChars=function(u){this._restrictCursor();var f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return f&&(f.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(u.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.repeatPrecedingCharacter=function(u){if(!this._parser.precedingCodepoint)return!0;for(var f=u.params[0]||1,d=new Uint32Array(f),_=0;_<f;++_)d[_]=this._parser.precedingCodepoint;return this.print(d,0,d.length),!0},t.prototype.sendDeviceAttributesPrimary=function(u){return u.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(b.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(b.C0.ESC+"[?6c")),!0},t.prototype.sendDeviceAttributesSecondary=function(u){return u.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(b.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(b.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(u.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(b.C0.ESC+"[>83;40003;0c")),!0},t.prototype._is=function(u){return 0===(this._optionsService.rawOptions.termName+"").indexOf(u)},t.prototype.setMode=function(u){for(var f=0;f<u.length;f++)4===u.params[f]&&(this._coreService.modes.insertMode=!0);return!0},t.prototype.setModePrivate=function(u){for(var f=0;f<u.length;f++)switch(u.params[f]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),this._charsetService.setgCharset(1,C.DEFAULT_CHARSET),this._charsetService.setgCharset(2,C.DEFAULT_CHARSET),this._charsetService.setgCharset(3,C.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},t.prototype.resetMode=function(u){for(var f=0;f<u.length;f++)4===u.params[f]&&(this._coreService.modes.insertMode=!1);return!0},t.prototype.resetModePrivate=function(u){for(var f=0;f<u.length;f++)switch(u.params[f]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===u.params[f]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},t.prototype._updateAttrColor=function(u,f,d,_,v){return 2===f?(u|=50331648,u&=-16777216,u|=O.AttributeData.fromColorRGB([d,_,v])):5===f&&(u&=-50331904,u|=33554432|255&d),u},t.prototype._extractColor=function(u,f,d){var _=[0,0,-1,0,0,0],v=0,y=0;do{if(_[y+v]=u.params[f+y],u.hasSubParams(f+y)){var b=u.getSubParams(f+y),C=0;do{5===_[1]&&(v=1),_[y+C+1+v]=b[C]}while(++C<b.length&&C+y+1+v<_.length);break}if(5===_[1]&&y+v>=2||2===_[1]&&y+v>=5)break;_[1]&&(v=1)}while(++y+f<u.length&&y+v<_.length);for(C=2;C<_.length;++C)-1===_[C]&&(_[C]=0);switch(_[0]){case 38:d.fg=this._updateAttrColor(d.fg,_[1],_[3],_[4],_[5]);break;case 48:d.bg=this._updateAttrColor(d.bg,_[1],_[3],_[4],_[5]);break;case 58:d.extended=d.extended.clone(),d.extended.underlineColor=this._updateAttrColor(d.extended.underlineColor,_[1],_[3],_[4],_[5])}return y},t.prototype._processUnderline=function(u,f){f.extended=f.extended.clone(),(!~u||u>5)&&(u=1),f.extended.underlineStyle=u,f.fg|=268435456,0===u&&(f.fg&=-268435457),f.updateExtended()},t.prototype.charAttributes=function(u){if(1===u.length&&0===u.params[0])return this._curAttrData.fg=x.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=x.DEFAULT_ATTR_DATA.bg,!0;for(var f,d=u.length,_=this._curAttrData,v=0;v<d;v++)(f=u.params[v])>=30&&f<=37?(_.fg&=-50331904,_.fg|=16777216|f-30):f>=40&&f<=47?(_.bg&=-50331904,_.bg|=16777216|f-40):f>=90&&f<=97?(_.fg&=-50331904,_.fg|=16777224|f-90):f>=100&&f<=107?(_.bg&=-50331904,_.bg|=16777224|f-100):0===f?(_.fg=x.DEFAULT_ATTR_DATA.fg,_.bg=x.DEFAULT_ATTR_DATA.bg):1===f?_.fg|=134217728:3===f?_.bg|=67108864:4===f?(_.fg|=268435456,this._processUnderline(u.hasSubParams(v)?u.getSubParams(v)[0]:1,_)):5===f?_.fg|=536870912:7===f?_.fg|=67108864:8===f?_.fg|=1073741824:9===f?_.fg|=2147483648:2===f?_.bg|=134217728:21===f?this._processUnderline(2,_):22===f?(_.fg&=-134217729,_.bg&=-134217729):23===f?_.bg&=-67108865:24===f?_.fg&=-268435457:25===f?_.fg&=-536870913:27===f?_.fg&=-67108865:28===f?_.fg&=-1073741825:29===f?_.fg&=2147483647:39===f?(_.fg&=-67108864,_.fg|=16777215&x.DEFAULT_ATTR_DATA.fg):49===f?(_.bg&=-67108864,_.bg|=16777215&x.DEFAULT_ATTR_DATA.bg):38===f||48===f||58===f?v+=this._extractColor(u,v,_):59===f?(_.extended=_.extended.clone(),_.extended.underlineColor=-1,_.updateExtended()):100===f?(_.fg&=-67108864,_.fg|=16777215&x.DEFAULT_ATTR_DATA.fg,_.bg&=-67108864,_.bg|=16777215&x.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",f);return!0},t.prototype.deviceStatus=function(u){switch(u.params[0]){case 5:this._coreService.triggerDataEvent(b.C0.ESC+"[0n");break;case 6:var f=this._activeBuffer.y+1,d=this._activeBuffer.x+1;this._coreService.triggerDataEvent(b.C0.ESC+"["+f+";"+d+"R")}return!0},t.prototype.deviceStatusPrivate=function(u){if(6===u.params[0]){var f=this._activeBuffer.y+1,d=this._activeBuffer.x+1;this._coreService.triggerDataEvent(b.C0.ESC+"[?"+f+";"+d+"R")}return!0},t.prototype.softReset=function(u){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=x.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},t.prototype.setCursorStyle=function(u){var f=u.params[0]||1;switch(f){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var d=f%2==1;return this._optionsService.options.cursorBlink=d,!0},t.prototype.setScrollRegion=function(u){var f,d=u.params[0]||1;return(u.length<2||(f=u.params[1])>this._bufferService.rows||0===f)&&(f=this._bufferService.rows),f>d&&(this._activeBuffer.scrollTop=d-1,this._activeBuffer.scrollBottom=f-1,this._setCursor(0,0)),!0},t.prototype.windowOptions=function(u){if(!w(u.params[0],this._optionsService.rawOptions.windowOptions))return!0;var f=u.length>1?u.params[1]:0;switch(u.params[0]){case 14:2!==f&&this._onRequestWindowsOptionsReport.fire(y.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(y.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(b.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==f&&2!==f||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==f&&1!==f||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==f&&2!==f||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==f&&1!==f||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},t.prototype.saveCursor=function(u){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},t.prototype.restoreCursor=function(u){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},t.prototype.setTitle=function(u){return this._windowTitle=u,this._onTitleChange.fire(u),!0},t.prototype.setIconName=function(u){return this._iconName=u,!0},t.prototype.setOrReportIndexedColor=function(u){for(var f=[],d=u.split(";");d.length>1;){var _=d.shift(),v=d.shift();if(/^\d+$/.exec(_)){var y=parseInt(_);if(0<=y&&y<256)if("?"===v)f.push({type:0,index:y});else{var b=(0,P.parseColor)(v);b&&f.push({type:1,index:y,color:b})}}}return f.length&&this._onColor.fire(f),!0},t.prototype._setOrReportSpecialColor=function(u,f){for(var d=u.split(";"),_=0;_<d.length&&!(f>=this._specialColors.length);++_,++f)if("?"===d[_])this._onColor.fire([{type:0,index:this._specialColors[f]}]);else{var v=(0,P.parseColor)(d[_]);v&&this._onColor.fire([{type:1,index:this._specialColors[f],color:v}])}return!0},t.prototype.setOrReportFgColor=function(u){return this._setOrReportSpecialColor(u,0)},t.prototype.setOrReportBgColor=function(u){return this._setOrReportSpecialColor(u,1)},t.prototype.setOrReportCursorColor=function(u){return this._setOrReportSpecialColor(u,2)},t.prototype.restoreIndexedColor=function(u){if(!u)return this._onColor.fire([{type:2}]),!0;for(var f=[],d=u.split(";"),_=0;_<d.length;++_)if(/^\d+$/.exec(d[_])){var v=parseInt(d[_]);0<=v&&v<256&&f.push({type:2,index:v})}return f.length&&this._onColor.fire(f),!0},t.prototype.restoreFgColor=function(u){return this._onColor.fire([{type:2,index:256}]),!0},t.prototype.restoreBgColor=function(u){return this._onColor.fire([{type:2,index:257}]),!0},t.prototype.restoreCursorColor=function(u){return this._onColor.fire([{type:2,index:258}]),!0},t.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},t.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},t.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},t.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,C.DEFAULT_CHARSET),!0},t.prototype.selectCharset=function(u){return 2!==u.length?(this.selectDefaultCharset(),!0):("/"===u[0]||this._charsetService.setgCharset(I[u[0]],C.CHARSETS[u[1]]||C.DEFAULT_CHARSET),!0)},t.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},t.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},t.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var u=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,u,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},t.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},t.prototype.reset=function(){this._curAttrData=x.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=x.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(u){return this._charsetService.setgLevel(u),!0},t.prototype.screenAlignmentPattern=function(){var u=new M.CellData;u.content=4194373,u.fg=this._curAttrData.fg,u.bg=this._curAttrData.bg,this._setCursor(0,0);for(var f=0;f<this._bufferService.rows;++f){var d=this._activeBuffer.ybase+this._activeBuffer.y+f,_=this._activeBuffer.lines.get(d);_&&(_.fill(u),_.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},t}(L.Disposable);f.InputHandler=j},844:function(u,f){var d=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.getDisposeArrayDisposable=f.disposeArray=f.Disposable=void 0;var _=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){var u,f;this._isDisposed=!0;try{for(var _=d(this._disposables),v=_.next();!v.done;v=_.next())v.value.dispose()}catch(f){u={error:f}}finally{try{v&&!v.done&&(f=_.return)&&f.call(_)}finally{if(u)throw u.error}}this._disposables.length=0},e.prototype.register=function(u){return this._disposables.push(u),u},e.prototype.unregister=function(u){var f=this._disposables.indexOf(u);-1!==f&&this._disposables.splice(f,1)},e}();function n(u){var f,_;try{for(var v=d(u),y=v.next();!y.done;y=v.next())y.value.dispose()}catch(u){f={error:u}}finally{try{y&&!y.done&&(_=v.return)&&_.call(v)}finally{if(f)throw f.error}}u.length=0}f.Disposable=_,f.disposeArray=n,f.getDisposeArrayDisposable=function(u){return{dispose:function(){return n(u)}}}},6114:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.isLinux=f.isWindows=f.isIphone=f.isIpad=f.isMac=f.isSafari=f.isLegacyEdge=f.isFirefox=void 0;var d="undefined"==typeof navigator,_=d?"node":navigator.userAgent,v=d?"node":navigator.platform;f.isFirefox=_.includes("Firefox"),f.isLegacyEdge=_.includes("Edge"),f.isSafari=/^((?!chrome|android).)*safari/i.test(_),f.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(v),f.isIpad="iPad"===v,f.isIphone="iPhone"===v,f.isWindows=["Windows","Win16","Win32","WinCE"].includes(v),f.isLinux=v.indexOf("Linux")>=0},6106:function(u,f){var d=this&&this.__generator||function(u,f){var d,_,v,y,b={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function a(y){return function(C){return function(y){if(d)throw new TypeError("Generator is already executing.");for(;b;)try{if(d=1,_&&(v=2&y[0]?_.return:y[0]?_.throw||((v=_.return)&&v.call(_),0):_.next)&&!(v=v.call(_,y[1])).done)return v;switch(_=0,v&&(y=[2&y[0],v.value]),y[0]){case 0:case 1:v=y;break;case 4:return b.label++,{value:y[1],done:!1};case 5:b.label++,_=y[1],y=[0];continue;case 7:y=b.ops.pop(),b.trys.pop();continue;default:if(!((v=(v=b.trys).length>0&&v[v.length-1])||6!==y[0]&&2!==y[0])){b=0;continue}if(3===y[0]&&(!v||y[1]>v[0]&&y[1]<v[3])){b.label=y[1];break}if(6===y[0]&&b.label<v[1]){b.label=v[1],v=y;break}if(v&&b.label<v[2]){b.label=v[2],b.ops.push(y);break}v[2]&&b.ops.pop(),b.trys.pop();continue}y=f.call(u,b)}catch(u){y=[6,u],_=0}finally{d=v=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}};Object.defineProperty(f,"__esModule",{value:!0}),f.SortedList=void 0;var _=function(){function e(u){this._getKey=u,this._array=[]}return e.prototype.clear=function(){this._array.length=0},e.prototype.insert=function(u){if(0!==this._array.length){var f=this._search(this._getKey(u),0,this._array.length-1);this._array.splice(f,0,u)}else this._array.push(u)},e.prototype.delete=function(u){if(0===this._array.length)return!1;var f=this._getKey(u),d=this._search(f,0,this._array.length-1);if(this._getKey(this._array[d])!==f)return!1;do{if(this._array[d]===u)return this._array.splice(d,1),!0}while(++d<this._array.length&&this._getKey(this._array[d])===f);return!1},e.prototype.getKeyIterator=function(u){var f;return d(this,(function(d){switch(d.label){case 0:if(0===this._array.length)return[2];if((f=this._search(u,0,this._array.length-1))<0||f>=this._array.length)return[2];if(this._getKey(this._array[f])!==u)return[2];d.label=1;case 1:return[4,this._array[f]];case 2:d.sent(),d.label=3;case 3:if(++f<this._array.length&&this._getKey(this._array[f])===u)return[3,1];d.label=4;case 4:return[2]}}))},e.prototype.values=function(){return this._array.values()},e.prototype._search=function(u,f,d){if(d<f)return f;var _=Math.floor((f+d)/2);if(this._getKey(this._array[_])>u)return this._search(u,f,_-1);if(this._getKey(this._array[_])<u)return this._search(u,_+1,d);for(;_>0&&this._getKey(this._array[_-1])===u;)_--;return _},e}();f.SortedList=_},8273:(u,f)=>{function r(u,f,d,_){if(void 0===d&&(d=0),void 0===_&&(_=u.length),d>=u.length)return u;d=(u.length+d)%u.length,_=_>=u.length?u.length:(u.length+_)%u.length;for(var v=d;v<_;++v)u[v]=f;return u}Object.defineProperty(f,"__esModule",{value:!0}),f.concat=f.fillFallback=f.fill=void 0,f.fill=function(u,f,d,_){return u.fill?u.fill(f,d,_):r(u,f,d,_)},f.fillFallback=r,f.concat=function(u,f){var d=new u.constructor(u.length+f.length);return d.set(u),d.set(f,u.length),d}},9282:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.updateWindowsModeWrappedState=void 0;var _=d(643);f.updateWindowsModeWrappedState=function(u){var f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),d=null==f?void 0:f.get(u.cols-1),v=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);v&&d&&(v.isWrapped=d[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&d[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ExtendedAttrs=f.AttributeData=void 0;var d=function(){function e(){this.fg=0,this.bg=0,this.extended=new _}return e.toColorRGB=function(u){return[u>>>16&255,u>>>8&255,255&u]},e.fromColorRGB=function(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]},e.prototype.clone=function(){var u=new e;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.isStrikethrough=function(){return 2147483648&this.fg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();f.AttributeData=d;var _=function(){function e(u,f){void 0===u&&(u=0),void 0===f&&(f=-1),this.underlineStyle=u,this.underlineColor=f}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();f.ExtendedAttrs=_},9092:function(u,f,d){var _=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b},v=this&&this.__spreadArray||function(u,f,d){if(d||2===arguments.length)for(var _,v=0,y=f.length;v<y;v++)!_&&v in f||(_||(_=Array.prototype.slice.call(f,0,v)),_[v]=f[v]);return u.concat(_||Array.prototype.slice.call(f))};Object.defineProperty(f,"__esModule",{value:!0}),f.BufferStringIterator=f.Buffer=f.MAX_BUFFER_SIZE=void 0;var y=d(6349),b=d(8437),C=d(511),S=d(643),L=d(4634),E=d(4863),k=d(7116),x=d(3734);f.MAX_BUFFER_SIZE=4294967295;var R=function(){function e(u,f,d){this._hasScrollback=u,this._optionsService=f,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=b.DEFAULT_ATTR_DATA.clone(),this.savedCharset=k.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(u){return u?(this._nullCell.fg=u.fg,this._nullCell.bg=u.bg,this._nullCell.extended=u.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new x.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(u){return u?(this._whitespaceCell.fg=u.fg,this._whitespaceCell.bg=u.bg,this._whitespaceCell.extended=u.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new x.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(u,f){return new b.BufferLine(this._bufferService.cols,this.getNullCell(u),f)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var u=this.ybase+this.y-this.ydisp;return u>=0&&u<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(u){if(!this._hasScrollback)return u;var d=u+this._optionsService.rawOptions.scrollback;return d>f.MAX_BUFFER_SIZE?f.MAX_BUFFER_SIZE:d},e.prototype.fillViewportRows=function(u){if(0===this.lines.length){void 0===u&&(u=b.DEFAULT_ATTR_DATA);for(var f=this._rows;f--;)this.lines.push(this.getBlankLine(u))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new y.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(u,f){var d=this.getNullCell(b.DEFAULT_ATTR_DATA),_=this._getCorrectBufferLength(f);if(_>this.lines.maxLength&&(this.lines.maxLength=_),this.lines.length>0){if(this._cols<u)for(var v=0;v<this.lines.length;v++)this.lines.get(v).resize(u,d);var y=0;if(this._rows<f)for(var C=this._rows;C<f;C++)this.lines.length<f+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new b.BufferLine(u,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new b.BufferLine(u,d)));else for(C=this._rows;C>f;C--)this.lines.length>f+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(_<this.lines.maxLength){var S=this.lines.length-_;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=_}this.x=Math.min(this.x,u-1),this.y=Math.min(this.y,f-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,u-1),this.scrollTop=0}if(this.scrollBottom=f-1,this._isReflowEnabled&&(this._reflow(u,f),this._cols>u))for(v=0;v<this.lines.length;v++)this.lines.get(v).resize(u,d);this._cols=u,this._rows=f},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(u,f){this._cols!==u&&(u>this._cols?this._reflowLarger(u,f):this._reflowSmaller(u,f))},e.prototype._reflowLarger=function(u,f){var d=(0,L.reflowLargerGetLinesToRemove)(this.lines,this._cols,u,this.ybase+this.y,this.getNullCell(b.DEFAULT_ATTR_DATA));if(d.length>0){var _=(0,L.reflowLargerCreateNewLayout)(this.lines,d);(0,L.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(u,f,_.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(u,f,d){for(var _=this.getNullCell(b.DEFAULT_ATTR_DATA),v=d;v-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<f&&this.lines.push(new b.BufferLine(u,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)},e.prototype._reflowSmaller=function(u,f){for(var d=this.getNullCell(b.DEFAULT_ATTR_DATA),y=[],C=0,S=this.lines.length-1;S>=0;S--){var E=this.lines.get(S);if(!(!E||!E.isWrapped&&E.getTrimmedLength()<=u)){for(var k=[E];E.isWrapped&&S>0;)E=this.lines.get(--S),k.unshift(E);var x=this.ybase+this.y;if(!(x>=S&&x<S+k.length)){var R,A=k[k.length-1].getTrimmedLength(),M=(0,L.reflowSmallerGetNewLineLengths)(k,this._cols,u),O=M.length-k.length;R=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);for(var D=[],T=0;T<O;T++){var B=this.getBlankLine(b.DEFAULT_ATTR_DATA,!0);D.push(B)}D.length>0&&(y.push({start:S+k.length+C,newLines:D}),C+=D.length),k.push.apply(k,v([],_(D),!1));var P=M.length-1,I=M[P];0===I&&(I=M[--P]);for(var H=k.length-O-1,F=A;H>=0;){var j=Math.min(F,I);if(void 0===k[P])break;if(k[P].copyCellsFrom(k[H],F-j,I-j,j,!0),0==(I-=j)&&(I=M[--P]),0==(F-=j)){H--;var q=Math.max(H,0);F=(0,L.getWrappedLineTrimmedLength)(k,q,this._cols)}}for(T=0;T<k.length;T++)M[T]<u&&k[T].setCell(M[T],d);for(var W=O-R;W-- >0;)0===this.ybase?this.y<f-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-f&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+f-1)}}}if(y.length>0){var U=[],N=[];for(T=0;T<this.lines.length;T++)N.push(this.lines.get(T));var z=this.lines.length,K=z-1,V=0,G=y[V];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);var X=0;for(T=Math.min(this.lines.maxLength-1,z+C-1);T>=0;T--)if(G&&G.start>K+X){for(var Y=G.newLines.length-1;Y>=0;Y--)this.lines.set(T--,G.newLines[Y]);T++,U.push({index:K+1,amount:G.newLines.length}),X+=G.newLines.length,G=y[++V]}else this.lines.set(T,N[K--]);var Z=0;for(T=U.length-1;T>=0;T--)U[T].index+=Z,this.lines.onInsertEmitter.fire(U[T]),Z+=U[T].amount;var J=Math.max(0,z+C-this.lines.maxLength);J>0&&this.lines.onTrimEmitter.fire(J)}},e.prototype.stringIndexToBufferIndex=function(u,f,d){for(void 0===d&&(d=!1);f;){var _=this.lines.get(u);if(!_)return[-1,-1];for(var v=d?_.getTrimmedLength():_.length,y=0;y<v;++y)if(_.get(y)[S.CHAR_DATA_WIDTH_INDEX]&&(f-=_.get(y)[S.CHAR_DATA_CHAR_INDEX].length||1),f<0)return[u,y];u++}return[u,0]},e.prototype.translateBufferLineToString=function(u,f,d,_){void 0===d&&(d=0);var v=this.lines.get(u);return v?v.translateToString(f,d,_):""},e.prototype.getWrappedRangeForLine=function(u){for(var f=u,d=u;f>0&&this.lines.get(f).isWrapped;)f--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:f,last:d}},e.prototype.setupTabStops=function(u){for(null!=u?this.tabs[u]||(u=this.prevStop(u)):(this.tabs={},u=0);u<this._cols;u+=this._optionsService.rawOptions.tabStopWidth)this.tabs[u]=!0},e.prototype.prevStop=function(u){for(null==u&&(u=this.x);!this.tabs[--u]&&u>0;);return u>=this._cols?this._cols-1:u<0?0:u},e.prototype.nextStop=function(u){for(null==u&&(u=this.x);!this.tabs[++u]&&u<this._cols;);return u>=this._cols?this._cols-1:u<0?0:u},e.prototype.clearMarkers=function(u){this._isClearing=!0;for(var f=0;f<this.markers.length;f++)this.markers[f].line===u&&(this.markers[f].dispose(),this.markers.splice(f--,1));this._isClearing=!1},e.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var u=0;u<this.markers.length;u++)this.markers[u].dispose(),this.markers.splice(u--,1);this._isClearing=!1},e.prototype.addMarker=function(u){var f=this,d=new E.Marker(u);return this.markers.push(d),d.register(this.lines.onTrim((function(u){d.line-=u,d.line<0&&d.dispose()}))),d.register(this.lines.onInsert((function(u){d.line>=u.index&&(d.line+=u.amount)}))),d.register(this.lines.onDelete((function(u){d.line>=u.index&&d.line<u.index+u.amount&&d.dispose(),d.line>u.index&&(d.line-=u.amount)}))),d.register(d.onDispose((function(){return f._removeMarker(d)}))),d},e.prototype._removeMarker=function(u){this._isClearing||this.markers.splice(this.markers.indexOf(u),1)},e.prototype.iterator=function(u,f,d,_,v){return new A(this,u,f,d,_,v)},e}();f.Buffer=R;var A=function(){function e(u,f,d,_,v,y){void 0===d&&(d=0),void 0===_&&(_=u.lines.length),void 0===v&&(v=0),void 0===y&&(y=0),this._buffer=u,this._trimRight=f,this._startIndex=d,this._endIndex=_,this._startOverscan=v,this._endOverscan=y,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var u=this._buffer.getWrappedRangeForLine(this._current);u.first<this._startIndex-this._startOverscan&&(u.first=this._startIndex-this._startOverscan),u.last>this._endIndex+this._endOverscan&&(u.last=this._endIndex+this._endOverscan),u.first=Math.max(u.first,0),u.last=Math.min(u.last,this._buffer.lines.length);for(var f="",d=u.first;d<=u.last;++d)f+=this._buffer.translateBufferLineToString(d,this._trimRight);return this._current=u.last+1,{range:u,content:f}},e}();f.BufferStringIterator=A},8437:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BufferLine=f.DEFAULT_ATTR_DATA=void 0;var _=d(482),v=d(643),y=d(511),b=d(3734);f.DEFAULT_ATTR_DATA=Object.freeze(new b.AttributeData);var C=function(){function e(u,f,d){void 0===d&&(d=!1),this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*u);for(var _=f||y.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),b=0;b<u;++b)this.setCell(b,_);this.length=u}return e.prototype.get=function(u){var f=this._data[3*u+0],d=2097151&f;return[this._data[3*u+1],2097152&f?this._combined[u]:d?(0,_.stringFromCodePoint)(d):"",f>>22,2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):d]},e.prototype.set=function(u,f){this._data[3*u+1]=f[v.CHAR_DATA_ATTR_INDEX],f[v.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[u]=f[1],this._data[3*u+0]=2097152|u|f[v.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*u+0]=f[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[v.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(u){return this._data[3*u+0]>>22},e.prototype.hasWidth=function(u){return 12582912&this._data[3*u+0]},e.prototype.getFg=function(u){return this._data[3*u+1]},e.prototype.getBg=function(u){return this._data[3*u+2]},e.prototype.hasContent=function(u){return 4194303&this._data[3*u+0]},e.prototype.getCodePoint=function(u){var f=this._data[3*u+0];return 2097152&f?this._combined[u].charCodeAt(this._combined[u].length-1):2097151&f},e.prototype.isCombined=function(u){return 2097152&this._data[3*u+0]},e.prototype.getString=function(u){var f=this._data[3*u+0];return 2097152&f?this._combined[u]:2097151&f?(0,_.stringFromCodePoint)(2097151&f):""},e.prototype.loadCell=function(u,f){var d=3*u;return f.content=this._data[d+0],f.fg=this._data[d+1],f.bg=this._data[d+2],2097152&f.content&&(f.combinedData=this._combined[u]),268435456&f.bg&&(f.extended=this._extendedAttrs[u]),f},e.prototype.setCell=function(u,f){2097152&f.content&&(this._combined[u]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[u]=f.extended),this._data[3*u+0]=f.content,this._data[3*u+1]=f.fg,this._data[3*u+2]=f.bg},e.prototype.setCellFromCodePoint=function(u,f,d,_,v,y){268435456&v&&(this._extendedAttrs[u]=y),this._data[3*u+0]=f|d<<22,this._data[3*u+1]=_,this._data[3*u+2]=v},e.prototype.addCodepointToCell=function(u,f){var d=this._data[3*u+0];2097152&d?this._combined[u]+=(0,_.stringFromCodePoint)(f):(2097151&d?(this._combined[u]=(0,_.stringFromCodePoint)(2097151&d)+(0,_.stringFromCodePoint)(f),d&=-2097152,d|=2097152):d=f|1<<22,this._data[3*u+0]=d)},e.prototype.insertCells=function(u,f,d,_){if((u%=this.length)&&2===this.getWidth(u-1)&&this.setCellFromCodePoint(u-1,0,1,(null==_?void 0:_.fg)||0,(null==_?void 0:_.bg)||0,(null==_?void 0:_.extended)||new b.ExtendedAttrs),f<this.length-u){for(var v=new y.CellData,C=this.length-u-f-1;C>=0;--C)this.setCell(u+f+C,this.loadCell(u+C,v));for(C=0;C<f;++C)this.setCell(u+C,d)}else for(C=u;C<this.length;++C)this.setCell(C,d);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==_?void 0:_.fg)||0,(null==_?void 0:_.bg)||0,(null==_?void 0:_.extended)||new b.ExtendedAttrs)},e.prototype.deleteCells=function(u,f,d,_){if(u%=this.length,f<this.length-u){for(var v=new y.CellData,C=0;C<this.length-u-f;++C)this.setCell(u+C,this.loadCell(u+f+C,v));for(C=this.length-f;C<this.length;++C)this.setCell(C,d)}else for(C=u;C<this.length;++C)this.setCell(C,d);u&&2===this.getWidth(u-1)&&this.setCellFromCodePoint(u-1,0,1,(null==_?void 0:_.fg)||0,(null==_?void 0:_.bg)||0,(null==_?void 0:_.extended)||new b.ExtendedAttrs),0!==this.getWidth(u)||this.hasContent(u)||this.setCellFromCodePoint(u,0,1,(null==_?void 0:_.fg)||0,(null==_?void 0:_.bg)||0,(null==_?void 0:_.extended)||new b.ExtendedAttrs)},e.prototype.replaceCells=function(u,f,d,_){for(u&&2===this.getWidth(u-1)&&this.setCellFromCodePoint(u-1,0,1,(null==_?void 0:_.fg)||0,(null==_?void 0:_.bg)||0,(null==_?void 0:_.extended)||new b.ExtendedAttrs),f<this.length&&2===this.getWidth(f-1)&&this.setCellFromCodePoint(f,0,1,(null==_?void 0:_.fg)||0,(null==_?void 0:_.bg)||0,(null==_?void 0:_.extended)||new b.ExtendedAttrs);u<f&&u<this.length;)this.setCell(u++,d)},e.prototype.resize=function(u,f){if(u!==this.length){if(u>this.length){var d=new Uint32Array(3*u);this.length&&(3*u<this._data.length?d.set(this._data.subarray(0,3*u)):d.set(this._data)),this._data=d;for(var _=this.length;_<u;++_)this.setCell(_,f)}else if(u){(d=new Uint32Array(3*u)).set(this._data.subarray(0,3*u)),this._data=d;var v=Object.keys(this._combined);for(_=0;_<v.length;_++){var y=parseInt(v[_],10);y>=u&&delete this._combined[y]}}else this._data=new Uint32Array(0),this._combined={};this.length=u}},e.prototype.fill=function(u){this._combined={},this._extendedAttrs={};for(var f=0;f<this.length;++f)this.setCell(f,u)},e.prototype.copyFrom=function(u){for(var f in this.length!==u.length?this._data=new Uint32Array(u._data):this._data.set(u._data),this.length=u.length,this._combined={},u._combined)this._combined[f]=u._combined[f];for(var f in this._extendedAttrs={},u._extendedAttrs)this._extendedAttrs[f]=u._extendedAttrs[f];this.isWrapped=u.isWrapped},e.prototype.clone=function(){var u=new e(0);for(var f in u._data=new Uint32Array(this._data),u.length=this.length,this._combined)u._combined[f]=this._combined[f];for(var f in this._extendedAttrs)u._extendedAttrs[f]=this._extendedAttrs[f];return u.isWrapped=this.isWrapped,u},e.prototype.getTrimmedLength=function(){for(var u=this.length-1;u>=0;--u)if(4194303&this._data[3*u+0])return u+(this._data[3*u+0]>>22);return 0},e.prototype.copyCellsFrom=function(u,f,d,_,v){var y=u._data;if(v)for(var b=_-1;b>=0;b--)for(var C=0;C<3;C++)this._data[3*(d+b)+C]=y[3*(f+b)+C];else for(b=0;b<_;b++)for(C=0;C<3;C++)this._data[3*(d+b)+C]=y[3*(f+b)+C];var S=Object.keys(u._combined);for(C=0;C<S.length;C++){var L=parseInt(S[C],10);L>=f&&(this._combined[L-f+d]=u._combined[L])}},e.prototype.translateToString=function(u,f,d){void 0===u&&(u=!1),void 0===f&&(f=0),void 0===d&&(d=this.length),u&&(d=Math.min(d,this.getTrimmedLength()));for(var y="";f<d;){var b=this._data[3*f+0],C=2097151&b;y+=2097152&b?this._combined[f]:C?(0,_.stringFromCodePoint)(C):v.WHITESPACE_CELL_CHAR,f+=b>>22||1}return y},e}();f.BufferLine=C},4841:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.getRangeLength=void 0,f.getRangeLength=function(u,f){if(u.start.y>u.end.y)throw Error("Buffer range end ("+u.end.x+", "+u.end.y+") cannot be before start ("+u.start.x+", "+u.start.y+")");return f*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(u,f)=>{function r(u,f,d){if(f===u.length-1)return u[f].getTrimmedLength();var _=!u[f].hasContent(d-1)&&1===u[f].getWidth(d-1),v=2===u[f+1].getWidth(0);return _&&v?d-1:d}Object.defineProperty(f,"__esModule",{value:!0}),f.getWrappedLineTrimmedLength=f.reflowSmallerGetNewLineLengths=f.reflowLargerApplyNewLayout=f.reflowLargerCreateNewLayout=f.reflowLargerGetLinesToRemove=void 0,f.reflowLargerGetLinesToRemove=function(u,f,d,_,v){for(var y=[],b=0;b<u.length-1;b++){var C=b,S=u.get(++C);if(S.isWrapped){for(var L=[u.get(b)];C<u.length&&S.isWrapped;)L.push(S),S=u.get(++C);if(_>=b&&_<C)b+=L.length-1;else{for(var E=0,k=r(L,E,f),x=1,R=0;x<L.length;){var A=r(L,x,f),M=Math.min(A-R,d-k);L[E].copyCellsFrom(L[x],R,k,M,!1),(k+=M)===d&&(E++,k=0),(R+=M)===A&&(x++,R=0),0===k&&0!==E&&2===L[E-1].getWidth(d-1)&&(L[E].copyCellsFrom(L[E-1],d-1,k++,1,!1),L[E-1].setCell(d-1,v))}L[E].replaceCells(k,d,v);for(var O=0,D=L.length-1;D>0&&(D>E||0===L[D].getTrimmedLength());D--)O++;O>0&&(y.push(b+L.length-O),y.push(O)),b+=L.length-1}}}return y},f.reflowLargerCreateNewLayout=function(u,f){for(var d=[],_=0,v=f[_],y=0,b=0;b<u.length;b++)if(v===b){var C=f[++_];u.onDeleteEmitter.fire({index:b-y,amount:C}),b+=C-1,y+=C,v=f[++_]}else d.push(b);return{layout:d,countRemoved:y}},f.reflowLargerApplyNewLayout=function(u,f){for(var d=[],_=0;_<f.length;_++)d.push(u.get(f[_]));for(_=0;_<d.length;_++)u.set(_,d[_]);u.length=f.length},f.reflowSmallerGetNewLineLengths=function(u,f,d){for(var _=[],v=u.map((function(d,_){return r(u,_,f)})).reduce((function(u,f){return u+f})),y=0,b=0,C=0;C<v;){if(v-C<d){_.push(v-C);break}y+=d;var S=r(u,b,f);y>S&&(y-=S,b++);var L=2===u[b].getWidth(y-1);L&&y--;var E=L?d-1:d;_.push(E),C+=E}return _},f.getWrappedLineTrimmedLength=r},5295:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.BufferSet=void 0;var y=d(9092),b=d(8460),C=function(u){function t(f,d){var _=u.call(this)||this;return _._optionsService=f,_._bufferService=d,_._onBufferActivate=_.register(new b.EventEmitter),_.reset(),_}return v(t,u),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._normal=new y.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new y.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(u){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(u),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(u,f){this._normal.resize(u,f),this._alt.resize(u,f)},t.prototype.setupTabStops=function(u){this._normal.setupTabStops(u),this._alt.setupTabStops(u)},t}(d(844).Disposable);f.BufferSet=C},511:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.CellData=void 0;var y=d(482),b=d(643),C=d(3734),S=function(u){function t(){var f=null!==u&&u.apply(this,arguments)||this;return f.content=0,f.fg=0,f.bg=0,f.extended=new C.ExtendedAttrs,f.combinedData="",f}return v(t,u),t.fromCharData=function(u){var f=new t;return f.setFromCharData(u),f},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,y.stringFromCodePoint)(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(u){this.fg=u[b.CHAR_DATA_ATTR_INDEX],this.bg=0;var f=!1;if(u[b.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(2===u[b.CHAR_DATA_CHAR_INDEX].length){var d=u[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){var _=u[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(d-55296)+_-56320+65536|u[b.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=u[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[b.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=u[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|u[b.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(C.AttributeData);f.CellData=S},643:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.WHITESPACE_CELL_CODE=f.WHITESPACE_CELL_WIDTH=f.WHITESPACE_CELL_CHAR=f.NULL_CELL_CODE=f.NULL_CELL_WIDTH=f.NULL_CELL_CHAR=f.CHAR_DATA_CODE_INDEX=f.CHAR_DATA_WIDTH_INDEX=f.CHAR_DATA_CHAR_INDEX=f.CHAR_DATA_ATTR_INDEX=f.DEFAULT_ATTR=f.DEFAULT_COLOR=void 0,f.DEFAULT_COLOR=256,f.DEFAULT_ATTR=256|f.DEFAULT_COLOR<<9,f.CHAR_DATA_ATTR_INDEX=0,f.CHAR_DATA_CHAR_INDEX=1,f.CHAR_DATA_WIDTH_INDEX=2,f.CHAR_DATA_CODE_INDEX=3,f.NULL_CELL_CHAR="",f.NULL_CELL_WIDTH=1,f.NULL_CELL_CODE=0,f.WHITESPACE_CELL_CHAR=" ",f.WHITESPACE_CELL_WIDTH=1,f.WHITESPACE_CELL_CODE=32},4863:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.Marker=void 0;var y=d(8460),b=function(u){function t(f){var d=u.call(this)||this;return d.line=f,d._id=t._nextId++,d.isDisposed=!1,d._onDispose=new y.EventEmitter,d}return v(t,u),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),u.prototype.dispose.call(this))},t._nextId=1,t}(d(844).Disposable);f.Marker=b},7116:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.DEFAULT_CHARSET=f.CHARSETS=void 0,f.CHARSETS={},f.DEFAULT_CHARSET=f.CHARSETS.B,f.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},f.CHARSETS.A={"#":"£"},f.CHARSETS.B=void 0,f.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},f.CHARSETS.C=f.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},f.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},f.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},f.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},f.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},f.CHARSETS.E=f.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},f.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},f.CHARSETS.H=f.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},f.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(u,f)=>{var d,_;Object.defineProperty(f,"__esModule",{value:!0}),f.C1_ESCAPED=f.C1=f.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="",u.BS="\b",u.HT="\t",u.LF="\n",u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(d=f.C0||(f.C0={})),(_=f.C1||(f.C1={})).PAD="",_.HOP="",_.BPH="",_.NBH="",_.IND="",_.NEL="",_.SSA="",_.ESA="",_.HTS="",_.HTJ="",_.VTS="",_.PLD="",_.PLU="",_.RI="",_.SS2="",_.SS3="",_.DCS="",_.PU1="",_.PU2="",_.STS="",_.CCH="",_.MW="",_.SPA="",_.EPA="",_.SOS="",_.SGCI="",_.SCI="",_.CSI="",_.ST="",_.OSC="",_.PM="",_.APC="",(f.C1_ESCAPED||(f.C1_ESCAPED={})).ST=d.ESC+"\\"},7399:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.evaluateKeyboardEvent=void 0;var _=d(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};f.evaluateKeyboardEvent=function(u,f,d,y){var b={type:0,cancel:!1,key:void 0},C=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:"UIKeyInputUpArrow"===u.key?b.key=f?_.C0.ESC+"OA":_.C0.ESC+"[A":"UIKeyInputLeftArrow"===u.key?b.key=f?_.C0.ESC+"OD":_.C0.ESC+"[D":"UIKeyInputRightArrow"===u.key?b.key=f?_.C0.ESC+"OC":_.C0.ESC+"[C":"UIKeyInputDownArrow"===u.key&&(b.key=f?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:if(u.shiftKey){b.key=_.C0.BS;break}if(u.altKey){b.key=_.C0.ESC+_.C0.DEL;break}b.key=_.C0.DEL;break;case 9:if(u.shiftKey){b.key=_.C0.ESC+"[Z";break}b.key=_.C0.HT,b.cancel=!0;break;case 13:b.key=u.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,b.cancel=!0;break;case 27:b.key=_.C0.ESC,u.altKey&&(b.key=_.C0.ESC+_.C0.ESC),b.cancel=!0;break;case 37:if(u.metaKey)break;C?(b.key=_.C0.ESC+"[1;"+(C+1)+"D",b.key===_.C0.ESC+"[1;3D"&&(b.key=_.C0.ESC+(d?"b":"[1;5D"))):b.key=f?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(u.metaKey)break;C?(b.key=_.C0.ESC+"[1;"+(C+1)+"C",b.key===_.C0.ESC+"[1;3C"&&(b.key=_.C0.ESC+(d?"f":"[1;5C"))):b.key=f?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(u.metaKey)break;C?(b.key=_.C0.ESC+"[1;"+(C+1)+"A",d||b.key!==_.C0.ESC+"[1;3A"||(b.key=_.C0.ESC+"[1;5A")):b.key=f?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(u.metaKey)break;C?(b.key=_.C0.ESC+"[1;"+(C+1)+"B",d||b.key!==_.C0.ESC+"[1;3B"||(b.key=_.C0.ESC+"[1;5B")):b.key=f?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(b.key=_.C0.ESC+"[2~");break;case 46:b.key=C?_.C0.ESC+"[3;"+(C+1)+"~":_.C0.ESC+"[3~";break;case 36:b.key=C?_.C0.ESC+"[1;"+(C+1)+"H":f?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:b.key=C?_.C0.ESC+"[1;"+(C+1)+"F":f?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:u.shiftKey?b.type=2:u.ctrlKey?b.key=_.C0.ESC+"[5;"+(C+1)+"~":b.key=_.C0.ESC+"[5~";break;case 34:u.shiftKey?b.type=3:u.ctrlKey?b.key=_.C0.ESC+"[6;"+(C+1)+"~":b.key=_.C0.ESC+"[6~";break;case 112:b.key=C?_.C0.ESC+"[1;"+(C+1)+"P":_.C0.ESC+"OP";break;case 113:b.key=C?_.C0.ESC+"[1;"+(C+1)+"Q":_.C0.ESC+"OQ";break;case 114:b.key=C?_.C0.ESC+"[1;"+(C+1)+"R":_.C0.ESC+"OR";break;case 115:b.key=C?_.C0.ESC+"[1;"+(C+1)+"S":_.C0.ESC+"OS";break;case 116:b.key=C?_.C0.ESC+"[15;"+(C+1)+"~":_.C0.ESC+"[15~";break;case 117:b.key=C?_.C0.ESC+"[17;"+(C+1)+"~":_.C0.ESC+"[17~";break;case 118:b.key=C?_.C0.ESC+"[18;"+(C+1)+"~":_.C0.ESC+"[18~";break;case 119:b.key=C?_.C0.ESC+"[19;"+(C+1)+"~":_.C0.ESC+"[19~";break;case 120:b.key=C?_.C0.ESC+"[20;"+(C+1)+"~":_.C0.ESC+"[20~";break;case 121:b.key=C?_.C0.ESC+"[21;"+(C+1)+"~":_.C0.ESC+"[21~";break;case 122:b.key=C?_.C0.ESC+"[23;"+(C+1)+"~":_.C0.ESC+"[23~";break;case 123:b.key=C?_.C0.ESC+"[24;"+(C+1)+"~":_.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(d&&!y||!u.altKey||u.metaKey)!d||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&1===u.key.length?b.key=u.key:u.key&&u.ctrlKey&&("_"===u.key&&(b.key=_.C0.US),"@"===u.key&&(b.key=_.C0.NUL)):65===u.keyCode&&(b.type=1);else{var S=v[u.keyCode],L=null==S?void 0:S[u.shiftKey?1:0];if(L)b.key=_.C0.ESC+L;else if(u.keyCode>=65&&u.keyCode<=90){var E=u.ctrlKey?u.keyCode-64:u.keyCode+32,k=String.fromCharCode(E);u.shiftKey&&(k=k.toUpperCase()),b.key=_.C0.ESC+k}else"Dead"===u.key&&u.code.startsWith("Key")&&(k=u.code.slice(3,4),u.shiftKey||(k=k.toLowerCase()),b.key=_.C0.ESC+k,b.cancel=!0)}else u.keyCode>=65&&u.keyCode<=90?b.key=String.fromCharCode(u.keyCode-64):32===u.keyCode?b.key=_.C0.NUL:u.keyCode>=51&&u.keyCode<=55?b.key=String.fromCharCode(u.keyCode-51+27):56===u.keyCode?b.key=_.C0.DEL:219===u.keyCode?b.key=_.C0.ESC:220===u.keyCode?b.key=_.C0.FS:221===u.keyCode&&(b.key=_.C0.GS)}return b}},482:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Utf8ToUtf32=f.StringToUtf32=f.utf32ToString=f.stringFromCodePoint=void 0,f.stringFromCodePoint=function(u){return u>65535?String.fromCharCode(55296+((u-=65536)>>10))+String.fromCharCode(u%1024+56320):String.fromCharCode(u)},f.utf32ToString=function(u,f,d){void 0===f&&(f=0),void 0===d&&(d=u.length);for(var _="",v=f;v<d;++v){var y=u[v];_+=y>65535?String.fromCharCode(55296+((y-=65536)>>10))+String.fromCharCode(y%1024+56320):String.fromCharCode(y)}return _};var d=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(u,f){var d=u.length;if(!d)return 0;var _=0,v=0;this._interim&&(56320<=(C=u.charCodeAt(v++))&&C<=57343?f[_++]=1024*(this._interim-55296)+C-56320+65536:(f[_++]=this._interim,f[_++]=C),this._interim=0);for(var y=v;y<d;++y){var b=u.charCodeAt(y);if(55296<=b&&b<=56319){if(++y>=d)return this._interim=b,_;var C;56320<=(C=u.charCodeAt(y))&&C<=57343?f[_++]=1024*(b-55296)+C-56320+65536:(f[_++]=b,f[_++]=C)}else 65279!==b&&(f[_++]=b)}return _},e}();f.StringToUtf32=d;var _=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(u,f){var d=u.length;if(!d)return 0;var _,v,y,b,C=0,S=0,L=0;if(this.interim[0]){var E=!1,k=this.interim[0];k&=192==(224&k)?31:224==(240&k)?15:7;for(var x=0,R=void 0;(R=63&this.interim[++x])&&x<4;)k<<=6,k|=R;for(var A=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,M=A-x;L<M;){if(L>=d)return 0;if(128!=(192&(R=u[L++]))){L--,E=!0;break}this.interim[x++]=R,k<<=6,k|=63&R}E||(2===A?k<128?L--:f[C++]=k:3===A?k<2048||k>=55296&&k<=57343||65279===k||(f[C++]=k):k<65536||k>1114111||(f[C++]=k)),this.interim.fill(0)}for(var O=d-4,D=L;D<d;){for(;!(!(D<O)||128&(_=u[D])||128&(v=u[D+1])||128&(y=u[D+2])||128&(b=u[D+3]));)f[C++]=_,f[C++]=v,f[C++]=y,f[C++]=b,D+=4;if((_=u[D++])<128)f[C++]=_;else if(192==(224&_)){if(D>=d)return this.interim[0]=_,C;if(128!=(192&(v=u[D++]))){D--;continue}if((S=(31&_)<<6|63&v)<128){D--;continue}f[C++]=S}else if(224==(240&_)){if(D>=d)return this.interim[0]=_,C;if(128!=(192&(v=u[D++]))){D--;continue}if(D>=d)return this.interim[0]=_,this.interim[1]=v,C;if(128!=(192&(y=u[D++]))){D--;continue}if((S=(15&_)<<12|(63&v)<<6|63&y)<2048||S>=55296&&S<=57343||65279===S)continue;f[C++]=S}else if(240==(248&_)){if(D>=d)return this.interim[0]=_,C;if(128!=(192&(v=u[D++]))){D--;continue}if(D>=d)return this.interim[0]=_,this.interim[1]=v,C;if(128!=(192&(y=u[D++]))){D--;continue}if(D>=d)return this.interim[0]=_,this.interim[1]=v,this.interim[2]=y,C;if(128!=(192&(b=u[D++]))){D--;continue}if((S=(7&_)<<18|(63&v)<<12|(63&y)<<6|63&b)<65536||S>1114111)continue;f[C++]=S}}return C},e}();f.Utf8ToUtf32=_},225:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.UnicodeV6=void 0;var _,v=d(8273),y=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],b=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],C=function(){function e(){if(this.version="6",!_){_=new Uint8Array(65536),(0,v.fill)(_,1),_[0]=0,(0,v.fill)(_,0,1,32),(0,v.fill)(_,0,127,160),(0,v.fill)(_,2,4352,4448),_[9001]=2,_[9002]=2,(0,v.fill)(_,2,11904,42192),_[12351]=1,(0,v.fill)(_,2,44032,55204),(0,v.fill)(_,2,63744,64256),(0,v.fill)(_,2,65040,65050),(0,v.fill)(_,2,65072,65136),(0,v.fill)(_,2,65280,65377),(0,v.fill)(_,2,65504,65511);for(var u=0;u<y.length;++u)(0,v.fill)(_,0,y[u][0],y[u][1]+1)}}return e.prototype.wcwidth=function(u){return u<32?0:u<127?1:u<65536?_[u]:function(u,f){var d,_=0,v=f.length-1;if(u<f[0][0]||u>f[v][1])return!1;for(;v>=_;)if(u>f[d=_+v>>1][1])_=d+1;else{if(!(u<f[d][0]))return!0;v=d-1}return!1}(u,b)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1},e}();f.UnicodeV6=C},5981:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.WriteBuffer=void 0;var _=d(8460),v="undefined"==typeof queueMicrotask?function(u){Promise.resolve().then(u)}:queueMicrotask,y=function(){function e(u){this._action=u,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new _.EventEmitter}return Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),e.prototype.writeSync=function(u,f){if(void 0!==f&&this._syncCalls>f)this._syncCalls=0;else if(this._pendingData+=u.length,this._writeBuffer.push(u),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);var _=this._callbacks.shift();_&&_()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},e.prototype.write=function(u,f){var d=this;if(this._pendingData>5e7)throw Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return d._innerWrite()}))),this._pendingData+=u.length,this._writeBuffer.push(u),this._callbacks.push(f)},e.prototype._innerWrite=function(u,f){var d=this;void 0===u&&(u=0),void 0===f&&(f=!0);for(var _=u||Date.now();this._writeBuffer.length>this._bufferOffset;){var y=this._writeBuffer[this._bufferOffset],b=this._action(y,f);if(b)return void b.catch((function(u){return v((function(){throw u})),Promise.resolve(!1)})).then((function(u){return Date.now()-_>=12?setTimeout((function(){return d._innerWrite(0,u)})):d._innerWrite(_,u)}));var C=this._callbacks[this._bufferOffset];if(C&&C(),this._bufferOffset++,this._pendingData-=y.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return d._innerWrite()}))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},e}();f.WriteBuffer=y},5941:function(u,f){var d=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b};Object.defineProperty(f,"__esModule",{value:!0}),f.toRgbString=f.parseColor=void 0;var _=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,v=/^[\da-f]+$/;function o(u,f){var d=u.toString(16),_=d.length<2?"0"+d:d;switch(f){case 4:return d[0];case 8:return _;case 12:return(_+_).slice(0,3);default:return _+_}}f.parseColor=function(u){if(u){var f=u.toLowerCase();if(0===f.indexOf("rgb:")){f=f.slice(4);var d=_.exec(f);if(d){var y=d[1]?15:d[4]?255:d[7]?4095:65535;return[Math.round(parseInt(d[1]||d[4]||d[7]||d[10],16)/y*255),Math.round(parseInt(d[2]||d[5]||d[8]||d[11],16)/y*255),Math.round(parseInt(d[3]||d[6]||d[9]||d[12],16)/y*255)]}}else if(0===f.indexOf("#")&&(f=f.slice(1),v.exec(f)&&[3,6,9,12].includes(f.length))){for(var b=f.length/3,C=[0,0,0],S=0;S<3;++S){var L=parseInt(f.slice(b*S,b*S+b),16);C[S]=1===b?L<<4:2===b?L:3===b?L>>4:L>>8}return C}}},f.toRgbString=function(u,f){void 0===f&&(f=16);var _=d(u,3),v=_[0],y=_[1],b=_[2];return"rgb:"+o(v,f)+"/"+o(y,f)+"/"+o(b,f)}},5770:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PAYLOAD_LIMIT=void 0,f.PAYLOAD_LIMIT=1e7},6351:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.DcsHandler=f.DcsParser=void 0;var _=d(482),v=d(8742),y=d(5770),b=[],C=function(){function e(){this._handlers=Object.create(null),this._active=b,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=b},e.prototype.registerHandler=function(u,f){void 0===this._handlers[u]&&(this._handlers[u]=[]);var d=this._handlers[u];return d.push(f),{dispose:function(){var u=d.indexOf(f);-1!==u&&d.splice(u,1)}}},e.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},e.prototype.setHandlerFallback=function(u){this._handlerFb=u},e.prototype.reset=function(){if(this._active.length)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].unhook(!1);this._stack.paused=!1,this._active=b,this._ident=0},e.prototype.hook=function(u,f){if(this.reset(),this._ident=u,this._active=this._handlers[u]||b,this._active.length)for(var d=this._active.length-1;d>=0;d--)this._active[d].hook(f);else this._handlerFb(this._ident,"HOOK",f)},e.prototype.put=function(u,f,d){if(this._active.length)for(var v=this._active.length-1;v>=0;v--)this._active[v].put(u,f,d);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(u,f,d))},e.prototype.unhook=function(u,f){if(void 0===f&&(f=!0),this._active.length){var d=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,d=f,v=this._stack.fallThrough,this._stack.paused=!1),!v&&!1===d){for(;_>=0&&!0!==(d=this._active[_].unhook(u));_--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,d;_--}for(;_>=0;_--)if((d=this._active[_].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,d}else this._handlerFb(this._ident,"UNHOOK",u);this._active=b,this._ident=0},e}();f.DcsParser=C;var S=new v.Params;S.addParam(0);var L=function(){function e(u){this._handler=u,this._data="",this._params=S,this._hitLimit=!1}return e.prototype.hook=function(u){this._params=u.length>1||u.params[0]?u.clone():S,this._data="",this._hitLimit=!1},e.prototype.put=function(u,f,d){this._hitLimit||(this._data+=(0,_.utf32ToString)(u,f,d),this._data.length>y.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(u){var f=this,d=!1;if(this._hitLimit)d=!1;else if(u&&(d=this._handler(this._data,this._params))instanceof Promise)return d.then((function(u){return f._params=S,f._data="",f._hitLimit=!1,u}));return this._params=S,this._data="",this._hitLimit=!1,d},e}();f.DcsHandler=L},2015:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)});Object.defineProperty(f,"__esModule",{value:!0}),f.EscapeSequenceParser=f.VT500_TRANSITION_TABLE=f.TransitionTable=void 0;var y=d(844),b=d(8273),C=d(8742),S=d(6242),L=d(6351),E=function(){function e(u){this.table=new Uint8Array(u)}return e.prototype.setDefault=function(u,f){(0,b.fill)(this.table,u<<4|f)},e.prototype.add=function(u,f,d,_){this.table[f<<8|u]=d<<4|_},e.prototype.addMany=function(u,f,d,_){for(var v=0;v<u.length;v++)this.table[f<<8|u[v]]=d<<4|_},e}();f.TransitionTable=E;var k=160;f.VT500_TRANSITION_TABLE=function(){var u=new E(4095),f=Array.apply(null,Array(256)).map((function(u,f){return f})),r=function(u,d){return f.slice(u,d)},d=r(32,127),_=r(0,24);_.push(25),_.push.apply(_,r(28,32));var v,y=r(0,14);for(v in u.setDefault(1,0),u.addMany(d,0,2,0),y)u.addMany([24,26,153,154],v,3,0),u.addMany(r(128,144),v,3,0),u.addMany(r(144,152),v,3,0),u.add(156,v,0,0),u.add(27,v,11,1),u.add(157,v,4,8),u.addMany([152,158,159],v,0,7),u.add(155,v,11,3),u.add(144,v,11,9);return u.addMany(_,0,3,0),u.addMany(_,1,3,1),u.add(127,1,0,1),u.addMany(_,8,0,8),u.addMany(_,3,3,3),u.add(127,3,0,3),u.addMany(_,4,3,4),u.add(127,4,0,4),u.addMany(_,6,3,6),u.addMany(_,5,3,5),u.add(127,5,0,5),u.addMany(_,2,3,2),u.add(127,2,0,2),u.add(93,1,4,8),u.addMany(d,8,5,8),u.add(127,8,5,8),u.addMany([156,27,24,26,7],8,6,0),u.addMany(r(28,32),8,0,8),u.addMany([88,94,95],1,0,7),u.addMany(d,7,0,7),u.addMany(_,7,0,7),u.add(156,7,0,0),u.add(127,7,0,7),u.add(91,1,11,3),u.addMany(r(64,127),3,7,0),u.addMany(r(48,60),3,8,4),u.addMany([60,61,62,63],3,9,4),u.addMany(r(48,60),4,8,4),u.addMany(r(64,127),4,7,0),u.addMany([60,61,62,63],4,0,6),u.addMany(r(32,64),6,0,6),u.add(127,6,0,6),u.addMany(r(64,127),6,0,0),u.addMany(r(32,48),3,9,5),u.addMany(r(32,48),5,9,5),u.addMany(r(48,64),5,0,6),u.addMany(r(64,127),5,7,0),u.addMany(r(32,48),4,9,5),u.addMany(r(32,48),1,9,2),u.addMany(r(32,48),2,9,2),u.addMany(r(48,127),2,10,0),u.addMany(r(48,80),1,10,0),u.addMany(r(81,88),1,10,0),u.addMany([89,90,92],1,10,0),u.addMany(r(96,127),1,10,0),u.add(80,1,11,9),u.addMany(_,9,0,9),u.add(127,9,0,9),u.addMany(r(28,32),9,0,9),u.addMany(r(32,48),9,9,12),u.addMany(r(48,60),9,8,10),u.addMany([60,61,62,63],9,9,10),u.addMany(_,11,0,11),u.addMany(r(32,128),11,0,11),u.addMany(r(28,32),11,0,11),u.addMany(_,10,0,10),u.add(127,10,0,10),u.addMany(r(28,32),10,0,10),u.addMany(r(48,60),10,8,10),u.addMany([60,61,62,63],10,0,11),u.addMany(r(32,48),10,9,12),u.addMany(_,12,0,12),u.add(127,12,0,12),u.addMany(r(28,32),12,0,12),u.addMany(r(32,48),12,9,12),u.addMany(r(48,64),12,0,11),u.addMany(r(64,127),12,12,13),u.addMany(r(64,127),10,12,13),u.addMany(r(64,127),9,12,13),u.addMany(_,13,13,13),u.addMany(d,13,13,13),u.add(127,13,0,13),u.addMany([27,156,24,26],13,14,0),u.add(k,0,2,0),u.add(k,8,5,8),u.add(k,6,0,6),u.add(k,11,0,11),u.add(k,13,13,13),u}();var x=function(u){function r(d){void 0===d&&(d=f.VT500_TRANSITION_TABLE);var _=u.call(this)||this;return _._transitions=d,_._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},_.initialState=0,_.currentState=_.initialState,_._params=new C.Params,_._params.addParam(0),_._collect=0,_.precedingCodepoint=0,_._printHandlerFb=function(u,f,d){},_._executeHandlerFb=function(u){},_._csiHandlerFb=function(u,f){},_._escHandlerFb=function(u){},_._errorHandlerFb=function(u){return u},_._printHandler=_._printHandlerFb,_._executeHandlers=Object.create(null),_._csiHandlers=Object.create(null),_._escHandlers=Object.create(null),_._oscParser=new S.OscParser,_._dcsParser=new L.DcsParser,_._errorHandler=_._errorHandlerFb,_.registerEscHandler({final:"\\"},(function(){return!0})),_}return v(r,u),r.prototype._identifier=function(u,f){void 0===f&&(f=[64,126]);var d=0;if(u.prefix){if(u.prefix.length>1)throw Error("only one byte as prefix supported");if((d=u.prefix.charCodeAt(0))&&60>d||d>63)throw Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw Error("only two bytes as intermediates are supported");for(var _=0;_<u.intermediates.length;++_){var v=u.intermediates.charCodeAt(_);if(32>v||v>47)throw Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=v}}if(1!==u.final.length)throw Error("final must be a single byte");var y=u.final.charCodeAt(0);if(f[0]>y||y>f[1])throw Error("final must be in range "+f[0]+" .. "+f[1]);return(d<<=8)|y},r.prototype.identToString=function(u){for(var f=[];u;)f.push(String.fromCharCode(255&u)),u>>=8;return f.reverse().join("")},r.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},r.prototype.setPrintHandler=function(u){this._printHandler=u},r.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},r.prototype.registerEscHandler=function(u,f){var d=this._identifier(u,[48,126]);void 0===this._escHandlers[d]&&(this._escHandlers[d]=[]);var _=this._escHandlers[d];return _.push(f),{dispose:function(){var u=_.indexOf(f);-1!==u&&_.splice(u,1)}}},r.prototype.clearEscHandler=function(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]},r.prototype.setEscHandlerFallback=function(u){this._escHandlerFb=u},r.prototype.setExecuteHandler=function(u,f){this._executeHandlers[u.charCodeAt(0)]=f},r.prototype.clearExecuteHandler=function(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]},r.prototype.setExecuteHandlerFallback=function(u){this._executeHandlerFb=u},r.prototype.registerCsiHandler=function(u,f){var d=this._identifier(u);void 0===this._csiHandlers[d]&&(this._csiHandlers[d]=[]);var _=this._csiHandlers[d];return _.push(f),{dispose:function(){var u=_.indexOf(f);-1!==u&&_.splice(u,1)}}},r.prototype.clearCsiHandler=function(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]},r.prototype.setCsiHandlerFallback=function(u){this._csiHandlerFb=u},r.prototype.registerDcsHandler=function(u,f){return this._dcsParser.registerHandler(this._identifier(u),f)},r.prototype.clearDcsHandler=function(u){this._dcsParser.clearHandler(this._identifier(u))},r.prototype.setDcsHandlerFallback=function(u){this._dcsParser.setHandlerFallback(u)},r.prototype.registerOscHandler=function(u,f){return this._oscParser.registerHandler(u,f)},r.prototype.clearOscHandler=function(u){this._oscParser.clearHandler(u)},r.prototype.setOscHandlerFallback=function(u){this._oscParser.setHandlerFallback(u)},r.prototype.setErrorHandler=function(u){this._errorHandler=u},r.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},r.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},r.prototype._preserveStack=function(u,f,d,_,v){this._parseStack.state=u,this._parseStack.handlers=f,this._parseStack.handlerPos=d,this._parseStack.transition=_,this._parseStack.chunkPos=v},r.prototype.parse=function(u,f,d){var _,v=0,y=0,b=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(void 0===d||1===this._parseStack.state)throw this._parseStack.state=1,Error("improper continuation due to previous async handler, giving up parsing");var C=this._parseStack.handlers,S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===d&&S>-1)for(;S>=0&&!0!==(_=C[S](this._params));S--)if(_ instanceof Promise)return this._parseStack.handlerPos=S,_;this._parseStack.handlers=[];break;case 4:if(!1===d&&S>-1)for(;S>=0&&!0!==(_=C[S]());S--)if(_ instanceof Promise)return this._parseStack.handlerPos=S,_;this._parseStack.handlers=[];break;case 6:if(v=u[this._parseStack.chunkPos],_=this._dcsParser.unhook(24!==v&&26!==v,d))return _;27===v&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(v=u[this._parseStack.chunkPos],_=this._oscParser.end(24!==v&&26!==v,d))return _;27===v&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var L=b;L<f;++L){switch(v=u[L],(y=this._transitions.table[this.currentState<<8|(v<160?v:k)])>>4){case 2:for(var E=L+1;;++E){if(E>=f||(v=u[E])<32||v>126&&v<k){this._printHandler(u,L,E),L=E-1;break}if(++E>=f||(v=u[E])<32||v>126&&v<k){this._printHandler(u,L,E),L=E-1;break}if(++E>=f||(v=u[E])<32||v>126&&v<k){this._printHandler(u,L,E),L=E-1;break}if(++E>=f||(v=u[E])<32||v>126&&v<k){this._printHandler(u,L,E),L=E-1;break}}break;case 3:this._executeHandlers[v]?this._executeHandlers[v]():this._executeHandlerFb(v),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:L,code:v,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var x=(C=this._csiHandlers[this._collect<<8|v])?C.length-1:-1;x>=0&&!0!==(_=C[x](this._params));x--)if(_ instanceof Promise)return this._preserveStack(3,C,x,y,L),_;x<0&&this._csiHandlerFb(this._collect<<8|v,this._params),this.precedingCodepoint=0;break;case 8:do{switch(v){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(v-48)}}while(++L<f&&(v=u[L])>47&&v<60);L--;break;case 9:this._collect<<=8,this._collect|=v;break;case 10:for(var R=this._escHandlers[this._collect<<8|v],A=R?R.length-1:-1;A>=0&&!0!==(_=R[A]());A--)if(_ instanceof Promise)return this._preserveStack(4,R,A,y,L),_;A<0&&this._escHandlerFb(this._collect<<8|v),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|v,this._params);break;case 13:for(var M=L+1;;++M)if(M>=f||24===(v=u[M])||26===v||27===v||v>127&&v<k){this._dcsParser.put(u,L,M),L=M-1;break}break;case 14:if(_=this._dcsParser.unhook(24!==v&&26!==v))return this._preserveStack(6,[],0,y,L),_;27===v&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var O=L+1;;O++)if(O>=f||(v=u[O])<32||v>127&&v<k){this._oscParser.put(u,L,O),L=O-1;break}break;case 6:if(_=this._oscParser.end(24!==v&&26!==v))return this._preserveStack(5,[],0,y,L),_;27===v&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&y}},r}(y.Disposable);f.EscapeSequenceParser=x},6242:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.OscHandler=f.OscParser=void 0;var _=d(5770),v=d(482),y=[],b=function(){function e(){this._state=0,this._active=y,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.registerHandler=function(u,f){void 0===this._handlers[u]&&(this._handlers[u]=[]);var d=this._handlers[u];return d.push(f),{dispose:function(){var u=d.indexOf(f);-1!==u&&d.splice(u,1)}}},e.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},e.prototype.setHandlerFallback=function(u){this._handlerFb=u},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=y},e.prototype.reset=function(){if(2===this._state)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=y,this._id=-1,this._state=0},e.prototype._start=function(){if(this._active=this._handlers[this._id]||y,this._active.length)for(var u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(u,f,d){if(this._active.length)for(var _=this._active.length-1;_>=0;_--)this._active[_].put(u,f,d);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(u,f,d))},e.prototype.start=function(){this.reset(),this._state=1},e.prototype.put=function(u,f,d){if(3!==this._state){if(1===this._state)for(;f<d;){var _=u[f++];if(59===_){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+_-48}2===this._state&&d-f>0&&this._put(u,f,d)}},e.prototype.end=function(u,f){if(void 0===f&&(f=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var d=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,d=f,v=this._stack.fallThrough,this._stack.paused=!1),!v&&!1===d){for(;_>=0&&!0!==(d=this._active[_].end(u));_--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,d;_--}for(;_>=0;_--)if((d=this._active[_].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,d}else this._handlerFb(this._id,"END",u);this._active=y,this._id=-1,this._state=0}},e}();f.OscParser=b;var C=function(){function e(u){this._handler=u,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(u,f,d){this._hitLimit||(this._data+=(0,v.utf32ToString)(u,f,d),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(u){var f=this,d=!1;if(this._hitLimit)d=!1;else if(u&&(d=this._handler(this._data))instanceof Promise)return d.then((function(u){return f._data="",f._hitLimit=!1,u}));return this._data="",this._hitLimit=!1,d},e}();f.OscHandler=C},8742:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.Params=void 0;var d=2147483647,_=function(){function e(u,f){if(void 0===u&&(u=32),void 0===f&&(f=32),this.maxLength=u,this.maxSubParamsLength=f,f>256)throw Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(u){var f=new e;if(!u.length)return f;for(var d=Array.isArray(u[0])?1:0;d<u.length;++d){var _=u[d];if(Array.isArray(_))for(var v=0;v<_.length;++v)f.addSubParam(_[v]);else f.addParam(_)}return f},e.prototype.clone=function(){var u=new e(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u},e.prototype.toArray=function(){for(var u=[],f=0;f<this.length;++f){u.push(this.params[f]);var d=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-d>0&&u.push(Array.prototype.slice.call(this._subParams,d,_))}return u},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>d?d:u}},e.prototype.addSubParam=function(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>d?d:u,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0},e.prototype.getSubParams=function(u){var f=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];return d-f>0?this._subParams.subarray(f,d):null},e.prototype.getSubParamsAll=function(){for(var u={},f=0;f<this.length;++f){var d=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-d>0&&(u[f]=this._subParams.slice(d,_))}return u},e.prototype.addDigit=function(u){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var _=this._digitIsSub?this._subParams:this.params,v=_[f-1];_[f-1]=~v?Math.min(10*v+u,d):u}},e}();f.Params=_},5741:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.AddonManager=void 0;var d=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()},e.prototype.loadAddon=function(u,f){var d=this,_={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=function(){return d._wrappedAddonDispose(_)},f.activate(u)},e.prototype._wrappedAddonDispose=function(u){if(!u.isDisposed){for(var f=-1,d=0;d<this._addons.length;d++)if(this._addons[d]===u){f=d;break}if(-1===f)throw Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(f,1)}},e}();f.AddonManager=d},8771:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BufferApiView=void 0;var _=d(3785),v=d(511),y=function(){function e(u,f){this._buffer=u,this.type=f}return e.prototype.init=function(u){return this._buffer=u,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(u){var f=this._buffer.lines.get(u);if(f)return new _.BufferLineApiView(f)},e.prototype.getNullCell=function(){return new v.CellData},e}();f.BufferApiView=y},3785:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BufferLineApiView=void 0;var _=d(511),v=function(){function e(u){this._line=u}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(u,f){if(!(u<0||u>=this._line.length))return f?(this._line.loadCell(u,f),f):this._line.loadCell(u,new _.CellData)},e.prototype.translateToString=function(u,f,d){return this._line.translateToString(u,f,d)},e}();f.BufferLineApiView=v},8285:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BufferNamespaceApi=void 0;var _=d(8771),v=d(8460),y=function(){function e(u){var f=this;this._core=u,this._onBufferChange=new v.EventEmitter,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((function(){return f._onBufferChange.fire(f.active)}))}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),e}();f.BufferNamespaceApi=y},7975:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ParserApi=void 0;var d=function(){function e(u){this._core=u}return e.prototype.registerCsiHandler=function(u,f){return this._core.registerCsiHandler(u,(function(u){return f(u.toArray())}))},e.prototype.addCsiHandler=function(u,f){return this.registerCsiHandler(u,f)},e.prototype.registerDcsHandler=function(u,f){return this._core.registerDcsHandler(u,(function(u,d){return f(u,d.toArray())}))},e.prototype.addDcsHandler=function(u,f){return this.registerDcsHandler(u,f)},e.prototype.registerEscHandler=function(u,f){return this._core.registerEscHandler(u,f)},e.prototype.addEscHandler=function(u,f){return this.registerEscHandler(u,f)},e.prototype.registerOscHandler=function(u,f){return this._core.registerOscHandler(u,f)},e.prototype.addOscHandler=function(u,f){return this.registerOscHandler(u,f)},e}();f.ParserApi=d},7090:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.UnicodeApi=void 0;var d=function(){function e(u){this._core=u}return e.prototype.register=function(u){this._core.unicodeService.register(u)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(u){this._core.unicodeService.activeVersion=u},enumerable:!1,configurable:!0}),e}();f.UnicodeApi=d},744:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.BufferService=f.MINIMUM_ROWS=f.MINIMUM_COLS=void 0;var C=d(2585),S=d(5295),L=d(8460),E=d(844);f.MINIMUM_COLS=2,f.MINIMUM_ROWS=1;var k=function(u){function r(d){var _=u.call(this)||this;return _._optionsService=d,_.isUserScrolling=!1,_._onResize=new L.EventEmitter,_._onScroll=new L.EventEmitter,_.cols=Math.max(d.rawOptions.cols||0,f.MINIMUM_COLS),_.rows=Math.max(d.rawOptions.rows||0,f.MINIMUM_ROWS),_.buffers=new S.BufferSet(d,_),_}return v(r,u),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){u.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(u,f){this.cols=u,this.rows=f,this.buffers.resize(u,f),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:u,rows:f})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(u,f){void 0===f&&(f=!1);var d,_=this.buffer;(d=this._cachedBlankLine)&&d.length===this.cols&&d.getFg(0)===u.fg&&d.getBg(0)===u.bg||(d=_.getBlankLine(u,f),this._cachedBlankLine=d),d.isWrapped=f;var v=_.ybase+_.scrollTop,y=_.ybase+_.scrollBottom;if(0===_.scrollTop){var b=_.lines.isFull;y===_.lines.length-1?b?_.lines.recycle().copyFrom(d):_.lines.push(d.clone()):_.lines.splice(y+1,0,d.clone()),b?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{var C=y-v+1;_.lines.shiftElements(v+1,C-1,-1),_.lines.set(y,d.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)},r.prototype.scrollLines=function(u,f,d){var _=this.buffer;if(u<0){if(0===_.ydisp)return;this.isUserScrolling=!0}else u+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);var v=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+u,_.ybase),0),v!==_.ydisp&&(f||this._onScroll.fire(_.ydisp))},r.prototype.scrollPages=function(u){this.scrollLines(u*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(u){var f=u-this.buffer.ydisp;0!==f&&this.scrollLines(f)},y([b(0,C.IOptionsService)],r)}(E.Disposable);f.BufferService=k},7994:(u,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.CharsetService=void 0;var d=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(u){this.glevel=u,this.charset=this._charsets[u]},e.prototype.setgCharset=function(u,f){this._charsets[u]=f,this.glevel===u&&(this.charset=f)},e}();f.CharsetService=d},1753:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},y=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.CoreMouseService=void 0;var b=d(2585),C=d(8460),S={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(u){return 4!==u.button&&1===u.action&&(u.ctrl=!1,u.alt=!1,u.shift=!1,!0)}},VT200:{events:19,restrict:function(u){return 32!==u.action}},DRAG:{events:23,restrict:function(u){return 32!==u.action||3!==u.button}},ANY:{events:31,restrict:function(u){return!0}}};function l(u,f){var d=(u.ctrl?16:0)|(u.shift?4:0)|(u.alt?8:0);return 4===u.button?(d|=64,d|=u.action):(d|=3&u.button,4&u.button&&(d|=64),8&u.button&&(d|=128),32===u.action?d|=32:0!==u.action||f||(d|=3)),d}var L=String.fromCharCode,E={DEFAULT:function(u){var f=[l(u,!1)+32,u.col+32,u.row+32];return f[0]>255||f[1]>255||f[2]>255?"":"[M"+L(f[0])+L(f[1])+L(f[2])},SGR:function(u){var f=0===u.action&&4!==u.button?"m":"M";return"[<"+l(u,!0)+";"+u.col+";"+u.row+f}},k=function(){function e(u,f){var d,_,v,b;this._bufferService=u,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new C.EventEmitter,this._lastEvent=null;try{for(var L=y(Object.keys(S)),k=L.next();!k.done;k=L.next()){var x=k.value;this.addProtocol(x,S[x])}}catch(u){d={error:u}}finally{try{k&&!k.done&&(_=L.return)&&_.call(L)}finally{if(d)throw d.error}}try{for(var R=y(Object.keys(E)),A=R.next();!A.done;A=R.next()){var M=A.value;this.addEncoding(M,E[M])}}catch(u){v={error:u}}finally{try{A&&!A.done&&(b=R.return)&&b.call(R)}finally{if(v)throw v.error}}this.reset()}return e.prototype.addProtocol=function(u,f){this._protocols[u]=f},e.prototype.addEncoding=function(u,f){this._encodings[u]=f},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(u){if(!this._protocols[u])throw Error('unknown protocol "'+u+'"');this._activeProtocol=u,this._onProtocolChange.fire(this._protocols[u].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(u){if(!this._encodings[u])throw Error('unknown encoding "'+u+'"');this._activeEncoding=u},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(u){if(u.col<0||u.col>=this._bufferService.cols||u.row<0||u.row>=this._bufferService.rows)return!1;if(4===u.button&&32===u.action)return!1;if(3===u.button&&32!==u.action)return!1;if(4!==u.button&&(2===u.action||3===u.action))return!1;if(u.col++,u.row++,32===u.action&&this._lastEvent&&this._compareEvents(this._lastEvent,u))return!1;if(!this._protocols[this._activeProtocol].restrict(u))return!1;var f=this._encodings[this._activeEncoding](u);return f&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=u,!0},e.prototype.explainEvents=function(u){return{down:!!(1&u),up:!!(2&u),drag:!!(4&u),move:!!(8&u),wheel:!!(16&u)}},e.prototype._compareEvents=function(u,f){return u.col===f.col&&u.row===f.row&&u.button===f.button&&u.action===f.action&&u.ctrl===f.ctrl&&u.alt===f.alt&&u.shift===f.shift},_([v(0,b.IBufferService),v(1,b.ICoreService)],e)}();f.CoreMouseService=k},6975:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},b=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.CoreService=void 0;var C=d(2585),S=d(8460),L=d(1439),E=d(844),k=Object.freeze({insertMode:!1}),x=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),R=function(u){function t(f,d,_,v){var y=u.call(this)||this;return y._bufferService=d,y._logService=_,y._optionsService=v,y.isCursorInitialized=!1,y.isCursorHidden=!1,y._onData=y.register(new S.EventEmitter),y._onUserInput=y.register(new S.EventEmitter),y._onBinary=y.register(new S.EventEmitter),y._scrollToBottom=f,y.register({dispose:function(){return y._scrollToBottom=void 0}}),y.modes=(0,L.clone)(k),y.decPrivateModes=(0,L.clone)(x),y}return v(t,u),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=(0,L.clone)(k),this.decPrivateModes=(0,L.clone)(x)},t.prototype.triggerDataEvent=function(u,f){if(void 0===f&&(f=!1),!this._optionsService.rawOptions.disableStdin){var d=this._bufferService.buffer;d.ybase!==d.ydisp&&this._scrollToBottom(),f&&this._onUserInput.fire(),this._logService.debug('sending data "'+u+'"',(function(){return u.split("").map((function(u){return u.charCodeAt(0)}))})),this._onData.fire(u)}},t.prototype.triggerBinaryEvent=function(u){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+u+'"',(function(){return u.split("").map((function(u){return u.charCodeAt(0)}))})),this._onBinary.fire(u))},y([b(1,C.IBufferService),b(2,C.ILogService),b(3,C.IOptionsService)],t)}(E.Disposable);f.CoreService=R},9074:function(u,f,d){var _,v=this&&this.__extends||(_=function(u,f){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},_(u,f)},function(u,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+f+" is not a constructor or null");function r(){this.constructor=u}_(u,f),u.prototype=null===f?Object.create(f):(r.prototype=f.prototype,new r)}),y=this&&this.__generator||function(u,f){var d,_,v,y,b={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function a(y){return function(C){return function(y){if(d)throw new TypeError("Generator is already executing.");for(;b;)try{if(d=1,_&&(v=2&y[0]?_.return:y[0]?_.throw||((v=_.return)&&v.call(_),0):_.next)&&!(v=v.call(_,y[1])).done)return v;switch(_=0,v&&(y=[2&y[0],v.value]),y[0]){case 0:case 1:v=y;break;case 4:return b.label++,{value:y[1],done:!1};case 5:b.label++,_=y[1],y=[0];continue;case 7:y=b.ops.pop(),b.trys.pop();continue;default:if(!((v=(v=b.trys).length>0&&v[v.length-1])||6!==y[0]&&2!==y[0])){b=0;continue}if(3===y[0]&&(!v||y[1]>v[0]&&y[1]<v[3])){b.label=y[1];break}if(6===y[0]&&b.label<v[1]){b.label=v[1],v=y;break}if(v&&b.label<v[2]){b.label=v[2],b.ops.push(y);break}v[2]&&b.ops.pop(),b.trys.pop();continue}y=f.call(u,b)}catch(u){y=[6,u],_=0}finally{d=v=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}},b=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(f,"__esModule",{value:!0}),f.DecorationService=void 0;var C=d(8055),S=d(8460),L=d(844),E=d(6106),k=function(u){function t(){var f=u.call(this)||this;return f._decorations=new E.SortedList((function(u){return u.marker.line})),f._onDecorationRegistered=f.register(new S.EventEmitter),f._onDecorationRemoved=f.register(new S.EventEmitter),f}return v(t,u),Object.defineProperty(t.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),t.prototype.registerDecoration=function(u){var f=this;if(!u.marker.isDisposed){var d=new x(u);if(d){var _=d.marker.onDispose((function(){return d.dispose()}));d.onDispose((function(){d&&(f._decorations.delete(d)&&f._onDecorationRemoved.fire(d),_.dispose())})),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}},t.prototype.reset=function(){var u,f;try{for(var d=b(this._decorations.values()),_=d.next();!_.done;_=d.next())_.value.dispose()}catch(f){u={error:f}}finally{try{_&&!_.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}this._decorations.clear()},t.prototype.getDecorationsAtLine=function(u){return y(this,(function(f){return[2,this._decorations.getKeyIterator(u)]}))},t.prototype.getDecorationsAtCell=function(u,f,d){var _,v,C,S,L,E,k,x,R,A,M;return y(this,(function(y){switch(y.label){case 0:_=0,v=0,y.label=1;case 1:y.trys.push([1,6,7,8]),C=b(this._decorations.getKeyIterator(f)),S=C.next(),y.label=2;case 2:return S.done?[3,5]:(L=S.value,_=null!==(R=L.options.x)&&void 0!==R?R:0,v=_+(null!==(A=L.options.width)&&void 0!==A?A:1),!(u>=_&&u<v)||d&&(null!==(M=L.options.layer)&&void 0!==M?M:"bottom")!==d?[3,4]:[4,L]);case 3:y.sent(),y.label=4;case 4:return S=C.next(),[3,2];case 5:return[3,8];case 6:return E=y.sent(),k={error:E},[3,8];case 7:try{S&&!S.done&&(x=C.return)&&x.call(C)}finally{if(k)throw k.error}return[7];case 8:return[2]}}))},t.prototype.dispose=function(){var u,f;try{for(var d=b(this._decorations.values()),_=d.next();!_.done;_=d.next()){var v=_.value;this._onDecorationRemoved.fire(v)}}catch(f){u={error:f}}finally{try{_&&!_.done&&(f=d.return)&&f.call(d)}finally{if(u)throw u.error}}this.reset()},t}(L.Disposable);f.DecorationService=k;var x=function(u){function t(f){var d=u.call(this)||this;return d.options=f,d.isDisposed=!1,d.onRenderEmitter=d.register(new S.EventEmitter),d.onRender=d.onRenderEmitter.event,d._onDispose=d.register(new S.EventEmitter),d.onDispose=d._onDispose.event,d._cachedBg=null,d._cachedFg=null,d.marker=f.marker,d.options.overviewRulerOptions&&!d.options.overviewRulerOptions.position&&(d.options.overviewRulerOptions.position="full"),d}return v(t,u),Object.defineProperty(t.prototype,"backgroundColorRGB",{get:function(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=C.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foregroundColorRGB",{get:function(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=C.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),u.prototype.dispose.call(this))},t}(L.Disposable)},3730:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}};Object.defineProperty(f,"__esModule",{value:!0}),f.DirtyRowService=void 0;var y=d(2585),b=function(){function e(u){this._bufferService=u,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(u){u<this._start?this._start=u:u>this._end&&(this._end=u)},e.prototype.markRangeDirty=function(u,f){if(u>f){var d=u;u=f,f=d}u<this._start&&(this._start=u),f>this._end&&(this._end=f)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},_([v(0,y.IBufferService)],e)}();f.DirtyRowService=b},4348:function(u,f,d){var _=this&&this.__values||function(u){var f="function"==typeof Symbol&&Symbol.iterator,d=f&&u[f],_=0;if(d)return d.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},v=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b},y=this&&this.__spreadArray||function(u,f,d){if(d||2===arguments.length)for(var _,v=0,y=f.length;v<y;v++)!_&&v in f||(_||(_=Array.prototype.slice.call(f,0,v)),_[v]=f[v]);return u.concat(_||Array.prototype.slice.call(f))};Object.defineProperty(f,"__esModule",{value:!0}),f.InstantiationService=f.ServiceCollection=void 0;var b=d(2585),C=d(8343),S=function(){function e(){for(var u,f,d=[],y=0;y<arguments.length;y++)d[y]=arguments[y];this._entries=new Map;try{for(var b=_(d),C=b.next();!C.done;C=b.next()){var S=v(C.value,2),L=S[0],E=S[1];this.set(L,E)}}catch(f){u={error:f}}finally{try{C&&!C.done&&(f=b.return)&&f.call(b)}finally{if(u)throw u.error}}}return e.prototype.set=function(u,f){var d=this._entries.get(u);return this._entries.set(u,f),d},e.prototype.forEach=function(u){this._entries.forEach((function(f,d){return u(d,f)}))},e.prototype.has=function(u){return this._entries.has(u)},e.prototype.get=function(u){return this._entries.get(u)},e}();f.ServiceCollection=S;var L=function(){function e(){this._services=new S,this._services.set(b.IInstantiationService,this)}return e.prototype.setService=function(u,f){this._services.set(u,f)},e.prototype.getService=function(u){return this._services.get(u)},e.prototype.createInstance=function(u){for(var f,d,b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];var L=(0,C.getServiceDependencies)(u).sort((function(u,f){return u.index-f.index})),E=[];try{for(var k=_(L),x=k.next();!x.done;x=k.next()){var R=x.value,A=this._services.get(R.id);if(!A)throw Error("[createInstance] "+u.name+" depends on UNKNOWN service "+R.id+".");E.push(A)}}catch(u){f={error:u}}finally{try{x&&!x.done&&(d=k.return)&&d.call(k)}finally{if(f)throw f.error}}var M=L.length>0?L[0].index:b.length;if(b.length!==M)throw Error("[createInstance] First service dependency of "+u.name+" at position "+(M+1)+" conflicts with "+b.length+" static arguments");return new(u.bind.apply(u,y([void 0],v(y(y([],v(b),!1),v(E),!1)),!1)))},e}();f.InstantiationService=L},7866:function(u,f,d){var _=this&&this.__decorate||function(u,f,d,_){var v,y=arguments.length,b=y<3?f:null===_?_=Object.getOwnPropertyDescriptor(f,d):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(u,f,d,_);else for(var C=u.length-1;C>=0;C--)(v=u[C])&&(b=(y<3?v(b):y>3?v(f,d,b):v(f,d))||b);return y>3&&b&&Object.defineProperty(f,d,b),b},v=this&&this.__param||function(u,f){return function(d,_){f(d,_,u)}},y=this&&this.__read||function(u,f){var d="function"==typeof Symbol&&u[Symbol.iterator];if(!d)return u;var _,v,y=d.call(u),b=[];try{for(;(void 0===f||f-- >0)&&!(_=y.next()).done;)b.push(_.value)}catch(u){v={error:u}}finally{try{_&&!_.done&&(d=y.return)&&d.call(y)}finally{if(v)throw v.error}}return b},b=this&&this.__spreadArray||function(u,f,d){if(d||2===arguments.length)for(var _,v=0,y=f.length;v<y;v++)!_&&v in f||(_||(_=Array.prototype.slice.call(f,0,v)),_[v]=f[v]);return u.concat(_||Array.prototype.slice.call(f))};Object.defineProperty(f,"__esModule",{value:!0}),f.LogService=void 0;var C=d(2585),S={debug:C.LogLevelEnum.DEBUG,info:C.LogLevelEnum.INFO,warn:C.LogLevelEnum.WARN,error:C.LogLevelEnum.ERROR,off:C.LogLevelEnum.OFF},L=function(){function e(u){var f=this;this._optionsService=u,this.logLevel=C.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange((function(u){"logLevel"===u&&f._updateLogLevel()}))}return e.prototype._updateLogLevel=function(){this.logLevel=S[this._optionsService.rawOptions.logLevel]},e.prototype._evalLazyOptionalParams=function(u){for(var f=0;f<u.length;f++)"function"==typeof u[f]&&(u[f]=u[f]())},e.prototype._log=function(u,f,d){this._evalLazyOptionalParams(d),u.call.apply(u,b([console,"xterm.js: "+f],y(d),!1))},e.prototype.debug=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];this.logLevel<=C.LogLevelEnum.DEBUG&&this._log(console.log,u,f)},e.prototype.info=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];this.logLevel<=C.LogLevelEnum.INFO&&this._log(console.info,u,f)},e.prototype.warn=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];this.logLevel<=C.LogLevelEnum.WARN&&this._log(console.warn,u,f)},e.prototype.error=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];this.logLevel<=C.LogLevelEnum.ERROR&&this._log(console.error,u,f)},_([v(0,C.IOptionsService)],e)}();f.LogService=L},7302:function(u,f,d){var _=this&&this.__assign||function(){return _=Object.assign||function(u){for(var f,d=1,_=arguments.length;d<_;d++)for(var v in f=arguments[d])Object.prototype.hasOwnProperty.call(f,v)&&(u[v]=f[v]);return u},_.apply(this,arguments)};Object.defineProperty(f,"__esModule",{value:!0}),f.OptionsService=f.DEFAULT_OPTIONS=f.DEFAULT_BELL_SOUND=void 0;var v=d(8460),y=d(6114);f.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",f.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:f.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:y.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var b=["normal","bold","100","200","300","400","500","600","700","800","900"],C=function(){function e(u){this._onOptionChange=new v.EventEmitter;var d=_({},f.DEFAULT_OPTIONS);for(var y in u)if(y in d)try{var b=u[y];d[y]=this._sanitizeAndValidateOption(y,b)}catch(u){console.error(u)}this.rawOptions=d,this.options=_({},d),this._setupOptions()}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype._setupOptions=function(){var u=this,r=function(d){if(!(d in f.DEFAULT_OPTIONS))throw Error('No option with key "'+d+'"');return u.rawOptions[d]},i=function(d,_){if(!(d in f.DEFAULT_OPTIONS))throw Error('No option with key "'+d+'"');_=u._sanitizeAndValidateOption(d,_),u.rawOptions[d]!==_&&(u.rawOptions[d]=_,u._onOptionChange.fire(d))};for(var d in this.rawOptions){var _={get:r.bind(this,d),set:i.bind(this,d)};Object.defineProperty(this.options,d,_)}},e.prototype.setOption=function(u,f){this.options[u]=f},e.prototype._sanitizeAndValidateOption=function(u,d){switch(u){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":d||(d=f.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof d&&1<=d&&d<=1e3)break;d=b.includes(d)?d:f.DEFAULT_OPTIONS[u];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw Error(u+" cannot be less than 1, value: "+d);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw Error(u+" cannot be less than 0, value: "+d);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw Error(u+" cannot be less than or equal to 0, value: "+d);case"rows":case"cols":if(!d&&0!==d)throw Error(u+" must be numeric, value: "+d)}return d},e.prototype.getOption=function(u){return this.options[u]},e}();f.OptionsService=C},8343:(u,f)=>{function r(u,f,d){f.di$target===f?f.di$dependencies.push({id:u,index:d}):(f.di$dependencies=[{id:u,index:d}],f.di$target=f)}Object.defineProperty(f,"__esModule",{value:!0}),f.createDecorator=f.getServiceDependencies=f.serviceRegistry=void 0,f.serviceRegistry=new Map,f.getServiceDependencies=function(u){return u.di$dependencies||[]},f.createDecorator=function(u){if(f.serviceRegistry.has(u))return f.serviceRegistry.get(u);var i=function(u,f,d){if(3!==arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");r(i,u,d)};return i.toString=function(){return u},f.serviceRegistry.set(u,i),i}},2585:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.IDecorationService=f.IUnicodeService=f.IOptionsService=f.ILogService=f.LogLevelEnum=f.IInstantiationService=f.IDirtyRowService=f.ICharsetService=f.ICoreService=f.ICoreMouseService=f.IBufferService=void 0;var _,v=d(8343);f.IBufferService=(0,v.createDecorator)("BufferService"),f.ICoreMouseService=(0,v.createDecorator)("CoreMouseService"),f.ICoreService=(0,v.createDecorator)("CoreService"),f.ICharsetService=(0,v.createDecorator)("CharsetService"),f.IDirtyRowService=(0,v.createDecorator)("DirtyRowService"),f.IInstantiationService=(0,v.createDecorator)("InstantiationService"),(_=f.LogLevelEnum||(f.LogLevelEnum={}))[_.DEBUG=0]="DEBUG",_[_.INFO=1]="INFO",_[_.WARN=2]="WARN",_[_.ERROR=3]="ERROR",_[_.OFF=4]="OFF",f.ILogService=(0,v.createDecorator)("LogService"),f.IOptionsService=(0,v.createDecorator)("OptionsService"),f.IUnicodeService=(0,v.createDecorator)("UnicodeService"),f.IDecorationService=(0,v.createDecorator)("DecorationService")},1480:(u,f,d)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.UnicodeService=void 0;var _=d(8460),v=d(225),y=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter;var u=new v.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(u){if(!this._providers[u])throw Error('unknown Unicode version "'+u+'"');this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)},enumerable:!1,configurable:!0}),e.prototype.register=function(u){this._providers[u.version]=u},e.prototype.wcwidth=function(u){return this._activeProvider.wcwidth(u)},e.prototype.getStringCellWidth=function(u){for(var f=0,d=u.length,_=0;_<d;++_){var v=u.charCodeAt(_);if(55296<=v&&v<=56319){if(++_>=d)return f+this.wcwidth(v);var y=u.charCodeAt(_);56320<=y&&y<=57343?v=1024*(v-55296)+y-56320+65536:f+=this.wcwidth(y)}f+=this.wcwidth(v)}return f},e}();f.UnicodeService=y}},f={};return function r(d){var _=f[d];if(void 0!==_)return _.exports;var v=f[d]={exports:{}};return u[d].call(v.exports,v,v.exports,r),v.exports}(4389)})()}},f={};function __webpack_require__(d){var _=f[d];if(void 0!==_)return _.exports;var v=f[d]={exports:{}};return u[d](v,v.exports,__webpack_require__),v.exports}__webpack_require__.d=(u,f)=>{for(var d in f)__webpack_require__.o(f,d)&&!__webpack_require__.o(u,d)&&Object.defineProperty(u,d,{enumerable:!0,get:f[d]})},__webpack_require__.o=(u,f)=>Object.prototype.hasOwnProperty.call(u,f),__webpack_require__.r=u=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},(()=>{"use strict";var u={};__webpack_require__.r(u),__webpack_require__.d(u,{Decoder:()=>Decoder,Encoder:()=>Encoder,PacketType:()=>V,protocol:()=>K});const f=Object.create(null);f.open="0",f.close="1",f.ping="2",f.pong="3",f.message="4",f.upgrade="5",f.noop="6";const d=Object.create(null);Object.keys(f).forEach((u=>{d[f[u]]=u}));const _={type:"error",data:"parser error"},v="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),y="function"==typeof ArrayBuffer,encodeBlobAsBase64=(u,f)=>{const d=new FileReader;return d.onload=function(){const u=d.result.split(",")[1];f("b"+u)},d.readAsDataURL(u)},encodePacket_browser=({type:u,data:d},_,b)=>{return v&&d instanceof Blob?_?b(d):encodeBlobAsBase64(d,b):y&&(d instanceof ArrayBuffer||(C=d,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(C):C&&C.buffer instanceof ArrayBuffer))?_?b(d):encodeBlobAsBase64(new Blob([d]),b):b(f[u]+(d||""));var C},b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let u=0;u<64;u++)C[b.charCodeAt(u)]=u;const S="function"==typeof ArrayBuffer,decodeBase64Packet=(u,f)=>{if(S){const d=(u=>{let f,d,_,v,y,b=.75*u.length,S=u.length,L=0;"="===u[u.length-1]&&(b--,"="===u[u.length-2]&&b--);const E=new ArrayBuffer(b),k=new Uint8Array(E);for(f=0;f<S;f+=4)d=C[u.charCodeAt(f)],_=C[u.charCodeAt(f+1)],v=C[u.charCodeAt(f+2)],y=C[u.charCodeAt(f+3)],k[L++]=d<<2|_>>4,k[L++]=(15&_)<<4|v>>2,k[L++]=(3&v)<<6|63&y;return E})(u);return mapBinary(d,f)}return{base64:!0,data:u}},mapBinary=(u,f)=>"blob"===f&&u instanceof ArrayBuffer?new Blob([u]):u,decodePacket_browser=(u,f)=>{if("string"!=typeof u)return{type:"message",data:mapBinary(u,f)};const v=u.charAt(0);if("b"===v)return{type:"message",data:decodeBase64Packet(u.substring(1),f)};return d[v]?u.length>1?{type:d[v],data:u.substring(1)}:{type:d[v]}:_};function Emitter(u){if(u)return function mixin(u){for(var f in Emitter.prototype)u[f]=Emitter.prototype[f];return u}(u)}Emitter.prototype.on=Emitter.prototype.addEventListener=function(u,f){return this._callbacks=this._callbacks||{},(this._callbacks["$"+u]=this._callbacks["$"+u]||[]).push(f),this},Emitter.prototype.once=function(u,f){function on(){this.off(u,on),f.apply(this,arguments)}return on.fn=f,this.on(u,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(u,f){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var d,_=this._callbacks["$"+u];if(!_)return this;if(1==arguments.length)return delete this._callbacks["$"+u],this;for(var v=0;v<_.length;v++)if((d=_[v])===f||d.fn===f){_.splice(v,1);break}return 0===_.length&&delete this._callbacks["$"+u],this},Emitter.prototype.emit=function(u){this._callbacks=this._callbacks||{};for(var f=Array(arguments.length-1),d=this._callbacks["$"+u],_=1;_<arguments.length;_++)f[_-1]=arguments[_];if(d){_=0;for(var v=(d=d.slice(0)).length;_<v;++_)d[_].apply(this,f)}return this},Emitter.prototype.emitReserved=Emitter.prototype.emit,Emitter.prototype.listeners=function(u){return this._callbacks=this._callbacks||{},this._callbacks["$"+u]||[]},Emitter.prototype.hasListeners=function(u){return!!this.listeners(u).length};const L="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function pick(u,...f){return f.reduce(((f,d)=>(u.hasOwnProperty(d)&&(f[d]=u[d]),f)),{})}const E=setTimeout,k=clearTimeout;function installTimerFunctions(u,f){f.useNativeTimers?(u.setTimeoutFn=E.bind(L),u.clearTimeoutFn=k.bind(L)):(u.setTimeoutFn=setTimeout.bind(L),u.clearTimeoutFn=clearTimeout.bind(L))}class TransportError extends Error{constructor(u,f,d){super(u),this.description=f,this.context=d,this.type="TransportError"}}class Transport extends Emitter{constructor(u){super(),this.writable=!1,installTimerFunctions(this,u),this.opts=u,this.query=u.query,this.readyState="",this.socket=u.socket}onError(u,f,d){return super.emitReserved("error",new TransportError(u,f,d)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(u){"open"===this.readyState&&this.write(u)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(u){const f=decodePacket_browser(u,this.socket.binaryType);this.onPacket(f)}onPacket(u){super.emitReserved("packet",u)}onClose(u){this.readyState="closed",super.emitReserved("close",u)}}const x="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),R={};let A,M=0,O=0;function yeast_encode(u){let f="";do{f=x[u%64]+f,u=Math.floor(u/64)}while(u>0);return f}function yeast(){const u=yeast_encode(+new Date);return u!==A?(M=0,A=u):u+"."+yeast_encode(M++)}for(;O<64;O++)R[x[O]]=O;function parseqs_encode(u){let f="";for(let d in u)u.hasOwnProperty(d)&&(f.length&&(f+="&"),f+=encodeURIComponent(d)+"="+encodeURIComponent(u[d]));return f}let D=!1;try{D="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(u){}const T=D;function XHR(u){const f=u.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!f||T))return new XMLHttpRequest}catch(u){}if(!f)try{return new(L[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(u){}}function empty(){}const B=null!=new XHR({xdomain:!1}).responseType;class Request extends Emitter{constructor(u,f){super(),installTimerFunctions(this,f),this.opts=f,this.method=f.method||"GET",this.uri=u,this.async=!1!==f.async,this.data=void 0!==f.data?f.data:null,this.create()}create(){const u=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");u.xdomain=!!this.opts.xd,u.xscheme=!!this.opts.xs;const f=this.xhr=new XHR(u);try{f.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){f.setDisableHeaderCheck&&f.setDisableHeaderCheck(!0);for(let u in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(u)&&f.setRequestHeader(u,this.opts.extraHeaders[u])}}catch(u){}if("POST"===this.method)try{f.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(u){}try{f.setRequestHeader("Accept","*/*")}catch(u){}"withCredentials"in f&&(f.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(f.timeout=this.opts.requestTimeout),f.onreadystatechange=()=>{4===f.readyState&&(200===f.status||1223===f.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof f.status?f.status:0)}),0))},f.send(this.data)}catch(u){return void this.setTimeoutFn((()=>{this.onError(u)}),0)}"undefined"!=typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)}onError(u){this.emitReserved("error",u,this.xhr),this.cleanup(!0)}cleanup(u){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=empty,u)try{this.xhr.abort()}catch(u){}"undefined"!=typeof document&&delete Request.requests[this.index],this.xhr=null}}onLoad(){const u=this.xhr.responseText;null!==u&&(this.emitReserved("data",u),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Request.requestsCount=0,Request.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){addEventListener("onpagehide"in L?"pagehide":"unload",unloadHandler,!1)}function unloadHandler(){for(let u in Request.requests)Request.requests.hasOwnProperty(u)&&Request.requests[u].abort()}const P="function"==typeof Promise&&"function"==typeof Promise.resolve?u=>Promise.resolve().then(u):(u,f)=>f(u,0),I=L.WebSocket||L.MozWebSocket,H="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const F={websocket:class WS extends Transport{constructor(u){super(u),this.supportsBinary=!u.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const u=this.uri(),f=this.opts.protocols,d=H?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(d.headers=this.opts.extraHeaders);try{this.ws=H?new I(u,f,d):f?new I(u,f):new I(u)}catch(u){return this.emitReserved("error",u)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=u=>this.onClose({description:"websocket connection closed",context:u}),this.ws.onmessage=u=>this.onData(u.data),this.ws.onerror=u=>this.onError("websocket error",u)}write(u){this.writable=!1;for(let f=0;f<u.length;f++){const d=u[f],_=f===u.length-1;encodePacket_browser(d,this.supportsBinary,(u=>{try{this.ws.send(u)}catch(u){}_&&P((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let u=this.query||{};const f=this.opts.secure?"wss":"ws";let d="";this.opts.port&&("wss"===f&&443!==Number(this.opts.port)||"ws"===f&&80!==Number(this.opts.port))&&(d=":"+this.opts.port),this.opts.timestampRequests&&(u[this.opts.timestampParam]=yeast()),this.supportsBinary||(u.b64=1);const _=parseqs_encode(u);return f+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+d+this.opts.path+(_.length?"?"+_:"")}check(){return!!I}},polling:class Polling extends Transport{constructor(u){if(super(u),this.polling=!1,"undefined"!=typeof location){const f="https:"===location.protocol;let d=location.port;d||(d=f?"443":"80"),this.xd="undefined"!=typeof location&&u.hostname!==location.hostname||d!==u.port,this.xs=u.secure!==f}const f=u&&u.forceBase64;this.supportsBinary=B&&!f}get name(){return"polling"}doOpen(){this.poll()}pause(u){this.readyState="pausing";const pause=()=>{this.readyState="paused",u()};if(this.polling||!this.writable){let u=0;this.polling&&(u++,this.once("pollComplete",(function(){--u||pause()}))),this.writable||(u++,this.once("drain",(function(){--u||pause()})))}else pause()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(u){((u,f)=>{const d=u.split(""),_=[];for(let u=0;u<d.length;u++){const v=decodePacket_browser(d[u],f);if(_.push(v),"error"===v.type)break}return _})(u,this.socket.binaryType).forEach((u=>{if("opening"===this.readyState&&"open"===u.type&&this.onOpen(),"close"===u.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(u)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const close=()=>{this.write([{type:"close"}])};"open"===this.readyState?close():this.once("open",close)}write(u){this.writable=!1,((u,f)=>{const d=u.length,_=Array(d);let v=0;u.forEach(((u,y)=>{encodePacket_browser(u,!1,(u=>{_[y]=u,++v===d&&f(_.join(""))}))}))})(u,(u=>{this.doWrite(u,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let u=this.query||{};const f=this.opts.secure?"https":"http";let d="";!1!==this.opts.timestampRequests&&(u[this.opts.timestampParam]=yeast()),this.supportsBinary||u.sid||(u.b64=1),this.opts.port&&("https"===f&&443!==Number(this.opts.port)||"http"===f&&80!==Number(this.opts.port))&&(d=":"+this.opts.port);const _=parseqs_encode(u);return f+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+d+this.opts.path+(_.length?"?"+_:"")}request(u={}){return Object.assign(u,{xd:this.xd,xs:this.xs},this.opts),new Request(this.uri(),u)}doWrite(u,f){const d=this.request({method:"POST",data:u});d.on("success",f),d.on("error",((u,f)=>{this.onError("xhr post error",u,f)}))}doPoll(){const u=this.request();u.on("data",this.onData.bind(this)),u.on("error",((u,f)=>{this.onError("xhr poll error",u,f)})),this.pollXhr=u}}},j=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,q=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(u){const f=u,d=u.indexOf("["),_=u.indexOf("]");-1!=d&&-1!=_&&(u=u.substring(0,d)+u.substring(d,_).replace(/:/g,";")+u.substring(_,u.length));let v=j.exec(u||""),y={},b=14;for(;b--;)y[q[b]]=v[b]||"";return-1!=d&&-1!=_&&(y.source=f,y.host=y.host.substring(1,y.host.length-1).replace(/;/g,":"),y.authority=y.authority.replace("[","").replace("]","").replace(/;/g,":"),y.ipv6uri=!0),y.pathNames=function pathNames(u,f){const d=/\/{2,9}/g,_=f.replace(d,"/").split("/");"/"!=f.substr(0,1)&&0!==f.length||_.splice(0,1);"/"==f.substr(f.length-1,1)&&_.splice(_.length-1,1);return _}(0,y.path),y.queryKey=function queryKey(u,f){const d={};return f.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(u,f,_){f&&(d[f]=_)})),d}(0,y.query),y}class Socket extends Emitter{constructor(u,f={}){super(),u&&"object"==typeof u&&(f=u,u=null),u?(u=parse(u),f.hostname=u.host,f.secure="https"===u.protocol||"wss"===u.protocol,f.port=u.port,u.query&&(f.query=u.query)):f.host&&(f.hostname=parse(f.host).host),installTimerFunctions(this,f),this.secure=null!=f.secure?f.secure:"undefined"!=typeof location&&"https:"===location.protocol,f.hostname&&!f.port&&(f.port=this.secure?"443":"80"),this.hostname=f.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=f.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=f.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},f),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function parseqs_decode(u){let f={},d=u.split("&");for(let u=0,_=d.length;u<_;u++){let _=d[u].split("=");f[decodeURIComponent(_[0])]=decodeURIComponent(_[1])}return f}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(u){const f=Object.assign({},this.opts.query);f.EIO=4,f.transport=u,this.id&&(f.sid=this.id);const d=Object.assign({},this.opts.transportOptions[u],this.opts,{query:f,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new F[u](d)}open(){let u;if(this.opts.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))u="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);u=this.transports[0]}this.readyState="opening";try{u=this.createTransport(u)}catch(u){return this.transports.shift(),void this.open()}u.open(),this.setTransport(u)}setTransport(u){this.transport&&this.transport.removeAllListeners(),this.transport=u,u.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(u=>this.onClose("transport close",u)))}probe(u){let f=this.createTransport(u),d=!1;Socket.priorWebsocketSuccess=!1;const onTransportOpen=()=>{d||(f.send([{type:"ping",data:"probe"}]),f.once("packet",(u=>{if(!d)if("pong"===u.type&&"probe"===u.data){if(this.upgrading=!0,this.emitReserved("upgrading",f),!f)return;Socket.priorWebsocketSuccess="websocket"===f.name,this.transport.pause((()=>{d||"closed"!==this.readyState&&(cleanup(),this.setTransport(f),f.send([{type:"upgrade"}]),this.emitReserved("upgrade",f),f=null,this.upgrading=!1,this.flush())}))}else{const u=Error("probe error");u.transport=f.name,this.emitReserved("upgradeError",u)}})))};function freezeTransport(){d||(d=!0,cleanup(),f.close(),f=null)}const onerror=u=>{const d=Error("probe error: "+u);d.transport=f.name,freezeTransport(),this.emitReserved("upgradeError",d)};function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(u){f&&u.name!==f.name&&freezeTransport()}const cleanup=()=>{f.removeListener("open",onTransportOpen),f.removeListener("error",onerror),f.removeListener("close",onTransportClose),this.off("close",onclose),this.off("upgrading",onupgrade)};f.once("open",onTransportOpen),f.once("error",onerror),f.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),f.open()}onOpen(){if(this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let u=0;const f=this.upgrades.length;for(;u<f;u++)this.probe(this.upgrades[u])}}onPacket(u){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",u),this.emitReserved("heartbeat"),u.type){case"open":this.onHandshake(JSON.parse(u.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const f=Error("server error");f.code=u.data,this.onError(f);break;case"message":this.emitReserved("data",u.data),this.emitReserved("message",u.data)}}onHandshake(u){this.emitReserved("handshake",u),this.id=u.sid,this.transport.query.sid=u.sid,this.upgrades=this.filterUpgrades(u.upgrades),this.pingInterval=u.pingInterval,this.pingTimeout=u.pingTimeout,this.maxPayload=u.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const u=this.getWritablePackets();this.transport.send(u),this.prevBufferLen=u.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let u=1;for(let d=0;d<this.writeBuffer.length;d++){const _=this.writeBuffer[d].data;if(_&&(u+="string"==typeof(f=_)?function utf8Length(u){let f=0,d=0;for(let _=0,v=u.length;_<v;_++)f=u.charCodeAt(_),f<128?d+=1:f<2048?d+=2:f<55296||f>=57344?d+=3:(_++,d+=4);return d}(f):Math.ceil(1.33*(f.byteLength||f.size))),d>0&&u>this.maxPayload)return this.writeBuffer.slice(0,d);u+=2}var f;return this.writeBuffer}write(u,f,d){return this.sendPacket("message",u,f,d),this}send(u,f,d){return this.sendPacket("message",u,f,d),this}sendPacket(u,f,d,_){if("function"==typeof f&&(_=f,f=void 0),"function"==typeof d&&(_=d,d=null),"closing"===this.readyState||"closed"===this.readyState)return;(d=d||{}).compress=!1!==d.compress;const v={type:u,data:f,options:d};this.emitReserved("packetCreate",v),this.writeBuffer.push(v),_&&this.once("flush",_),this.flush()}close(){const close=()=>{this.onClose("forced close"),this.transport.close()},cleanupAndClose=()=>{this.off("upgrade",cleanupAndClose),this.off("upgradeError",cleanupAndClose),close()},waitForUpgrade=()=>{this.once("upgrade",cleanupAndClose),this.once("upgradeError",cleanupAndClose)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?waitForUpgrade():close()})):this.upgrading?waitForUpgrade():close()),this}onError(u){Socket.priorWebsocketSuccess=!1,this.emitReserved("error",u),this.onClose("transport error",u)}onClose(u,f){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",u,f),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(u){const f=[];let d=0;const _=u.length;for(;d<_;d++)~this.transports.indexOf(u[d])&&f.push(u[d]);return f}}Socket.protocol=4;Socket.protocol;const W="function"==typeof ArrayBuffer,U=Object.prototype.toString,N="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===U.call(Blob),z="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===U.call(File);function isBinary(u){return W&&(u instanceof ArrayBuffer||(u=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(u):u.buffer instanceof ArrayBuffer)(u))||N&&u instanceof Blob||z&&u instanceof File}function hasBinary(u,f){if(!u||"object"!=typeof u)return!1;if(Array.isArray(u)){for(let f=0,d=u.length;f<d;f++)if(hasBinary(u[f]))return!0;return!1}if(isBinary(u))return!0;if(u.toJSON&&"function"==typeof u.toJSON&&1===arguments.length)return hasBinary(u.toJSON(),!0);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)&&hasBinary(u[f]))return!0;return!1}function deconstructPacket(u){const f=[],d=u.data,_=u;return _.data=_deconstructPacket(d,f),_.attachments=f.length,{packet:_,buffers:f}}function _deconstructPacket(u,f){if(!u)return u;if(isBinary(u)){const d={_placeholder:!0,num:f.length};return f.push(u),d}if(Array.isArray(u)){const d=Array(u.length);for(let _=0;_<u.length;_++)d[_]=_deconstructPacket(u[_],f);return d}if("object"==typeof u&&!(u instanceof Date)){const d={};for(const _ in u)Object.prototype.hasOwnProperty.call(u,_)&&(d[_]=_deconstructPacket(u[_],f));return d}return u}function reconstructPacket(u,f){return u.data=_reconstructPacket(u.data,f),u.attachments=void 0,u}function _reconstructPacket(u,f){if(!u)return u;if(u&&!0===u._placeholder){if("number"==typeof u.num&&u.num>=0&&u.num<f.length)return f[u.num];throw Error("illegal attachments")}if(Array.isArray(u))for(let d=0;d<u.length;d++)u[d]=_reconstructPacket(u[d],f);else if("object"==typeof u)for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&(u[d]=_reconstructPacket(u[d],f));return u}const K=5;var V;!function(u){u[u.CONNECT=0]="CONNECT",u[u.DISCONNECT=1]="DISCONNECT",u[u.EVENT=2]="EVENT",u[u.ACK=3]="ACK",u[u.CONNECT_ERROR=4]="CONNECT_ERROR",u[u.BINARY_EVENT=5]="BINARY_EVENT",u[u.BINARY_ACK=6]="BINARY_ACK"}(V||(V={}));class Encoder{constructor(u){this.replacer=u}encode(u){return u.type!==V.EVENT&&u.type!==V.ACK||!hasBinary(u)?[this.encodeAsString(u)]:(u.type=u.type===V.EVENT?V.BINARY_EVENT:V.BINARY_ACK,this.encodeAsBinary(u))}encodeAsString(u){let f=""+u.type;return u.type!==V.BINARY_EVENT&&u.type!==V.BINARY_ACK||(f+=u.attachments+"-"),u.nsp&&"/"!==u.nsp&&(f+=u.nsp+","),null!=u.id&&(f+=u.id),null!=u.data&&(f+=JSON.stringify(u.data,this.replacer)),f}encodeAsBinary(u){const f=deconstructPacket(u),d=this.encodeAsString(f.packet),_=f.buffers;return _.unshift(d),_}}class Decoder extends Emitter{constructor(u){super(),this.reviver=u}add(u){let f;if("string"==typeof u){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");f=this.decodeString(u),f.type===V.BINARY_EVENT||f.type===V.BINARY_ACK?(this.reconstructor=new BinaryReconstructor(f),0===f.attachments&&super.emitReserved("decoded",f)):super.emitReserved("decoded",f)}else{if(!isBinary(u)&&!u.base64)throw Error("Unknown type: "+u);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");f=this.reconstructor.takeBinaryData(u),f&&(this.reconstructor=null,super.emitReserved("decoded",f))}}decodeString(u){let f=0;const d={type:Number(u.charAt(0))};if(void 0===V[d.type])throw Error("unknown packet type "+d.type);if(d.type===V.BINARY_EVENT||d.type===V.BINARY_ACK){const _=f+1;for(;"-"!==u.charAt(++f)&&f!=u.length;);const v=u.substring(_,f);if(v!=Number(v)||"-"!==u.charAt(f))throw Error("Illegal attachments");d.attachments=Number(v)}if("/"===u.charAt(f+1)){const _=f+1;for(;++f;){if(","===u.charAt(f))break;if(f===u.length)break}d.nsp=u.substring(_,f)}else d.nsp="/";const _=u.charAt(f+1);if(""!==_&&Number(_)==_){const _=f+1;for(;++f;){const d=u.charAt(f);if(null==d||Number(d)!=d){--f;break}if(f===u.length)break}d.id=Number(u.substring(_,f+1))}if(u.charAt(++f)){const _=this.tryParse(u.substr(f));if(!Decoder.isPayloadValid(d.type,_))throw Error("invalid payload");d.data=_}return d}tryParse(u){try{return JSON.parse(u,this.reviver)}catch(u){return!1}}static isPayloadValid(u,f){switch(u){case V.CONNECT:return"object"==typeof f;case V.DISCONNECT:return void 0===f;case V.CONNECT_ERROR:return"string"==typeof f||"object"==typeof f;case V.EVENT:case V.BINARY_EVENT:return Array.isArray(f)&&f.length>0;case V.ACK:case V.BINARY_ACK:return Array.isArray(f)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class BinaryReconstructor{constructor(u){this.packet=u,this.buffers=[],this.reconPack=u}takeBinaryData(u){if(this.buffers.push(u),this.buffers.length===this.reconPack.attachments){const u=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),u}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function on(u,f,d){return u.on(f,d),function subDestroy(){u.off(f,d)}}const G=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class socket_Socket extends Emitter{constructor(u,f,d){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=u,this.nsp=f,d&&d.auth&&(this.auth=d.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const u=this.io;this.subs=[on(u,"open",this.onopen.bind(this)),on(u,"packet",this.onpacket.bind(this)),on(u,"error",this.onerror.bind(this)),on(u,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...u){return u.unshift("message"),this.emit.apply(this,u),this}emit(u,...f){if(G.hasOwnProperty(u))throw Error('"'+u+'" is a reserved event name');f.unshift(u);const d={type:V.EVENT,data:f,options:{}};if(d.options.compress=!1!==this.flags.compress,"function"==typeof f[f.length-1]){const u=this.ids++,_=f.pop();this._registerAckCallback(u,_),d.id=u}const _=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!_||!this.connected)||(this.connected?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(u,f){const d=this.flags.timeout;if(void 0===d)return void(this.acks[u]=f);const _=this.io.setTimeoutFn((()=>{delete this.acks[u];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===u&&this.sendBuffer.splice(f,1);f.call(this,Error("operation has timed out"))}),d);this.acks[u]=(...u)=>{this.io.clearTimeoutFn(_),f.call(this,null,...u)}}packet(u){u.nsp=this.nsp,this.io._packet(u)}onopen(){"function"==typeof this.auth?this.auth((u=>{this.packet({type:V.CONNECT,data:u})})):this.packet({type:V.CONNECT,data:this.auth})}onerror(u){this.connected||this.emitReserved("connect_error",u)}onclose(u,f){this.connected=!1,delete this.id,this.emitReserved("disconnect",u,f)}onpacket(u){if(u.nsp===this.nsp)switch(u.type){case V.CONNECT:if(u.data&&u.data.sid){const f=u.data.sid;this.onconnect(f)}else this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case V.EVENT:case V.BINARY_EVENT:this.onevent(u);break;case V.ACK:case V.BINARY_ACK:this.onack(u);break;case V.DISCONNECT:this.ondisconnect();break;case V.CONNECT_ERROR:this.destroy();const f=Error(u.data.message);f.data=u.data.data,this.emitReserved("connect_error",f)}}onevent(u){const f=u.data||[];null!=u.id&&f.push(this.ack(u.id)),this.connected?this.emitEvent(f):this.receiveBuffer.push(Object.freeze(f))}emitEvent(u){if(this._anyListeners&&this._anyListeners.length){const f=this._anyListeners.slice();for(const d of f)d.apply(this,u)}super.emit.apply(this,u)}ack(u){const f=this;let d=!1;return function(..._){d||(d=!0,f.packet({type:V.ACK,id:u,data:_}))}}onack(u){const f=this.acks[u.id];"function"==typeof f&&(f.apply(this,u.data),delete this.acks[u.id])}onconnect(u){this.id=u,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((u=>this.emitEvent(u))),this.receiveBuffer=[],this.sendBuffer.forEach((u=>{this.notifyOutgoingListeners(u),this.packet(u)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((u=>u())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:V.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(u){return this.flags.compress=u,this}get volatile(){return this.flags.volatile=!0,this}timeout(u){return this.flags.timeout=u,this}onAny(u){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(u),this}prependAny(u){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(u),this}offAny(u){if(!this._anyListeners)return this;if(u){const f=this._anyListeners;for(let d=0;d<f.length;d++)if(u===f[d])return f.splice(d,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(u){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(u),this}prependAnyOutgoing(u){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(u),this}offAnyOutgoing(u){if(!this._anyOutgoingListeners)return this;if(u){const f=this._anyOutgoingListeners;for(let d=0;d<f.length;d++)if(u===f[d])return f.splice(d,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(u){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const f=this._anyOutgoingListeners.slice();for(const d of f)d.apply(this,u.data)}}}function Backoff(u){u=u||{},this.ms=u.min||100,this.max=u.max||1e4,this.factor=u.factor||2,this.jitter=u.jitter>0&&u.jitter<=1?u.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var u=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var f=Math.random(),d=Math.floor(f*this.jitter*u);u=0==(1&Math.floor(10*f))?u-d:u+d}return 0|Math.min(u,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(u){this.ms=u},Backoff.prototype.setMax=function(u){this.max=u},Backoff.prototype.setJitter=function(u){this.jitter=u};class Manager extends Emitter{constructor(f,d){var _;super(),this.nsps={},this.subs=[],f&&"object"==typeof f&&(d=f,f=void 0),(d=d||{}).path=d.path||"/socket.io",this.opts=d,installTimerFunctions(this,d),this.reconnection(!1!==d.reconnection),this.reconnectionAttempts(d.reconnectionAttempts||1/0),this.reconnectionDelay(d.reconnectionDelay||1e3),this.reconnectionDelayMax(d.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(_=d.randomizationFactor)&&void 0!==_?_:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==d.timeout?2e4:d.timeout),this._readyState="closed",this.uri=f;const v=d.parser||u;this.encoder=new v.Encoder,this.decoder=new v.Decoder,this._autoConnect=!1!==d.autoConnect,this._autoConnect&&this.open()}reconnection(u){return arguments.length?(this._reconnection=!!u,this):this._reconnection}reconnectionAttempts(u){return void 0===u?this._reconnectionAttempts:(this._reconnectionAttempts=u,this)}reconnectionDelay(u){var f;return void 0===u?this._reconnectionDelay:(this._reconnectionDelay=u,null===(f=this.backoff)||void 0===f||f.setMin(u),this)}randomizationFactor(u){var f;return void 0===u?this._randomizationFactor:(this._randomizationFactor=u,null===(f=this.backoff)||void 0===f||f.setJitter(u),this)}reconnectionDelayMax(u){var f;return void 0===u?this._reconnectionDelayMax:(this._reconnectionDelayMax=u,null===(f=this.backoff)||void 0===f||f.setMax(u),this)}timeout(u){return arguments.length?(this._timeout=u,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(u){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket(this.uri,this.opts);const f=this.engine,d=this;this._readyState="opening",this.skipReconnect=!1;const _=on(f,"open",(function(){d.onopen(),u&&u()})),v=on(f,"error",(f=>{d.cleanup(),d._readyState="closed",this.emitReserved("error",f),u?u(f):d.maybeReconnectOnOpen()}));if(!1!==this._timeout){const u=this._timeout;0===u&&_();const d=this.setTimeoutFn((()=>{_(),f.close(),f.emit("error",Error("timeout"))}),u);this.opts.autoUnref&&d.unref(),this.subs.push((function subDestroy(){clearTimeout(d)}))}return this.subs.push(_),this.subs.push(v),this}connect(u){return this.open(u)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const u=this.engine;this.subs.push(on(u,"ping",this.onping.bind(this)),on(u,"data",this.ondata.bind(this)),on(u,"error",this.onerror.bind(this)),on(u,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(u){this.decoder.add(u)}ondecoded(u){this.emitReserved("packet",u)}onerror(u){this.emitReserved("error",u)}socket(u,f){let d=this.nsps[u];return d||(d=new socket_Socket(this,u,f),this.nsps[u]=d),d}_destroy(u){const f=Object.keys(this.nsps);for(const u of f){if(this.nsps[u].active)return}this._close()}_packet(u){const f=this.encoder.encode(u);for(let d=0;d<f.length;d++)this.engine.write(f[d],u.options)}cleanup(){this.subs.forEach((u=>u())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(u,f){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",u,f),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const u=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const f=this.backoff.duration();this._reconnecting=!0;const d=this.setTimeoutFn((()=>{u.skipReconnect||(this.emitReserved("reconnect_attempt",u.backoff.attempts),u.skipReconnect||u.open((f=>{f?(u._reconnecting=!1,u.reconnect(),this.emitReserved("reconnect_error",f)):u.onreconnect()})))}),f);this.opts.autoUnref&&d.unref(),this.subs.push((function subDestroy(){clearTimeout(d)}))}}onreconnect(){const u=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",u)}}const X={};function esm_lookup(u,f){"object"==typeof u&&(f=u,u=void 0);const d=function url(u,f="",d){let _=u;d=d||"undefined"!=typeof location&&location,null==u&&(u=d.protocol+"//"+d.host),"string"==typeof u&&("/"===u.charAt(0)&&(u="/"===u.charAt(1)?d.protocol+u:d.host+u),/^(https?|wss?):\/\//.test(u)||(u=void 0!==d?d.protocol+"//"+u:"https://"+u),_=parse(u)),_.port||(/^(http|ws)$/.test(_.protocol)?_.port="80":/^(http|ws)s$/.test(_.protocol)&&(_.port="443")),_.path=_.path||"/";const v=-1!==_.host.indexOf(":")?"["+_.host+"]":_.host;return _.id=_.protocol+"://"+v+":"+_.port+f,_.href=_.protocol+"://"+v+(d&&d.port===_.port?"":":"+_.port),_}(u,(f=f||{}).path||"/socket.io"),_=d.source,v=d.id,y=d.path,b=X[v]&&y in X[v].nsps;let C;return f.forceNew||f["force new connection"]||!1===f.multiplex||b?C=new Manager(_,f):(X[v]||(X[v]=new Manager(_,f)),C=X[v]),d.query&&!f.query&&(f.query=d.queryKey),C.socket(d.path,f)}Object.assign(esm_lookup,{Manager,Socket:socket_Socket,io:esm_lookup,connect:esm_lookup});var Y=__webpack_require__(320),Z=__webpack_require__(617);const J=__webpack_require__(227)("SSHnake");__webpack_require__(712),__webpack_require__(725);let $,Q,ee,te,re,ie,ne=!1,oe=!1,se=!1,ae=!1;const ce=new Y.Terminal,le=document.getElementById("logBtn"),he=document.getElementById("credentialsBtn"),ue=document.getElementById("reauthBtn"),fe=document.getElementById("downloadLogBtn"),de=document.getElementById("status"),pe=document.getElementById("header"),_e=document.getElementById("footer"),ve=document.getElementById("countdown"),ye=new Z.FitAddon,ge=document.getElementById("terminal-container");ce.loadAddon(ye),ce.open(ge),ce.focus(),ye.fit();const me=esm_lookup({path:"/ssh/socket.io"});function reauthSession(){return J("re-authenticating"),me.emit("control","reauth"),window.location.href="/ssh/reauth",!1}function downloadLog(){if(!0===oe){re=`SSHnake-${ee.getFullYear()}${ee.getMonth()+1}${ee.getDate()}_${ee.getHours()}${ee.getMinutes()}${ee.getSeconds()}.log`;const u=new Blob([$.replace(/[\u001b\u009b][[\]()#;?]*(?:\d{1,4}(?:;\d{0,4})*)?[0-9A-ORZcf-nqry=><;]/g,"")],{type:"text/plain"}),f=window.document.createElement("a");f.href=window.URL.createObjectURL(u),f.download=re,document.body.appendChild(f),f.click(),document.body.removeChild(f)}ce.focus()}function toggleLog(){return!0===ne?(ne=!1,oe=!0,le.innerHTML='<i class="fas fa-clipboard fa-fw"></i> Start Log',te=new Date,$=`${$}\r\n\r\nLog End for ${Q}: ${te.getFullYear()}/${te.getMonth()+1}/${te.getDate()} @ ${te.getHours()}:${te.getMinutes()}:${te.getSeconds()}\r\n`,ee=te,ce.focus(),!1):(ne=!0,oe=!0,le.innerHTML='<i class="fas fa-cog fa-spin fa-fw"></i> Stop Log',fe.style.color="#000",fe.addEventListener("click",downloadLog),te=new Date,$=`Log Start for ${Q}: ${te.getFullYear()}/${te.getMonth()+1}/${te.getDate()} @ ${te.getHours()}:${te.getMinutes()}:${te.getSeconds()}\r\n\r\n`,ee=te,ce.focus(),!1)}function replayCredentials(){return me.emit("control","replayCredentials"),J("control: replayCredentials"),ce.focus(),!1}function drawMenu(){le.addEventListener("click",toggleLog),ae&&(ue.addEventListener("click",reauthSession),ue.style.display="block"),se&&(he.addEventListener("click",replayCredentials),he.style.display="block"),oe&&(fe.addEventListener("click",downloadLog),fe.style.display="block")}function resizeScreen(){ye.fit(),me.emit("resize",{cols:ce.cols,rows:ce.rows}),J("resize: "+JSON.stringify({cols:ce.cols,rows:ce.rows}))}window.addEventListener("resize",resizeScreen,!1),ce.onData((u=>{me.emit("data",u)})),me.on("data",(u=>{ce.write(u),ne&&($+=u)})),me.on("connect",(()=>{me.emit("geometry",ce.cols,ce.rows),J(`geometry: ${ce.cols}, ${ce.rows}`)})),me.on("setTerminalOpts",(u=>{ce.options=u})),me.on("title",(u=>{document.title=u})),me.on("menu",(()=>{drawMenu()})),me.on("status",(u=>{de.innerHTML=u})),me.on("ssherror",(u=>{de.innerHTML=u,de.style.backgroundColor="red",ie=!0})),me.on("headerBackground",(u=>{pe.style.backgroundColor=u})),me.on("header",(u=>{u&&(pe.innerHTML=u,pe.style.display="block",ge.style.height="calc(100% - 38px)",resizeScreen())})),me.on("footer",(u=>{Q=u,_e.innerHTML=u})),me.on("statusBackground",(u=>{de.style.backgroundColor=u})),me.on("allowreplay",(u=>{!0===u?(J("allowreplay: "+u),se=!0,drawMenu()):(se=!1,J("allowreplay: "+u))})),me.on("allowreauth",(u=>{!0===u?(J("allowreauth: "+u),ae=!0,drawMenu()):(ae=!1,J("allowreauth: "+u))})),me.on("disconnect",(u=>{ie||(de.style.backgroundColor="red",de.innerHTML="WEBSOCKET SERVER DISCONNECTED: "+u),me.io.reconnection(!1),ve.classList.remove("active")})),me.on("error",(u=>{ie||(de.style.backgroundColor="red",de.innerHTML="ERROR: "+u)})),me.on("reauth",(()=>{ae&&reauthSession()}));let be=!1;me.on("shutdownCountdownUpdate",(u=>{be||(ve.classList.add("active"),be=!0),ve.innerText=`Shutting down in ${u}s`})),ce.onTitleChange((u=>{document.title=u}))})()})();